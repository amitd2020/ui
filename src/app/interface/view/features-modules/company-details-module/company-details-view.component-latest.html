<ng-container *ngIf="companyData">

    <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" [key]="thisPage"></p-confirmDialog>
    <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" key="crmConfirmationForCompanyDetails"></p-confirmDialog>
    <p-messages [value]="msgs"></p-messages>
    
    <p-dialog header="Info" [(visible)]="infoDialogModal" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '35vw'}" [draggable]="false" [focusOnShow]="false">
        <div class="text-center">
            <p>We do not have data for foreign companies.</p>
        </div>
        <p-footer>
            <div class="text-center">
                <button pButton type="button" class="p-button-rounded p-button-inline blue-grey-btn" (click)="infoDialogModal = false" label="Close"></button>
            </div>
        </p-footer>
    </p-dialog>
    
    <!-- Login Modal Dialog -->
    <p-dialog styleClass="loginDialogModal" [modal]="true" [(visible)]="showLoginDialog" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false">
        <dg-login></dg-login>
    </p-dialog>
    <!-- Login Modal Dialog End -->
    
    <!-- Upgrade Plan Dialog -->
    <p-dialog styleClass="subscriptionPlanDialogModal" [modal]="true" [(visible)]="showUpgradePlanDialog" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false" [style]="{width: '60vw'}">
        <dg-upgrade-plan [currentPlan]="userDetails?.planId" [componentView]="'inModal'"></dg-upgrade-plan>
    </p-dialog>
    <!-- Upgrade Plan Dialog End -->

    <!-- Add Notes Dialog Start -->
    <p-dialog header="Added Notes" [modal]="true" [(visible)]="showAddNoteModalBool" appendTo="body" (onHide)="cancelNotes()" [style]="{width: '40vw'} " styleClass="notesResponsive" [draggable]="false">

        <p-editor [(ngModel)]="companyNoteValue" [style]="{'height': '320px'}"></p-editor>

        <div class="mt-3">
            <span class="ml-1">
                <button pButton type="button" [disabled]="!companyNoteValue" label="Submit" class="p-button-rounded p-button-inline" (click)="addNotes()"></button>
            </span>
            <!-- <span class="ml-1">
                <button pButton type="button" [disabled]="!companyNoteValue" label="Delete" class="p-button-rounded p-button-danger" (click)="deleteNotes()"></button>
            </span> -->
        </div>
    </p-dialog>
    <!-- Add Notes Dialog End -->
    
    <p-overlayPanel #shareButtonsOverlayPanel styleClass="shareButtonsOverlayPanel" appendTo="body">
        <div>
            <share-button theme="circles-dark" button="linkedin" pTooltip="Linkedin" tooltipPosition="bottom"></share-button>
            <share-button theme="circles-dark" button="facebook" pTooltip="Facebook" tooltipPosition="bottom"></share-button>
            <share-button theme="circles-dark" button="twitter" pTooltip="Twitter" tooltipPosition="bottom"></share-button>
            <share-button theme="circles-dark" button="email" pTooltip="Email" tooltipPosition="bottom"></share-button>
            <share-button theme="circles-dark" button="whatsapp" pTooltip="WhatsApp" tooltipPosition="bottom"></share-button>
            <share-button theme="circles-dark" button="copy" pTooltip="Copy Link" tooltipPosition="bottom" appendTo="body" hideDelay="200"></share-button>
        </div>
    </p-overlayPanel>
    
    <ng-container *ngIf="!companyNotExists">

        <div class="grid">

            <!-- top Header start -->
            <div class="col md:hidden">
                <div class="backBtn text-left mt-0">
                    <button pButton type="button" label="Back" icon="pi pi-chevron-left" class="p-button-inline p-button-sm p-button-rounded" [routerLink]="['/']"></button>
                </div>
            </div>
        
            <div class="col-12">
    
                <div class="responsiveWhiteOuterCard">
                
                    <!-- Top Header Start -->
                
                    <div class="card companyDetailsHeaderCard">
                        
                        <div class="grid align-items-center">
                            <div class="col">
                                <div class="grid">
                
                                    <!-- Compay Logo for Desktop -->
                                    <div class="col-fixed hidden md:block">
                                        <span class="companyLogo">
                                            <!-- <img *ngIf="companyData?.company_contact_info_latest?.logo_url ; else defaultLogo" src="{{ companyData?.company_contact_info_latest?.logo_url }}"/> --> 
                                            <!-- This above line will be uncomment and below line will be remove after url updated from vackend and url will be received like : companyLogoUpdated insted of companylogoupdated -->

                                            <span *ngIf="companyData?.company_contact_info_latest && companyData?.company_contact_info_latest?.logo_url; else noCompanyLogo">
                                                <span *ngIf="companyData?.company_contact_info_latest && companyData?.company_contact_info_latest?.logo_url.includes('https://'); else defaultlogo">
                                                    <img src="{{ newUrlForCompanyLogo }}"/>
                                                </span>
                                                <ng-template #defaultlogo>
                                                    <!-- <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" id="company-accent-4" data-supported-dps="128x128">
                                                        <g>
                                                          <g>
                                                            <path fill="#e9e5de" d="M0 0h128v128H0z"/>
                                                            <path fill="#9eb3c8" d="M48 16h64v112H48z"/>
                                                            <path fill="#788fa5" d="M16 80h32v48H16z"/>
                                                            <path fill="#56687a" d="M48 80h32v48H48z"/>
                                                          </g>
                                                        </g>
                                                      </svg></span> -->
                                                    <span>
                                                        <i class="material-icons defaultCompanyLogo">business</i>
                                                    </span>
                                                </ng-template>
                                            </span>

                                            <!-- <img *ngIf="companyData?.company_contact_info_latest?.logo_url ; else defaultLogo" src="{{ newUrlForCompanyLogo }}"/> -->
                        
                                            <ng-container *ngIf="selectedGlobalCountry == 'uk'">
                                                <a href="javascript:void(0);" *ngIf="!favouriteListStatus" (click)="addToFavouriteList()" class="pi pi-star addToFavouriteListBtn" title="Add To Favourites" [disabled]="selectedGlobalCountry !== 'uk'"></a>
                                                <a href="javascript:void(0);" *ngIf="favouriteListStatus" (click)="removeFromFavouriteList()" class="pi pi-star addToFavouriteListBtn active" title="Remove From Favourites"></a>
                                            </ng-container>
                                        </span>
                        
                                    </div>
                                    <ng-template #noCompanyLogo>
                                        <i class="material-icons defaultCompanyLogo">business</i>
                                    </ng-template>
                        
                                    <div class="col">
                        
                                        <div class="grid align-items-center">
                        
                                            <!-- Compay Logo for mobile devices -->
                                            <div class="col-fixed md:hidden">
                                                <span class="companyLogo">
                                                    <img *ngIf="companyData?.company_contact_info_latest && companyData?.company_contact_info_latest?.logo_url; else defaultLogo" src="{{ companyData?.company_contact_info_latest?.logo_url }}"/>
                        
                                                    <a href="javascript:void(0);" *ngIf="!favouriteListStatus" (click)="addToFavouriteList()" class="pi pi-star-o addToFavouriteListBtn" title="Add To Favourites"></a>
                                                    <a href="javascript:void(0);" *ngIf="favouriteListStatus" (click)="removeFromFavouriteList()" class="pi pi-star addToFavouriteListBtn active" title="Remove From Favourites"></a>
                                                </span>
                                            </div>
                                            <div class="col-fixed">
                                                <h1 class="cardHeaderTitle my-1">
                                                    <strong>{{ companyData?.businessName | uppercase }}</strong>
                                                </h1>
                                            </div>
                                            <ng-container *ngIf="companyData?.company_contact_info_latest && companyData?.company_contact_info_latest?.company_tradingAs">
                                                <div class="grid">
                                                    <div class="col-fixed mt-1 cardHeaderTitle">
                                                        <span><strong>(Trading as: </strong></span>
                                                        <span><strong>{{ companyData?.company_contact_info_latest?.company_tradingAs | titlecase }})</strong></span>
                                                    </div>
                                                </div>
                                            </ng-container>
                        
                                            <div class="col-fixed">
                                                    <ng-container *ngIf="companyData?.companyStatus; else noCompanyStatus">                        
                                                        <ng-container *ngIf="[ 'live', 'in liquidation', 'administration order' ].includes(companyData?.companyStatus) ; else companyStatusNotLive">
                                                            <span [ngClass]="{ 'green': companyData?.companyStatus != undefined && [ 'live', 'administration order' ].includes( companyData?.companyStatus ), 'c-orange': companyData?.companyStatus != undefined && companyData?.companyStatus == 'in liquidation' }" class="status">
                                                                {{ companyData?.companyStatus | uppercase }}
                                                            </span>
                                                        </ng-container>
                                                        <ng-template #companyStatusNotLive>
                                                            <span [ngClass]="{ 'red': companyData?.companyStatus }" class="status">
                                                                {{ companyData?.companyStatus | uppercase }}
                                                            </span>                        
                                                        </ng-template>
                                                    </ng-container>
                                                    <ng-template #noCompanyStatus>-</ng-template>
                                            </div>
                                            <div class="col-fixed">
                                                <ng-container *ngIf="msmeStatusColor[ companyData?.msmeCategory ]">
                                                    <span class="text-lg text-white px-2 py-1 border-round-lg" [ngStyle]="{ 'background-color': msmeStatusColor[ companyData?.msmeCategory ] }">
                                                        {{ companyData?.msmeCategory.replace( ' Company', '' ) | titlecase }}
                                                        <i class="ui-icon-info-outline ml-1" (mouseenter)="msmeInfoOverlay.show($event)" (mouseleave)="msmeInfoOverlay.hide($event)"></i>
                                                    </span>
                                                    <p-overlayPanel #msmeInfoOverlay [showCloseIcon]="false" [dismissable]="true" appendTo="body">
                                                        <dg-msme-svg-popup-card></dg-msme-svg-popup-card>
                                                    </p-overlayPanel>
                                                </ng-container>
                                            </div>

                                            <div class="col-fixed">
                                                <a pButton label="Full Overview" icon="pi pi-window-maximize" [href]="'/company/' + companyData?.companyRegistrationNumber+ '/' + formatCompanyNameForUrl(companyData?.businessName | titlecase)" target="_blank" class="p-button p-button-sm p-button-rounded forPreviewButton hideBlockForMobileView" title="View in fullscreen"></a>
                                            </div>
                                        </div>
                        
                                        <div class="grid mt-1 md:mt-0">
                                            
                                            <!-- <div class="col-fixed pb-0" *ngIf="sidePanelView == false && creditLimitCheck == 0 && isLoggedIn">
                                                159>> <dg-company-pdf-report [companyReportParams]="companyData" [showButtonFor]="'companyFullCreditPdfReport'" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report>
                                            </div> -->
    
                                            <div class="col-fixed pb-0" *ngIf="!isLoggedIn">
                                                <dg-company-pdf-report [companyReportParams]="companyData" [showButtonFor]="'companyFullCreditPdfReport'" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report>
                                            </div>

                                            <ng-container *ngIf="companyReportButtonBool">
                                                <dg-company-pdf-report [companyReportParams]="companyData" [(companyReportButtonBool)]="companyReportButtonBool" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report >
                                            </ng-container>
    
                                            <!-- <ng-container *ngIf="fullCreditReportButtonBool"> -->
                                                <dg-company-pdf-report [companyReportParams]="companyData" [(fullCreditReportButtonBool)]="fullCreditReportButtonBool" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount" *ngIf="isLoggedIn"></dg-company-pdf-report>
                                            <!-- </ng-container> -->
    
                                            <div class="col-fixed pb-0 xl:mr-4">
                                                <div class="companyDetailsLabel">Company Number</div>
                                                <div class="companyDetailsInfoText">{{ companyData?.companyRegistrationNumber | uppercase }}</div>
                                            </div>
                                            
                                            <div class="col-fixed pb-0 xl:mr-4">
                                                <div class="companyDetailsLabel">Ultimate Parent Company</div>

                                                <ng-container *ngIf="companyData?.ultimateParentCompanyNumber != undefined && companyData?.ultimateParentCompanyNumber != '' && companyData?.ultimateParentCompanyName != undefined && companyData?.ultimateParentCompanyName != ''; else noDataBlock">
                                                    <a class="companyDetailsInfoText" (click)="checkForeignCompany(companyData?.ultimateParentCompanyNumber, companyData?.ultimateParentCompanyName)" class="cName"> {{ companyData?.ultimateParentCompanyName | uppercase }} | {{ companyData?.ultimateParentCompanyNumber | uppercase }}</a>
                                                </ng-container>

                                                <ng-template #noDataBlock>

                                                    <ng-container *ngIf="companyData?.ultimateParentCompanyNumber != undefined && companyData?.ultimateParentCompanyNumber != ''; else firstBlock">
                                                        <a class="companyDetailsInfoText" (click)="checkForeignCompany(companyData?.ultimateParentCompanyNumber, companyData?.ultimateParentCompanyName)" class="cName"> {{ companyData?.ultimateParentCompanyNumber | uppercase }}</a>
                                                    </ng-container>

                                                    <ng-template #firstBlock>
                                                        <ng-container *ngIf="companyData?.ultimateParentCompanyName != undefined && companyData?.ultimateParentCompanyName != ''; else otherBlock">
                                                            <a class="companyDetailsInfoText" (click)="checkForeignCompany(companyData?.ultimateParentCompanyNumber, companyData?.ultimateParentCompanyName)" class="cName"> {{ companyData?.ultimateParentCompanyName | uppercase }}</a>
                                                        </ng-container>
                                                    </ng-template>

                                                    <ng-template #otherBlock>
                                                        -
                                                    </ng-template>

                                                </ng-template>
                                            </div>
    
                                            <!-- <div class="col-fixed pb-0" *ngIf="sidePanelView == true">
                                                <dg-company-pdf-report [companyReportParams]="companyData" [showButtonFor]="'companyFullCreditPdfReport'" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report>
                                            </div>                                      -->
                                            
                                            <div class="col-fixed pb-0 xl:mr-4" *ngIf="sidePanelView == false">
                                                <div class="companyDetailsLabel">Incorporated on</div>
                                                <div class="companyDetailsInfoText">
                                                    {{ formatDate( companyData?.companyRegistrationDate ) }}
                                                    <span class="small-data-font ml-1"><strong>({{ ( companyData?.companyAge ) }} Years Old)</strong></span>
                                                </div>
                                            </div>
                                            
                                            <!-- <div class="col-fixed pb-0 goToESGPlatformSidebar" *ngIf="authGuardService.isLoggedin() && userRoleAndFeatureAuthService.isAdmin() && sidePanelView == true">
                                                <button pButton type="button" label="Go To ESG System" icon="pi pi-arrow-right" iconPos="right" class="p-button-rounded p-button-sm esgPlatformBtnSidebar mb-xxl-2" (click)="goToESGPlatform()"></button>
                                            </div> -->

                                        </div>
                                        
                        
                                        <div class="mt-3" *ngIf="( companyData?.accountsDueDate || disqualifiedDirectorsCount > 0) || calculateAccountOverduePeriod( companyData?.accountsDueDate )">
                                            
                                            <span class="roundedColoredChipLabel" [ngClass]="{ 'c-red': calculateAccountOverduePeriod( companyData?.accountsDueDate ) }" *ngIf="companyData?.accountsDueDate  && calculateAccountOverduePeriod( companyData?.accountsDueDate )"><strong><small>{{ calculateAccountOverduePeriod( companyData?.accountsDueDate ) ? 'Accounts Overdue: ' : '' }}</small></strong> <span *ngIf="companyData?.accountsDueDate && calculateAccountOverduePeriod( companyData?.accountsDueDate )">{{ commonService.changeToDate( companyData?.accountsDueDate ) | date: 'dd-MM-yyyy' }}</span></span>
            
                                            <span *ngIf="isLoggedIn && disqualifiedDirectorsCount > 0" class="roundedColoredChipLabel" [ngClass]="{ 'c-red': disqualifiedDirectorsCount > 0 }"><strong><small>Disqualified Directors:</small></strong> {{ disqualifiedDirectorsCount }}</span>
            
                                        </div>
    
                                    </div>
                                </div>
                                
                                <div class="grid mt-2 md:mt-3 flex">
                                    <!-- <div class="py-0 md:mr-3 pos-relative" >  //this class is inserted by DG-6184 will look after sometime. -->
                                        
                                        <!-- <ng-container *ngIf="isLoggedIn && ( userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('companyMonitorPlus') )"> -->
                                        <span addOnAccess="companyMonitorPlus">
                                            <!-- <button pButton type="button" *ngIf="!watchListPlusStatus" label="Monitor Plus" icon="pi pi-eye" class="p-button-rounded p-button-sm mr-2 mb-xxl-2" (click)="showAddToMonitorPlus()"></button>
                                            <button pButton type="button" *ngIf="watchListPlusStatus" label="Monitor Plus" icon="pi pi-eye-slash" class="p-button-rounded p-button-sm mr-2 mb-xxl-2" (click)="removeFromWatchListPlus()"></button> -->
    
                                            <!-- Dialog Box For Monitor Plus -->
                                            <p-dialog header="&nbsp;" [baseZIndex]="999999998" [(visible)]="monitorPlusPopUpBool" class="monitorPlusPopup " [draggable]="false" [resizable]="false">
                                                                
                                                <h5 class="text-center mb-1 font-medium">Stay updated with Company Name!</h5>
                                                <div class="text-center font-medium"> <em>Measure, Predict And Anticipate Exposure To Risk</em></div>
                                                <div class="monitorPlusPopupInnerdiv">
                                                    <h3 class="text-center font-semibold">Monitor Plus</h3>
                                                    <ul>
                                                        <li><i class="pi pi-check font-bold mr-1"></i> Monitor changes in Companies House.</li>
                                                        <li><i class="pi pi-check font-bold mr-1"></i> You will receive an email notification as soon as there is a change in the company's activity. Including updates to Financial Accounts, Patent Registration, Credit Scores, Imports, Exports, Directorship, Shareholders, Shareholdings and more.</li>
                                                        <li><i class="pi pi-check font-bold mr-1"></i> Monitor changes to this company's activity with email notifications in real-time.</li>
                                                        <li><i class="pi pi-check font-bold mr-1"></i> 12 Month company activity monitoring.</li>
                                                    </ul>
                                                    <div class="text-center">
                                                        <button pButton type="button" class="p-button-rounded monitorPlusBtn mr-2 "
                                                            (click)="saveWatchListPlus()" label="ADD TO MONITOR PLUS LIST"></button>
                                                    </div>
                                                </div>
                                            
                                            </p-dialog>
                                        </span>
                                        <!-- </ng-container> -->
    
                                        <!-- <button pButton type="button" *ngIf="!watchListStatus" label="Monitor" icon="pi pi-eye" class="p-button-rounded p-button-sm mr-2 mb-xxl-2" (click)="showAddToMonitor()"></button>
                                        <button pButton type="button" *ngIf="watchListStatus" label="Monitor" icon="pi pi-eye-slash" class="p-button-rounded p-button-sm mr-2 mb-xxl-2" (click)="removeFromWatchList()"></button> -->
    
                                        <!-- Dialog Box For Monitor  -->
                                        <p-dialog header="&nbsp;" [baseZIndex]="999999998" [(visible)]="monitorPopUpBool" class="monitorPlusPopup" [draggable]="false" [resizable]="false">
                                            <h5 class="text-center mb-1 font-medium">Stay updated with Company Name!</h5>
                                            <div class="text-center font-medium"><em>Measure, Predict And Anticipate Exposure To Risk</em></div>
                                            
                                            <div class="monitorPlusPopupInnerdiv">
                                                <h3 class="text-center font-medium">Upgrade Your Account to "Premium" and get access to <span class="font-semibold">"Monitor Plus"</span></h3>
                                                <ul>
                                                    <li><i class="pi pi-check font-bold mr-1"></i>Monitor changes in Companies House.</li>
                                                    <li><i class="pi pi-check font-bold mr-1"></i> You will receive an email notification as soon as there is a change in the company's activity. Including updates to Financial Accounts, Patent Registration, Credit Scores, Imports, Exports, Directorship, Shareholders, Shareholdings and more.</li>
                                                    <li> <i class="pi pi-check font-bold mr-1"></i> Monitor changes to this company's activity with email notifications in real-time.</li>
                                                    <li> <i class="pi pi-check font-bold mr-1"></i> 12 Month company activity monitoring. </li>
                                                </ul>
                                                <div class="text-center">
                                                    <button pButton type="button" [hidden]="premium_sub" class="p-button-rounded monitorPlusBtn mr-2 " (click)="upgradeToPremiumPlan()" label="Upgrade Plan"></button>
                                                    <button pButton type="button" class="p-button-rounded monitorPlusBtn mr-2 " (click)="saveWatchList()" label="ADD TO MONITOR LIST"></button>
                                                </div>
                                            </div>
                                        
                                        </p-dialog>

                                        <!-- <ng-container *ngIf="authGuardService.isLoggedin()">
                                            <button pButton type="button" label="Notes" icon="ui-icon-note-add" class="p-button-rounded p-button-sm mr-2 mb-xxl-2" [ngClass]="{ 'hasFeatureLockIcon':  userRoleAndFeatureAuthService.checkUserHasFeatureAccess( 'Company Notes' ) == false  }"  (click)="showAddNoteModal(undefined)">
                                                <span *ngIf="userRoleAndFeatureAuthService.checkUserHasFeatureAccess( 'Company Notes' ) == false" class="featureLockIconForDetailsPage"><img src="{{ userRoleAndFeatureAuthService.userAuthorizationDetails.featureLockIconPath }}"></span>
                                            </button>
                                        </ng-container> -->

                                        <button pButton type="button" label="Share" icon="pi pi-share-alt" class="displayContentOnFullScreen p-button-sm p-button-rounded mr-2" (click)="showCompanyProfileShareOverlay( shareButtonsOverlayPanel, $event )"></button>

                                        <!-- <ng-container *ngIf="sidePanelView == true"> -->
    
                                            <!-- <dg-company-pdf-report [companyReportParams]="companyData" [showButtonFor]="'companyPdfReport'" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report> -->
    
                                            <!-- <dg-company-pdf-report [companyReportParams]="companyData" [showButtonFor]="'shareButton'" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report> -->
    
                                        <!-- </ng-container> -->

                                        <!-- <ng-container *ngIf="companyReportButtonBool">
                                            <dg-company-pdf-report [companyReportParams]="companyData" [(companyReportButtonBool)]="companyReportButtonBool" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-company-pdf-report >
                                        </ng-container> -->

                                        <!-- <ng-container *ngIf="fullCreditReportButtonBool"> -->
                                            <!-- <dg-company-pdf-report [companyReportParams]="companyData" [(fullCreditReportButtonBool)]="fullCreditReportButtonBool" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount" *ngIf="isLoggedIn"></dg-company-pdf-report> -->
                                        <!-- </ng-container> -->

                                        <ng-container *ngIf="enterpriseReportButton">
                                            <dg-enterprise-pdf-report [(enterpriseReportButton)]="enterpriseReportButton" [companyReportParams]="companyData" (messageCommunicator)="getMessage($event)" [relatedDirectorAPICount]="relCompAPICount"></dg-enterprise-pdf-report>
                                        </ng-container>

                                        <ng-container *ngIf="isLoggedIn">
                                            <dg-add-company-to-list [selectedCompany]="companyData.companyRegistrationNumber" [thisPage]="'company'" (messageCommunicator)="getMessage($event)"></dg-add-company-to-list>
                                        </ng-container>

                                        <dg-sync-with-hubspot [showDialog]="showDialog" (resetDialog)="hideDialog($event)"></dg-sync-with-hubspot>

                                        <p-dialog header="Header" [(visible)]="showDialogForListName" [modal]="true" [style]="{width: '25vw'}">
                                            <ng-template pTemplate="header">
                                                <span class="text-xl font-bold">Required List Name</span>
                                            </ng-template>
                                            <!-- <p>{{ importCompanyCounts + ' company imported successfully and ' + importCompanyCounts + ' limit will be deducted.' }}</p> -->
                                            <label htmlFor="username">Enter your list name</label>
                                            <input pInputText id="username" aria-describedby="username-help" class="p-inputtext" [(ngModel)]="listNameForHubSpot" />
                                            <ng-template pTemplate="footer">
                                                <p-button (click)="pushCompaniesToHubSpot()" label="Create" [disabled]="!listNameForHubSpot"></p-button>
                                            </ng-template>
                                        </p-dialog>
                                        
                                        <!-- <button pButton type="button" class="ui-salesforce-btn p-button-rounded mr-2 p-button-sm hideBlockForMobileView" label="Push To Salesforce" (click)="syncSalesforce()" [disabled]="!authGuardService.isLoggedin()">
                                            <img src="../../assets/utilities/images/salesforceLogo/white_favicon.png" width="24px">
                                        </button> -->
                                        
                                        <!-- <ng-container *ngIf="authGuardService.isLoggedin()">
                                            <button pButton type="button" icon="ui-icon-compare" label="Compare" class="p-button-rounded p-button-sm mx-2" (click)="compareDeatails(companyData)"></button>
                                        </ng-container> -->
                                        
                                        
                                        <!-- <dg-epc *ngIf="userRoleAndFeatureAuthService.isAdmin()" [selectedCompany]="companyData.companyRegistrationNumber" [thisPage]="'company'"></dg-epc> -->
                                        
                                    <!-- </div> -->
                                        
                                    <p-splitButton label="More" [model]="moreButtonListItems" styleClass="p-button-rounded" [disabled]="selectedGlobalCountry !== 'uk'"></p-splitButton>

                                    <p-splitButton *ngIf="isLoggedIn" label="Report" [model]="reportButtonItems" styleClass="p-button-rounded ml-2" [disabled]="selectedGlobalCountry !== 'uk'"></p-splitButton>

                                </div>

                            </div>
                
                        </div>
                        
                    </div>
                
                    <!-- Top Header End -->
                    
                    <!-- Tabs Here Start -->
                    <div class="tabMenuContainer mb-3">
                        
                        <p-menubar [model]="mainMenuTabItems" class="mainTabMenuBar"></p-menubar>
                        <p-menubar [model]="subMenuTabItems" class="tabSubMenuBar"></p-menubar>
    
                    </div>
                    <!-- Tabs Here End -->
                
                </div>
            </div>
        </div>
    </ng-container>

</ng-container>

<div [class.grid]="companyData">
    <div [class.col-12]="companyData">
        <ng-container #TabComponentViewContainer></ng-container>
    </div>
</div>

<!-- View Notice Identifier Modal Box Start -->

<p-dialog header="{{ (noticeIndentifierSummaryData?.notice_identifier) | uppercase }}" [draggable]="false" [modal]="true"
	[(visible)]="viewNoticeIndentifierModal" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false"
	[style]="{ width: '75vw', 'overflow-y': 'auto' }" [maximizable]="true">

	<div class="grid">

		<div class="col-12 divider">

			<ng-container *ngIf="noticeIndentifierSummaryData?.buyer_name && ( noticeIndentifierSummaryData?.organisationReg || noticeIndentifierSummaryData?.customOrganisationReg )">

				<ng-container *ngIf="noticeIndentifierSummaryData?.buyer_name && noticeIndentifierSummaryData?.organisationReg; else customCmpNo">
					<span class="x-big-data-font">
						<a class="cName" target="_blank"
							[href]="'/company/' + noticeIndentifierSummaryData?.organisationReg + '/' + formatCompanyNameForUrl(noticeIndentifierSummaryData?.buyer_name | titlecase) + '?businessType=viewGovernmentEnablerBuyer'">{{ noticeIndentifierSummaryData?.buyer_name | uppercase }}
						</a>
					</span>
				</ng-container>

				<ng-template #customCmpNo>
					<span class="x-big-data-font">
						<a class="cName" target="_blank"
							[href]="'/company/' + noticeIndentifierSummaryData?.customOrganisationReg + '/' + formatCompanyNameForUrl(noticeIndentifierSummaryData?.buyer_name | titlecase) + '?companyType=isBuyer'">{{ noticeIndentifierSummaryData?.buyer_name | uppercase }}
						</a>
					</span>
				</ng-template>

			</ng-container>

			<ng-container *ngIf="noticeIndentifierSummaryData?.buyer_name && noticeIndentifierSummaryData?.organisationReg; else noUKCompanies">

				<span class="x-big-data-font">
					<a class="cName" target="_blank"
						[href]="'/company/' + noticeIndentifierSummaryData?.organisationReg + '/' + formatCompanyNameForUrl(noticeIndentifierSummaryData?.buyer_name | titlecase) + '?businessType=viewGovernmentEnablerBuyer'">( {{
						noticeIndentifierSummaryData?.organisationReg | uppercase }} )
					</a>
				</span>
			</ng-container>
			<ng-template #noUKCompanies>
				<span class="x-big-data-font">
					<a class="cName" target="_blank"
						[href]="'/company/' + noticeIndentifierSummaryData?.customOrganisationReg + '/' + formatCompanyNameForUrl(noticeIndentifierSummaryData?.buyer_name | titlecase) + '?companyType=isBuyer'">( {{
						noticeIndentifierSummaryData?.customOrganisationReg | uppercase }} )
					</a>
				</span>
			</ng-template>

		</div>

	</div>

	<div class="grid align-items-center mb-2 mt-5">
		<div class="col-fixed">
			<span class="x-big-data-font c-darkBlue">Contract Details</span>
		</div>
	</div>

    <p-timeline [value]="dateTimelineView" layout="horizontal" align="top" styleClass="timeLineStyle">
        <ng-template pTemplate="content" let-event>
			<div class="fs-medium fw-500">
				{{ (event.date && event.date != null && event.date != '') ? event.date : '-' }}
			</div>
			{{ event.status }}
        </ng-template>
    </p-timeline>

	<div class="grid">

		<div class="col-12 md:col-6 lg:col-6">

			<div class="card h-full widget-topsearchs hideOverflowX">

				<div *ngIf="noticeIndentifierSummaryData?.cpv_codes.length > 0" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Industry:</span>
					</div>
                    
					<div class="col-8 pb-0">
						<ng-container *ngFor="let item of noticeIndentifierSummaryData?.cpv_codes">
							{{ item.code }} - {{ item.desc | titlecase }}
						</ng-container>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.status" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Status:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.status | titlecase }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.title" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Title:</span>
					</div>
					<div class="col-8 pb-0">
						<div #descriptionTextContainer class="limitTextHeight">{{ noticeIndentifierSummaryData?.title | titlecase }}</div>
						<a type="button" *ngIf="noticeIndentifierSummaryData?.title && noticeIndentifierSummaryData?.title.length > 50"
							href="javascript:void(0);" class="small-data-font c-green"
							(click)="showText( descriptionTextContainer )">Read More
						</a>
					</div>
				</div>


				<div *ngIf="noticeIndentifierSummaryData?.region" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Location:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.region | titlecase }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.awarded_value" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Value:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.awarded_value | currency: selectedGlobalCurrency : 'symbol' : '1.0-0' }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.ojeu_contract_type" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Contract Type:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.ojeu_contract_type | titlecase }}</span>
					</div>
				</div>

			</div>
		</div>

		<div class="col-12 md:col-6 lg:col-6">
			<div class="card h-full widget-topsearchs hideOverflowX">

				<div *ngIf="noticeIndentifierSummaryData?.description" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Description:</span>
					</div>
					<div class="col-8 pb-0">
						<div #descriptionTextContainer class="limitTextHeight">{{ noticeIndentifierSummaryData?.description | titlecase }}</div>
						<a type="button" *ngIf="noticeIndentifierSummaryData?.description && noticeIndentifierSummaryData?.description.length > 80"
							href="javascript:void(0);" class="small-data-font c-green"
							(click)="showText( descriptionTextContainer )">Read More
						</a>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.suitable_for_SME" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Suitable For SME:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.suitable_for_SME | titlecase }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.suitable_for_VCO" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Suitable For VCO:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.suitable_for_VCO | titlecase }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.is_sub_contract" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Is Sub Contract:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.is_sub_contract | titlecase }}</span>
					</div>
				</div>
                
				<div *ngIf="noticeIndentifierSummaryData?.value_high" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> High Value:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.value_high | currency: selectedGlobalCurrency : 'symbol' : '1.0-0' }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.postcode" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Postcode:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.postcode | uppercase }}</span>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div class="grid align-items-center mb-2 mt-5">
		<div class="col-fixed">
			<span class="x-big-data-font c-darkBlue">Contact Details</span>
		</div>
	</div>

	<div class="grid">

		<div class="col-12 md:col-6 lg:col-6">
			<div class="card h-full widget-topsearchs hideOverflowX">

				<div *ngIf="noticeIndentifierSummaryData?.contact_name" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Contact Name:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.contact_name | titlecase }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.contact_address_1 || noticeIndentifierSummaryData?.contact_address_2 || noticeIndentifierSummaryData?.contact_town || noticeIndentifierSummaryData?.contact_postcode  || noticeIndentifierSummaryData?.contact_country" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Address:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.contact_address_1 | titlecase }} {{ noticeIndentifierSummaryData?.contact_address_2 | titlecase }} {{ noticeIndentifierSummaryData?.contact_town | titlecase }} {{ noticeIndentifierSummaryData?.contact_postcode | uppercase }} {{ noticeIndentifierSummaryData?.contact_country | titlecase}}</span>
					</div>
				</div>

			</div>
		</div>

		<div class="col-12 md:col-6 lg:col-6">

			<div class="card h-full widget-topsearchs hideOverflowX">

				<div *ngIf="noticeIndentifierSummaryData?.contact_email" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Contact Email:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.contact_email }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.contact_website" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Contact Website:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.contact_website }}</span>
					</div>
				</div>

				<div *ngIf="noticeIndentifierSummaryData?.contact_telephone" class="grid item">
					<div class="col-4 pb-0">
						<span class="material-icons headerIconStyle">info</span>
						<span class="c-grey font-bold"> Contact Telephone:</span>
					</div>
					<div class="col-8 pb-0">
						<span>{{ noticeIndentifierSummaryData?.contact_telephone }}</span>
					</div>
				</div>

			</div>
		</div>
	</div>

	<ng-container *ngIf="contractFinderSuppliersDataValues && contractFinderSuppliersDataValues.length > 0">
		<div class="grid">
			<div class="col-12">
				<p-accordion>
					<p-accordionTab header="Suppliers" [selected]="true">
						<dg-user-list [listDataValues]="contractFinderSuppliersDataValues" [listColumns]="contractFinderSupplierColumns" [listPage]="true" [thisPage]="'showSuppliersInNoticeIdentifier'"></dg-user-list>
					</p-accordionTab>
				</p-accordion>
			</div>
		</div>
	</ng-container>

</p-dialog>

<!-- View Notice Identifier Modal Box Ends -->

<ng-container *ngIf="companyNotExists">

    <ng-container *ngIf="isBuyerScreen == true; else forSupplierScreen">
        
        <div class="card companyDetailsHeaderCard">

            <div class="grid align-items-center">
                
                <div class="col">
                    <div class="grid">
    
                        <div class="col-fixed hidden md:block">
                            <span class="companyLogo">
                                <i class="material-icons defaultCompanyLogo">business</i>
                            </span>
                        </div>
    
                        <div class="col">
                    
                            <div class="grid align-items-center">
                                
                                <div class="col-fixed">
                                    <h1 class="cardHeaderTitle my-1">
                                        <span class="text-cyan-700"><strong>{{ buyerDetails?.buyerName | uppercase }} </strong></span>
                                    </h1>
                                </div>
    
                            </div>
            
                            <div class="grid mt-1 md:mt-0">
                                
                                <div class="col-fixed pb-0 xl:mr-4">
                                    <div class="companyDetailsLabel">Company Number</div>
                                    <div class="companyDetailsInfoText">{{ companyNumberForBuyerAndSupplier | uppercase }}</div>
                                </div>
    
                                <div class="col pb-0 xl:mr-4">
                                    <div class="companyDetailsLabel">Published contracts in current financial year :</div>
                                    <div class="companyDetailsInfoText">
                                        <span class="small-data-font ml-1">{{ buyerDetails?.['contractsInCurrentYear'] }}</span>
                                    </div>
                                </div>

                                <div class="col pb-0 xl:mr-4">
                                    <div class="companyDetailsLabel">Published Procurement Value : </div>
                                    <div class="companyDetailsInfoText">
                                        <span class="small-data-font ml-1">{{ ( buyerDetails?.totalAwardedValue ) ? toNumberSuffix.transform( buyerDetails?.totalAwardedValue, '2', selectedGlobalCurrency ) : 0 }}</span>
                                    </div>
                                </div>
    
                                <div class="col pb-0 xl:mr-4">
                                    <div class="companyDetailsLabel">Total Suppliers : </div>
                                    <div class="companyDetailsInfoText">{{ buyerDetails?.totalSuppliers | number: '1.0-0' }}</div>
                                </div>

                                <div class="col pb-0 xl:mr-4">
                                    <div class="companyDetailsLabel">Contracts Awarded :</div>
                                    <div class="companyDetailsInfoText">{{ buyerDetails?.contractsAwarded | number: '1.0-0' }}</div>
                                </div>
    
                            </div>
    
                        </div>
                        
                    </div>
                </div>
    
            </div>
        </div>
    
        <p-tabView>
    
            <p-tabPanel header="Supplier" *ngIf="supplierTabBoolean">

                <!-- <div class="grid">
                    <div class="col-fixed col-12 md:col-4 lg:col-4">
                        <div class="card">
                            <div class="grid">
                                <div class="col-6 text-center">
                                    <div class="supplierIconStyle business">
                                        <span class="material-icons iconContract">business</span>
                                    </div>
                                </div> 
                                <div class="col-6 text-center mt-4">
                                    <div>                               
                                        <h6>Contracts Won</h6>                                
                                    </div>
                                    <div>
                                        <span class="heading">{{ supplierDetails?.total_contract_won }}</span>
                                    </div>                    
                                </div>                       
                            </div>                    
                        </div>
                        <div class="card">
                            <div class="grid">
                                <div class="col-6 text-center">
                                    <div class="supplierIconStyle emoji_events">
                                        <span class="material-icons iconAward">emoji_events</span>
                                    </div>
                                </div>
                                <div class="col-6 text-center mt-4">
                                    <div>
                                        <h6>Total Award Value</h6>
                                    </div>
                                    <div>
                                        <span class="heading">{{ toNumberSuffix.transform( supplierDetails?.total_contracts_served_value, '0', selectedGlobalCurrency ) }}</span>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="col-fixed col-12 md:col-4 lg:col-4 pr-0">
                        <div class="card">
                            <p-chart type="bar" [data]="barData" [options]="barOptions" height="278px" [responsive]="true"></p-chart>
                        </div>
                    </div>
                    <div class="col-fixed col-12 md:col-4 lg:col-4 pr-0">
                        <div class="card">
                            <p-chart type="line" [data]="lineData" [options]="lineOptions" height="278px" [responsive]="true"></p-chart>
                        </div>
                    </div>
                </div> -->

                <div class="grid">
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE</h3>			
                            <p-chart type="bar" [data]="rightBarChartData" [options]="rightBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                        </div>
                    </div>
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT TYPE</h3>
                            <p-chart type="bar" [data]="contractBarChartValData" [options]="contractBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                        </div>
                    </div>
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE STATUS</h3>
                                <dg-shared-echart [dataForGraph]="dataForSupplierGraph" [donutChartHeight]="'height: 200px'" [thisPage]="'buyerNonREGScreen'"></dg-shared-echart>
                        </div>
                    </div>   
                </div>

                <dg-user-list [listColumns]="isSupplierNonREGScreenDataColumns" [listDataValues]="isSupplierNonREGScreenDataValue" [thisPage]="'isSupplierNonREGScreen'" (getNoticeIndentifierData)="getNoticeIndentifierData($event)"></dg-user-list>
            </p-tabPanel>
    
            <p-tabPanel header="Buyer">
            
                <div class="grid">
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE</h3>			
                            <p-chart type="bar" [data]="rightBarChartData" [options]="rightBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                        </div>
                    </div>
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT TYPE</h3>
                            <p-chart type="bar" [data]="contractBarChartValData" [options]="contractBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                        </div>
                    </div>
                    <div class="col-12 md:col-6 lg:col-4">
                        <div class="card">
                            <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE STATUS</h3>
                                <dg-shared-echart [dataForGraph]="dataForGraph" [donutChartHeight]="'height: 200px'" [thisPage]="'buyerNonREGScreen'"></dg-shared-echart>
                        </div>
                    </div>            
                </div>
            
                <dg-user-list [listColumns]="isBuyerNonREGScreenDataColumns" [listDataValues]="isBuyerNonREGScreenDataValue" [thisPage]="'isBuyerNonREGScreen'" (getNoticeIndentifierData)="getNoticeIndentifierData($event)"></dg-user-list>
            </p-tabPanel>
    
        </p-tabView>
    
    
    </ng-container>
    <ng-template #forSupplierScreen>
    
        <ng-container *ngIf="isSupplierScreen == true">
    
            <div class="card companyDetailsHeaderCard">
        
                <div class="grid align-items-center">
                    
                    <div class="col">
                        <div class="grid">
        
                            <div class="col-fixed hidden md:block">
                                <span class="companyLogo">
                                    <i class="material-icons defaultCompanyLogo">business</i>
                                </span>
                            </div>
        
                            <div class="col">
                        
                                <div class="grid align-items-center">
                                    
                                    <div class="col-fixed">
                                        <h1 class="cardHeaderTitle my-1">
                                            <span><strong>{{ this._activatedRoute.params._value.companyName | uppercase }} </strong></span>
                                        </h1>
                                    </div>
        
                                </div>
                
                                <div class="grid mt-1 md:mt-0">
                                    
                                    <div class="col-fixed pb-0 xl:mr-4">
                                        <div class="companyDetailsLabel">COMPANY NUMBER</div>

                                        <a class="cName" [href]="'/company/' + companyNumberForBuyerAndSupplier + '/' + formatCompanyNameForUrl(this._activatedRoute.params._value.companyName | titlecase)" target="_blank" >
                                            {{ companyNumberForBuyerAndSupplier | uppercase }}
                                        </a>
                                    </div>
        
                                    <!-- <div class="col-fixed pb-0 xl:mr-4">
                                        <div class="companyDetailsLabel">Address</div>
                                        <div class="companyDetailsInfoText">
                                            <ng-container *ngIf="supplierDetails?.supplier_address; else showNoDataBlock">
                                                <span class="small-data-font ml-1">{{ supplierDetails?.supplier_address | titlecase }}</span>
                                            </ng-container>
                                        </div>
                                    </div> -->
        
                                    <div class="col-fixed pb-0 xl:mr-4">
                                        <div class="companyDetailsLabel">CONTRACTS SECURED</div>
                                        <div class="companyDetailsInfoText">
                                            <!-- <ng-container *ngIf="supplierDetails?.total_contract_won && supplierDetails?.total_contract_won != null; else showNoDataBlock">
                                                <span class="small-data-font ml-1">{{ supplierDetails?.total_contract_won | number: '1.0-0' }}</span>
                                            </ng-container> -->

                                            <ng-container *ngIf="supplierData.contractsSecured; else showNoDataBlock">
                                                <span class="small-data-font ml-1">{{ supplierDetails?.contractsSecured | number: '1.0-0' }}</span>
                                            </ng-container>
                                        </div>
                                    </div>
        
                                    <div class="col-fixed pb-0 xl:mr-4">
                                        <div class="companyDetailsLabel">TOTAL AWARDED VALUE</div>
                                        <div class="companyDetailsInfoText">
                                            <!-- <ng-container *ngIf="supplierDetails?.total_contracts_served_value && supplierDetails?.total_contracts_served_value != null; else showNoDataBlock">
                                                <span class="small-data-font ml-1">{{ toNumberSuffix.transform( supplierDetails?.total_contracts_served_value , '0', selectedGlobalCurrency ) }}</span>
                                            </ng-container> -->

                                            <ng-container *ngIf="supplierData?.totalAwardedValue; else showNoDataBlock">
                                                <span class="small-data-font ml-1">{{  supplierData?.totalAwardedValue  }}</span>
                                            </ng-container>
                                        </div>
                                    </div>
        
                                </div>
        
                            </div>
                            
                        </div>
                    </div>
        
                </div>
            </div>
    
            <p-tabView>

                <p-tabPanel header="Supplier" *ngIf="supplierTabBoolean">

                    <!-- <div class="grid">
                        <div class="col-fixed col-12 md:col-4 lg:col-4">
                            <div class="card">
                                <div class="grid">
                                    <div class="col-6 text-center">
                                        <div class="supplierIconStyle business">
                                            <span class="material-icons iconContract">business</span>
                                        </div>
                                    </div> 
                                    <div class="col-6 text-center mt-4">
                                        <div>                               
                                            <h6>Contracts Won</h6>                                
                                        </div>
                                        <div>
                                            <span class="heading">{{ supplierDetails?.total_contract_won }}</span>
                                        </div>                    
                                    </div>                       
                                </div>                    
                            </div>
                            <div class="card">
                                <div class="grid">
                                    <div class="col-6 text-center">
                                        <div class="supplierIconStyle emoji_events">
                                            <span class="material-icons iconAward">emoji_events</span>
                                        </div>
                                    </div>
                                    <div class="col-6 text-center mt-4">
                                        <div>
                                            <h6>Total Award Value</h6>
                                        </div>
                                        <div>
                                            <span class="heading">{{ toNumberSuffix.transform( ( supplierDetails?.total_contracts_served_value ), '0', selectedGlobalCurrency ) }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="col-fixed col-12 md:col-4 lg:col-4 pr-0">
                            <div class="card">
                                <p-chart type="bar" [data]="barData" [options]="barOptions" height="278px" [responsive]="true"></p-chart>
                            </div>
                        </div>
                        <div class="col-fixed col-12 md:col-4 lg:col-4 pr-0">
                            <div class="card">
                                <p-chart type="line" [data]="lineData" [options]="lineOptions" height="278px" [responsive]="true"></p-chart>
                            </div>
                        </div>
                    </div> -->

                    <div class="grid">
                        <div class="col-12 md:col-6 lg:col-4">
                            <div class="card">
                                <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE</h3>			
                                <p-chart type="bar" [data]="rightBarChartData" [options]="rightBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                            </div>
                        </div>
                        <div class="col-12 md:col-6 lg:col-4">
                            <div class="card">
                                <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT TYPE</h3>
                                <p-chart type="bar" [data]="contractBarChartValData" [options]="contractBarChartOptions" [plugins]="ChartDataLabelsPlugins" responsive="true" height="200px"></p-chart>
                            </div>
                        </div>
                        <div class="col-12 md:col-6 lg:col-4">
                            <div class="card">
                                <h3 class="text-lg font-semibold text-primary-700">PROCUREMENT STAGE STATUS</h3>
                                    <dg-shared-echart [dataForGraph]="dataForSupplierGraph" [donutChartHeight]="'height: 200px'" [thisPage]="'buyerNonREGScreen'"></dg-shared-echart>
                            </div>
                        </div>    
                        <!-- <div class="col-12 md:col-6 lg:col-3">
                            <div class="card" style="height: 37vh;">
                                <dg-map-analysis [mapData]="{ region: mapDataVal }" mapId="'buyerNonREGScreen'"></dg-map-analysis>
                            </div>
                        </div> -->
                    </div>

                    <dg-user-list [listColumns]="isSupplierNonREGScreenDataColumns" [listDataValues]="isSupplierNonREGScreenDataValue" [thisPage]="'isSupplierNonREGScreen'" (getNoticeIndentifierData)="getNoticeIndentifierData($event)"></dg-user-list>
                </p-tabPanel>
        
                <p-tabPanel header="Buyer" *ngIf="buyerTabBoolean">
                
                    <div class="grid">
                
                        <div class="col-12 md:col-2 lg:col-2">
                            <div class="card overallScoringCard h-full">
                                <div class="grid">
                                    <div class="col-12 ">
                                        <div class="icon totalAwardValueIcon">
                                            <span class="material-icons mr-2">emoji_events</span>
                                        </div>
                                    </div>
                                    <div class="col margin">
                                        <h2>{{ toNumberSuffix.transform( buyerDetails?.total_contracts_published_value, '0', selectedGlobalCurrency ) }}
                                        </h2>
                                        <h5>Total Awarded</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <div class="col-12 md:col-4 lg:col-4">
                
                            <div class="card h-full">
                                <div class="card-header">
                                    <h5>Total Contract</h5>
                                    <h2 class="p-jc-end">{{buyerDetails?.total_contracts_published}}</h2>
                                </div>
                                <div class="card-body">
                
                                    <div class="grid align-items-center">
                
                                        <div class="col-12 md:col-7 mt-4">
                                            <p-chart type="doughnut" [options]="overallDoughnutOptions" [data]="overallDoughnutData"
                                                responsive="true" height="240px"></p-chart>
                                        </div>
                
                                        <div class="col-12 md:col-5 mt-5">
                
                                            <div class="overallCarbonDetails">
                                                <h2 class="text-right">{{buyerDetails?.buyersContractAwardStatus?.awarded}}</h2>
                                                <h5 class="text-right">Awarded</h5>
                                            </div>
                
                                            <div class="overallCarbonDetails">
                                                <h2 class="text-right">{{buyerDetails?.buyersContractAwardStatus?.closed}}</h2>
                                                <h5 class="text-right">Closed</h5>
                                            </div>
                
                                            <div class="overallCarbonDetails">
                                                <h2 class="text-right">{{buyerDetails?.buyersContractAwardStatus?.open}}</h2>
                                                <h5 class="text-right">Open</h5>
                                            </div>
                
                                        </div>
                
                                    </div>
                
                                </div>
                            </div>
                
                        </div>
    
                        <div class="col-12 md:col-6 lg:col-6">
                            <div class="card h-full">
                                <p-chart type="bar" [data]="contractEndingTrendData" [options]="contractEndingTrendOptions" height="340px" [responsive]="true"></p-chart>
                            </div>
                        </div>
                
                    </div>
                
                    <dg-user-list [listColumns]="isBuyerNonREGScreenDataColumns" [listDataValues]="isBuyerNonREGScreenDataValue" [thisPage]="'isBuyerNonREGScreen'" (getNoticeIndentifierData)="getNoticeIndentifierData($event)"></dg-user-list>
                </p-tabPanel>
        
            </p-tabView>

        </ng-container>
    
    
    </ng-template>

</ng-container>

    
<ng-container *ngIf="companyNotExists && !(isBuyerScreen || isSupplierScreen)">
    
    <div class="card companyDetailsHeaderCard">

        <div class="grid align-items-center">

            <div class="col">

                <div class="grid align-items-center">

                    <!-- Compay Logo for mobile devices -->
                    <div class="col-fixed p-d-md-min">
                        <span class="companyLogo">
                            <i class="material-icons defaultCompanyLogo">business</i>
                        </span>
                    </div>

                    <div class="col-fixed">
                        <h1 class="cardHeaderTitle my-1">
                            <strong>{{ nonExistingCompany?.companyOriginalName | titlecase }}</strong>
                        </h1>
                    </div>

                </div>
                
                <div class="grid mt-1 md:mt-0">

                    <div class="col-12">
                        <div class="companyDetailsLabel">Company Number</div>
                        <div class="companyDetailsInfoText">{{ nonExistingCompany?.companyNumber | uppercase }}</div>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <div class="card companyDetailsHeaderCard p-p-3">
        <div class="companyDetailsInfoText c-red m-0"><em>This is a non UK company. We do not have further information on that at the moment.</em></div>
    </div>

</ng-container>

<!-- Loader Skeleton Section Start -->
<div class="card" *ngIf="!companyData && !(isBuyerScreen || isSupplierScreen)">
    <div class="custom-skeleton p-p-4">
        <div class="flex flex-wrap mb-3">
            <p-skeleton width="8rem" height="8rem" styleClass="mr-4"></p-skeleton>
            <div class="mt-1">
                <p-skeleton width="40rem" height="1.5rem" styleClass="mb-3"></p-skeleton>
                <div class="flex flex-wrap">
                    <p-skeleton width="15rem" styleClass="mr-3 mb-3"></p-skeleton>
                    <p-skeleton width="10rem" styleClass="mr-3 mb-3"></p-skeleton>
                    <p-skeleton width="15rem" styleClass="mr-3 mb-3"></p-skeleton>
                    <p-skeleton width="10rem" styleClass="mr-3 mb-3"></p-skeleton>
                    <p-skeleton width="20rem" styleClass="mr-3 mb-3"></p-skeleton>
                </div>
                <p-skeleton width="60rem" height=".5rem"></p-skeleton>
            </div>
        </div>
        <div class="flex flex-wrap mt-5">
            <p-skeleton width="6rem" height="2rem" styleClass="mr-3 mb-3"></p-skeleton>
            <p-skeleton width="6rem" height="2rem" styleClass="mr-3 mb-3"></p-skeleton>
            <p-skeleton width="6rem" height="2rem" styleClass="mr-3 mb-3"></p-skeleton>
            <p-skeleton width="6rem" height="2rem" styleClass="mr-3 mb-3"></p-skeleton>
            <p-skeleton width="6rem" height="2rem" styleClass="mr-3 mb-3"></p-skeleton>
        </div>
    </div>
</div>

<ng-template #showNoDataBlock>
    <span class="c-light">
        Not Provided
    </span>
</ng-template>
<!-- Loader Skeleton Section End -->