<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" [key]="thisPage"></p-confirmDialog>
<p-messages [value]="msgs"></p-messages>

<p-dialog header="Info" [(visible)]="infoDialogModal" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '35vw'}" [draggable]="false" [focusOnShow]="false">
    <div class="text-center">
        <p>We do not have data for foreign companies.</p>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline blue-grey-btn" (click)="infoDialogModal=false" label="Close"></button>
        </div>
    </p-footer>
</p-dialog>

<!-- Login Modal Dialog -->
<p-dialog styleClass="loginDialogModal" [modal]="true" [(visible)]="showLoginDialog" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false">
    <dg-login></dg-login>
</p-dialog>
<!-- Login Modal Dialog End -->

<!-- Upgrade Plan Dialog -->
<p-dialog styleClass="subscriptionPlanDialogModal" [modal]="true" [(visible)]="showUpgradePlanDialog" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false" [style]="{width: '60vw'}">
    <dg-upgrade-plan [currentPlan]="userDetails?.planId" [componentView]="'inModal'"></dg-upgrade-plan>
</p-dialog>
<!-- Upgrade Plan Dialog End -->

 <!-- Director Update Dialog Box Starts here -->
 <span addOnAccess="contactInformation">
     <p-dialog  header="Update Info" [(visible)]="showOrHideDirectorContactInfoModal" [modal]="true" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false" [draggable]="false" styleClass="dialog" [style]="{'max-width': 'max-content'}">
        <form>
            <div class="flex flex-column justify-conten-center align-items-center pt-0">
                <div class="col-12">
                    <div class="p-inputgroup xyz mb-3">
                        <span class="p-inputgroup-addon iconcolor"><i class="material-icons">mail</i></span>
                        <input class="inputarea" type="text" pInputText placeholder="Email" [(ngModel)]="directorDataInfoObj.directorEmail" [ngModelOptions]="{standalone: true}">
                    </div>
                    <!-- <div class="p-inputgroup xyz mb-3">
                        <span class="p-inputgroup-addon iconcolor"><i class="material-icons">link</i></span>
                        <input class="inputarea" type="text" pInputText placeholder="Job Title" [(ngModel)]="directorDataInfoObj.directorJobTitle" [ngModelOptions]="{standalone: true}">
                    </div>
                    <div class="p-inputgroup xyz mb-3">
                        <span class="p-inputgroup-addon iconcolor"><i class="material-icons">local_phone</i></span>
                        <input class="inputarea" type="text" pInputText placeholder="Contact Number" [(ngModel)]="directorDataInfoObj.directorTelephone" [ngModelOptions]="{standalone: true}">
                    </div> -->
                    <div class="p-inputgroup xyz mb-1">
                        <span class="p-inputgroup-addon iconcolor" style="width: 43px"><i class="pi pi-linkedin"></i></span>
                        <input class="inputarea" type="text" pInputText placeholder="LinkedIn Profile" [(ngModel)]="directorDataInfoObj.directorLinkedin" [ngModelOptions]="{standalone: true}">
                    </div>
                </div>
            </div>

            <div class="text-center mt-3 mt-md-4">
                <button style="width:290px" pButton type="button" label="Submit" class="p-button-rounded" (click)="onDirectorUpdateInformation()"></button>
            </div>
        </form>
    </p-dialog>
</span>

<ng-container *ngIf="nonExistingCompany.companyNotExists">
    
    <div class="card companyDetailsHeaderCard">

        <div class="grid">

            <!-- Compay Logo for Desktop -->
            <div class="col-fixed d-md-none">
                
                <span class="companyLogo">
                    <i class="material-icons defaultCompanyLogo">business</i>
                </span>

            </div>

            <div class="col">

                <div class="grid align-items-center">

                    <!-- Compay Logo for mobile devices -->
                    <div class="col-fixed d-md-min">
                        <span class="companyLogo">
                            <i class="material-icons defaultCompanyLogo">business</i>
                        </span>
                    </div>

                    <div class="col-fixed">
                        <h1 class="cardHeaderTitle my-1">
                            <strong>{{ nonExistingCompany?.companyOriginalName | titlecase }}</strong>
                        </h1>
                    </div>

                </div>
                
                <div class="grid mt-1">

                    <div class="col-12">
                        <div class="companyDetailsLabel">Company Number</div>
                        <div class="companyDetailsInfoText">{{ nonExistingCompany?.companyNumber | uppercase }}</div>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <div class="card companyDetailsHeaderCard p-3">
        <div class="companyDetailsInfoText c-red m-0"><em>This is a non UK company. We do not have further information on that at the moment.</em></div>
    </div>

</ng-container>

<div class="responsiveWhiteOuterCard" *ngIf="thisPage == 'company' && !(nonExistingCompany.companyNotExists)">

    <ng-container *ngIf="thisPage == 'company' && !(nonExistingCompany.companyNotExists)">

        <div class="card companyDetailsHeaderCard">

            <a [href]="'/company/' + companyDetails?.companyRegistrationNumber+ '/' + formatCompanyNameForUrl(companyDetails?.businessName | titlecase)" target="_blank" class="fullscreenViewBtn fullscreenViewBtnDgExtn" title="View in fullscreen">
                <button pButton type="button" label="Full Preview" icon="pi pi-window-maximize" class="p-button-rounded" title="View in Full Screen"></button> 
            </a>

            <div class="grid">

                <!-- Compay Logo for Desktop -->
                <div class="col-fixed md-none">
                    
                    <span class="companyLogo">
                        <img *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.logo && companyDetails?.companyContactInformation[0]?.logo !== ' ' && companyDetails?.companyContactInformation[0]?.logo !== '0' ; else defaultLogo" src="{{ companyDetails?.companyContactInformation[0]?.logo }}" alt="Company Logo" />

                        <a href="javascript:void(0);" *ngIf="!favouriteListStatus" (click)="addToFavouriteList()" class="pi pi-star-o addToFavouriteListBtn" title="Add To Favourites"></a>
                        <a href="javascript:void(0);" *ngIf="favouriteListStatus" (click)="removeFromFavouriteList()" class="pi pi-star addToFavouriteListBtn active" title="Remove From Favourites"></a>
                    </span>
    
                </div>

                <ng-template #defaultLogo>
                    <i class="material-icons defaultCompanyLogo">business</i>
                </ng-template>

                <div class="col">

                    <div class="grid align-items-center">
    
                        <!-- Compay Logo for mobile devices -->
                        <div class="col-fixed d-md-min">
                            <span class="companyLogo">
                                <img *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.logo && companyDetails?.companyContactInformation[0]?.logo !== ' ' && companyDetails?.companyContactInformation[0]?.logo !== '0' ; else defaultLogo" src="{{ companyDetails?.companyContactInformation[0]?.logo }}" alt="Company Logo" />

                                <a href="javascript:void(0);" *ngIf="!favouriteListStatus" (click)="addToFavouriteList()" class="pi pi-star-o addToFavouriteListBtn" title="Add To Favourites"></a>
                                <a href="javascript:void(0);" *ngIf="favouriteListStatus" (click)="removeFromFavouriteList()" class="pi pi-star addToFavouriteListBtn active" title="Remove From Favourites"></a>
                            </span>
                        </div>

                        <div class="col-fixed">
                            <h1 class="cardHeaderTitle my-1">
                                <strong>{{ companyDetails?.businessName | titlecase }}</strong>
                            </h1>
                        </div>

                        <div class="col-fixed">
                           
                            <ng-container *ngIf="companyDetails?.companyStatus">
                                <span [ngClass]="{ 'green':  companyDetails?.companyStatus == 'live' || companyDetails?.companyStatus == 'administration order', 'c-orange':  companyDetails?.companyStatus == 'in liquidation' || companyDetails?.companyStatus == 'removed', 'c-red': companyDetails?.companyStatus == 'converted/closed' || companyDetails?.companyStatus == 'dissolved' || companyDetails?.companyStatus == 'in administration' || companyDetails?.companyStatus == 'in receivership / administration' ||  companyDetails?.companyStatus == 'voluntary arrangement' || companyDetails?.companyStatus == 'in receivership' || companyData?.companyStatus == 'deleted'}" class="status">{{ companyDetails?.companyStatus | titlecase }}</span>
                            </ng-container>
                        </div>
                    </div>

                    <div class="grid mt-1 mt-0">

                        <div class="col-fixed pb-0 pr-md-5 mr-xxl-4">
                            <div class="companyDetailsLabel">Company Number</div>
                            <div class="companyDetailsInfoText">{{ companyDetails?.companyRegistrationNumber | uppercase }}</div>
                        </div>
                        
                        <div class="col-fixed pb-0 pr-md-5 mr-xxl-4">
                            <div class="companyDetailsLabel">Category</div>
                            <div class="companyDetailsInfoText">{{ companyDetails?.companyType | titlecase }}</div>
                        </div>
                        
                        <div class="col-fixed pb-0 pr-md-5 mr-xxl-4">
                            <div class="companyDetailsLabel">Incorporated on</div>
                            <div class="companyDetailsInfoText">
                                {{ formatDate(companyDetails?.companyRegistrationDate) }}
                                <span class="small-data-font ml-1"><strong>({{ calculateAge(companyDetails?.companyRegistrationDate) }} Years Old)</strong></span>
                            </div>
                        </div>
                        <div class="col-fixed pb-0 xl-4">
                            <div class="companyDetailsLabel">Sic Code</div>
                            <ng-container *ngIf="getSICCodeInArrayFormat( companyDetails.sicCode07 !== undefined && companyDetails.sicCode07 ).length; else noSicCode">
                                <div class="companyDetailsInfoText" *ngFor="let item of getSICCodeInArrayFormat( companyDetails?.sicCode07 )">{{ item | titlecase }}</div>
                            </ng-container>
                            <ng-template #noSicCode>Not Provided</ng-template>
                        </div>

                    </div>

                    <div class="mt-3" *ngIf="companyDetails?.accountsDueDate || disqualifiedDirectorsCount >= 0">
                        
                        <span class="roundedColoredChipLabel {{ calculateAccountOverduePeriod( companyDetails?.accountsDueDate ) ? 'c-red' : 'c-green' }}" *ngIf="companyDetails?.accountsDueDate"><strong><small>{{ calculateAccountOverduePeriod( companyDetails?.accountsDueDate ) ? 'Accounts Overdue: ' : 'Accounts Filing Due Date: ' }}</small></strong> {{ commonService.changeToDate( companyDetails?.accountsDueDate ) | date: 'dd-MM-yyyy' }}</span>
                        <span *ngIf="isLoggedIn" class="roundedColoredChipLabel" [ngClass]="{ 'c-red': disqualifiedDirectorsCount > 0 }"><strong><small>Disqualified Directors:</small></strong> {{ disqualifiedDirectorsCount }}</span>

                    </div>

                </div>

            </div>
            
            <div class="grid mt-2 mt-md-3">
                <div class="col-fixed py-0 mr-md-3">
                    <button pButton type="button" *ngIf="!watchListStatus" label="Monitor" icon="pi pi-eye" class="p-button-rounded" (click)="saveWatchList()"></button>
                    <button pButton type="button" *ngIf="watchListStatus" label="Monitor" icon="pi pi-eye-slash" class="p-button-rounded" (click)="removeFromWatchList()"></button>
                    <button pButton type="button" label="Notes" icon="ui-icon-note-add" class="p-button-rounded" (click)="showAddNoteModal(undefined)"></button>
                    
                    <dg-add-company-to-list [selectedCompany]="companyData.companyRegistrationNumber" [thisPage]="'company'" (messageCommunicator)="getMessage($event)"></dg-add-company-to-list>
                    <span addOnAccess="industryAnalysis">
                        <dg-add-company-to-list [selectedCompanyData]="companyData.companyRegistrationNumber" [thisPage]="'companyListOfIServiceCategoryPage'" (messageCommunicator)="getMessage($event)" class="ml-2"></dg-add-company-to-list>
                    </span>

                </div>
                <div class="col-fixed py-0 mr-md-3">
                    <dg-company-pdf-report [companyReportParams]="companyDetails" (messageCommunicator)="getMessage($event)"></dg-company-pdf-report>
                    <button pButton type="button" label="Share" icon="pi pi-share-alt" class="ui-button-inline ui-button-sm ml-2" (click)="showCompanyProfileShareOverlay(op, $event)"></button>
                </div>
                <div class="col-fixed py-0 ml-auto">
                    <button pButton type="button" class="ui-salesforce-btn p-button-rounded p-button-sm" label="Push To Salesforce" (click)="syncSalesforce()" [disabled]=true>
                        <img src="../../assets/utilities/images/salesforceLogo/white_favicon.png" width="24px">
                    </button>
                </div>
            </div>

        </div>

    </ng-container>

    <!-- Top header end -->

    <p-dialog header="Added Notes" [modal]="true" [(visible)]="showAddNoteModalBool" appendTo="body"
    (onHide)="cancelNotes()" [style]="{width: '40vw'} ">
        <p-editor [(ngModel)]="companyNoteValue" [style]="{'height': '320px'}"></p-editor>
        <div class="mt-3">
            <span class="ml-1"><button pButton type="button" [disabled]="!companyNoteValue" label="Submit" class="ui-button-inline"
                    (click)="addNotes()"></button></span>
            <span class="ml-1"><button pButton type="button" [disabled]="!companyNoteValue" label="Delete" class="ui-button-danger"
                    (click)="deleteNotes()"></button></span>
        </div>
    </p-dialog>
    <!-- Add Notes Dialog End -->

    <!-- Tab View Start -->
    <div class="tabsToggleButtonWrapper" (click)="toggleTabsView( $event, companyDetailsTabViewGroup )">
        <div class="selectedTabPlaceholder">{{ activeTabText }}</div>
        <button pButton type="button" icon="ui-icon-menu" class="transparent-btn"></button>
    </div>

    <ng-container *ngIf="showTabGroupAfterDelay">
    
        <p-tabView #companyDetailsTabViewGroup orientation="top" styleClass="companyDetailsTabViewContainer modifiedCompanyDetailsTabs" *ngIf="thisPage == 'company' && !(nonExistingCompany.companyNotExists)" (onChange)="setTabView($event)">
            
            <p-tabPanel header="Overview" [selected]="true">

                <p-tabView #overviewTabView orientation="top" (onChange)="setTabView($event)">

                    <p-tabPanel header="About" leftIcon="ui-icon-info" [selected]="true">
                        <div class="grid">
                            <div class="col-6 md-6">
                                    <div addOnAccess="riskFilter">
                                <!-- <ng-container *ngIf="userAuthService.hasAddOnPermission('riskFilter') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                                        <p-card *ngIf="companyDetails?.internationalScoreDescription" class="d-md-none">
                                            <div class="grid">
                                                <div class="col">
                                                    <span class="x-big-data-font c-darkBlue">Risk Assessment</span>
                                                </div>
                                                <div class="col-fixed text-right">
                                                    <span [ngClass]="{ 'c-red': companyDetails?.internationalScoreDescription == 'high risk ', 'c-orange': companyDetails?.internationalScoreDescription == 'moderate risk', 'green': companyDetails?.internationalScoreDescription == 'low risk' || companyDetails?.internationalScoreDescription == 'very low risk', 'c-light': companyDetails?.internationalScoreDescription == 'not scored' }"><strong class="highlightedMarkedValue x-big-data-font m-0">{{ companyDetails?.internationalScoreDescription | titlecase }}</strong></span>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                                <!-- </ng-container> -->
            
                                <p-card *ngIf="companyDetails?.hasFurloughData" class="d-md-none">
                                    <div class="grid">
                                        <div class="col">
                                            <span class="x-big-data-font c-darkBlue">Furlough</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2 mt-1 mt-md-3">
                                        <div class="col-fixed">
                                            <span class="heading-font ml-2 d-lg-none">Amount (&pound;) </span>
                                        </div>
                                        <div class="col">
                                            <span class="heading-font mr-2 min-lg-none">Amount</span>
                                            <span class="data-font">{{companyDetails?.amountBandsInPounds | titlecase}}</span>
                                        </div>
                                    </div>
                                </p-card>
                            
                                <p-card>
                                    <!-- <ng-container *ngIf="isLoggedIn; else showContactInfo">
                                        <ng-container *ngIf="userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation') || userAuthService.hasRolePermission( ['Super Admin'] ); else showContactInfo"> -->
                                            <span class="x-big-data-font c-darkBlue">
                                                <div ngClass="{'text-center': !isLoggedIn}">
                                                    Contact Information
                                                </div>
                                            </span>
                                        <div addOnAccess="contactInformation" [optionalTemplate]="true">
                                            <div class="grid">
                                                <div class="col">
                                                    <!-- <span class="x-big-data-font c-darkBlue">Contact Information</span> -->
                                                    <span class="col social-link text-right ml-em-2">
                                                        <a target="_blank" [href]="GoogleURLCompanyURLwithoutWordCompany(companyDetails.businessName)">
                                                            <img tooltip="Search on google"
                                                                src="https://img.icons8.com/color/48/000000/google-logo.png" id="google-image">
                                                        </a>
                                                        <a target="_blank" [href]="linkedinURLForCompany(companyDetails.businessName)">
                                                            <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                <path
                                                                    d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                            </svg>
                                                        </a>
                                                    </span>
                                                </div>
                                                <div class="col-fixed text-right d-md-none">
                                                    <button pButton type="button" label="Update" class="ui-button-inline ui-button-sm ui-button-rounded" icon="ui-icon-edit" iconPos="left" (click)="onUpdateInfo()"></button>
                                                </div>
                                            </div>
                    
                                            <div class="grid mb-2 mt-1 mt-md-3">
                                                <div class="col-fixed">
                                                    <i class="ui-icon-location-on"></i>
                                                    <span class="heading-font ml-2 d-lg-none">Address </span>
                                                </div>
                                                <div class="col">
                                                    <span class="heading-font mr-2 min-lg-none">Address </span>
                                                    <span class="data-font">{{ (companyDetails?.companyAddress!=null && companyDetails?.companyAddress!=undefined && companyDetails?.companyAddress!="" ? companyDetails?.companyAddress: "Not Provided")  }}</span>
                                                </div>
                                            </div>
                                            <div *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0].website; else creditSafeWebsite"
                                                class="grid mb-2">
                                                <div class="col-fixed">
                                                    <i class="ui-icon-language"></i>
                                                    <span class="heading-font ml-2 d-lg-none">Website </span>
                                                </div>
                                                <div class="col">
                                                    <span class="heading-font mr-2 min-lg-none">Website </span>
                                                    <span><strong><a target="_blank" href="http://www.{{formatWebsite(companyDetails?.companyContactInformation[0]?.website)}}">{{ (formatWebsite(companyDetails?.companyContactInformation[0]?.website)) }}</a></strong></span>
                                                </div>
                                            </div>
                                            <ng-template #creditSafeWebsite>
                                                <div *ngIf="companyDetails?.RegAddress_Modified?.website && companyDetails?.RegAddress_Modified?.website !== 'Null' && companyDetails?.RegAddress_Modified?.website !== 'NULL' "
                                                    class="grid mb-2">
                                                    <div class="col-fixed">
                                                        <i class="ui-icon-language"></i>
                                                        <span class="heading-font ml-2 d-lg-none">Website </span>
                                                    </div>
                                                    <div class="col">
                                                        <span class="heading-font mr-2 min-lg-none">Website </span>
                                                        <span><strong><a target="_blank" class="cName" href="http://www.{{formatWebsite(companyDetails?.RegAddress_Modified?.website)}}">{{ (formatWebsite(companyDetails?.RegAddress_Modified?.website)) }}</a></strong></span>
                                                    </div>
                                                </div>
                                            </ng-template>
                                            <div *ngIf="(companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.tel_1 ) || (companyDetails?.RegAddress_Modified?.telephone && companyDetails?.RegAddress_Modified?.telephone !== 'Null' && companyDetails?.RegAddress_Modified?.telephone !== 'NULL' ) ; else creditSafeTelephone" class="grid mb-2">
                                                <div class="col-fixed">
                                                    <i class="ui-icon-local-phone"></i>
                                                    <span class="heading-font ml-2 d-lg-none">Contact Number </span>
                                                    <span class="heading-font mr-2 min-lg-none">Contact Number </span>
                                                </div>
                                                <div class="col">
                                                    <div class="grid" *ngIf="(companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.tel_1)">
                                                        <div class="col">
                                                            <span class="data-font">{{companyDetails?.companyContactInformation[0]?.tel_1}} </span>
                                                            <span class="heading-font ml-2 d-lg-none">| CTPS Registered<sup>*</sup> </span>
                                                            <span class="heading-font mr-2 min-lg-none">| CTPS Registered<sup>*</sup> </span>
                                                            <span class="data-font"> </span>
                                                        </div>
                                                    </div>
                                                    <div class="grid">
                                                        <div class="col" *ngIf="companyDetails?.RegAddress_Modified?.telephone && companyDetails?.RegAddress_Modified?.telephone !== 'Null' && companyDetails?.RegAddress_Modified?.telephone !== 'NULL' ">
                                                            <span class="data-font">{{companyDetails?.RegAddress_Modified?.telephone}} </span> 
                                                            <span class="heading-font ml-2 d-lg-none">| CTPS Registered<sup>*</sup> </span>
                                                            <span class="heading-font mr-2 min-lg-none">| CTPS Registered<sup>*</sup> </span>
                                                            <span class="data-font status ml-2" [ngClass]="{ 'c-red': companyDetails?.RegAddress_Modified?.ctps == 'y', 'green': ( !companyDetails?.RegAddress_Modified?.ctps || companyDetails?.RegAddress_Modified?.ctps !== 'y') } " >{{ companyDetails?.RegAddress_Modified?.ctps === "y" ? " Yes" : companyDetails?.RegAddress_Modified?.ctps === "n" ? " No" : " "}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>                                            
                                            <div *ngIf="(companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.email_gen1 && companyDetails?.companyContactInformation[0]?.email_gen1!=='0' && companyDetails?.companyContactInformation[0]?.email_gen1!==' ' && companyDetails?.companyContactInformation[0]?.email_gen1!=='null') || (companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.email_gen2 && companyDetails?.companyContactInformation[0]?.email_gen2!=='0' && companyDetails?.companyContactInformation[0]?.email_gen2!==' ' && companyDetails?.companyContactInformation[0]?.email_gen2!=='null') && userAuthService.hasAddOnPermission('contactInformation')"
                                                class="grid mb-2">
                                                <div class="col-fixed" >
                                                    <i class="ui-icon-mail"></i>
                                                    <span class="heading-font ml-2 d-lg-none">Email </span>
                                                </div>
                                                <div class="col">
                                                    <span class="heading-font mr-2 min-lg-none">Email </span>
                                                    <a *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.email_gen1 && companyDetails?.companyContactInformation[0]?.email_gen1 !=='0' && companyDetails?.companyContactInformation[0]?.email_gen1 !==' ' && companyDetails?.companyContactInformation[0]?.email_gen1 !=='null'"
                                                        target="_top" href="mailto:{{ companyDetails?.companyContactInformation[0]?.email_gen1 }}">{{ companyDetails?.companyContactInformation[0]?.email_gen1 }}</a>
                                                    <a *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.email_gen2 && companyDetails?.companyContactInformation[0]?.email_gen2 !=='0' && companyDetails?.companyContactInformation[0]?.email_gen2 !==' ' && companyDetails?.companyContactInformation[0]?.email_gen2 !=='null'"
                                                        target="_top" href="mailto:{{ companyDetails?.companyContactInformation[0]?.email_gen2 }}">{{ companyDetails?.companyContactInformation[0]?.email_gen2 }}</a>
                                                </div>
                                            </div>
                                            <div class="grid mb-2">
                                                <div class="col-fixed">
                                                    <i class="ui-icon-people"></i>
                                                    <span class="heading-font ml-2 d-lg-none">No. of Employees</span>
                                                </div>
                                                <div class="col">
                                                    <span class="heading-font mr-2 min-lg-none">No. of Employees</span>
                                                    <span class="data-font">{{ (overviewNoOfEmployeesData !== 0 && companyData.hasFinances ? ( overviewNoOfEmployeesData | number: '1.0-2' ) : 'Not Provided') }}</span>
                                                </div>
                                            </div>
                                            <div class="grid mb-2">
                                                <div class="col social-link text-right d-md-none">
                                                    <a target="_blank" [href]="GoogleURLCompanyURLwithoutWordCompany(companyDetails.businessName)">
                                                        <img tooltip="Search on google"
                                                            src="https://img.icons8.com/color/48/000000/google-logo.png" id="google-image">
                                                    </a>                                    
                                                    <ng-container
                                                        *ngIf="companyDetails?.companyContactInformation && companyDetails?.companyContactInformation[0]?.linkedin_url && companyDetails?.companyContactInformation[0]?.linkedin_url !== '0' && companyDetails?.companyContactInformation[0]?.linkedin_url !== ' ' && companyDetails?.companyContactInformation[0]?.linkedin_url !== 'null'; else noLinkedinURL">
                                                        <a target="_blank" [href]="companyDetails.companyContactInformation[0].linkedin_url">
                                                            <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                <path
                                                                    d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                            </svg>
                                                        </a>
                                                    </ng-container>
                                                    <ng-template #noLinkedinURL>
                                                        <a target="_blank" [href]="linkedinURLForCompany(companyDetails.businessName)">
                                                            <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                <path
                                                                    d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                            </svg>
                                                        </a>
                                                    </ng-template>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- </ng-container>
                                    </ng-container> -->
                                    <!-- <ng-template #showContactInfo>
                                        <span class="x-big-data-font c-darkBlue">
                                            <div class="text-center">
                                                Contact Information
                                            </div>
                                        </span>
                                        <dg-upgrade-plan [currentPlan]="userDetails?.planId" *ngIf="isLoggedIn"></dg-upgrade-plan>
                                        <dg-without-login-modal *ngIf="!isLoggedIn"></dg-without-login-modal>
                                    </ng-template> -->
                                </p-card>
            
                                <p-card *ngIf="companyDetails?.DissolutionDate || companyDetails?.previousNames?.length > 0" class="d-md-none">
                                    <div *ngIf="companyDetails?.DissolutionDate" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Dissolved on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{formatDate(companyDetails?.DissolutionDate)}}</span><span
                                                class="small-data-font ml-2">({{calculateAge(companyDetails?.DissolutionDate)}} Years
                                                Ago)</span>
                                        </div>
                                    </div>
                                    <div *ngIf="companyDetails?.previousNames?.length > 0">
                                        
                                        <div class="grid">
                                            <div class="col-8 md-8">
                                                <span class="heading-font">Previously known as</span>
                                            </div>
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Changed on</span>
                                            </div>
                                        </div>
            
                                        <div class="grid" *ngFor="let item of companyDetails?.previousNames">
                                            <div class="col-8 md-8">
                                                <span class="data-font d-block">{{ item.name | titlecase }}</span>
                                            </div>
                                            <div class="col-4 md-4">
                                                <span class="data-font d-block">{{ parseDate(item.dateChanged) }}</span>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </p-card>
            
                                <p-card *ngIf="companyDetails?.hasCompanyCommentary">
                                    <!-- <ng-container *ngIf="isLoggedIn; else showWithoutLoginCommentaryModal"> -->
                                        <!-- <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Commentary' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCommentaryInfo"> -->
                                            <span class="x-big-data-font c-darkBlue">
                                                <div ngClass="{'text-center': isLoggedIn"}>
                                                    Commentary
                                                </div>
                                            </span>
                                            <!-- Static Company Commentary value -->
                                            <div class="commentry-timeline mt-2"  featureAccess="Commentary" [optionalTemplate]="true">
                                                <div *ngFor="let item of companyCommentryData; let i = index" class="col card-row" [ngClass]="{ 'bg-grey': i%2 == 0}">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <ng-container *ngIf="item.commentaryImpact == '+'">
                                                                <i class="ui-icon-arrow-upward c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="item.commentaryImpact == '-'">
                                                                <i class="ui-icon-arrow-downward c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="item.commentaryImpact == null">
                                                                <i class="ui-icon-arrow-forward c-orange"></i>
                                                            </ng-container>
                                                        </div>
                                                        <div class="col">
                                                            <div>
                                                                <span class="data-font" *ngIf="item.commentaryText !== null && item.commentaryText !== ''" [ngClass]="{ 'c-green': item.commentaryImpact == '+', 'c-red': item.commentaryImpact == '-', 'c-orange': item.commentaryImpact == null }">
                                                                    {{ item.commentaryText | titlecase}}
                                                                </span>
                                                            </div>
                                                            <span class="small-data-font mr-1 d-md-none" *ngIf="item.dateLogged !== null && item.dateLogged !== ''">Logged On: {{ formatDate(item.dateLogged) }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Static Company Commentary value -->
                                        <!-- </ng-container> -->
                                        <!-- <ng-template #showCommentaryInfo>
                                            <span class="x-big-data-font c-darkBlue">
                                                <div class="text-center">
                                                    Commentary
                                                </div>
                                            </span>
                                            <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                                        </ng-template> -->
                                    <!-- </ng-container> -->
                                    <!-- <ng-template #showWithoutLoginCommentaryModal>
                                        <span class="x-big-data-font c-darkBlue">
                                            <div class="text-center">
                                                Commentary
                                            </div>
                                        </span>
                                        <dg-without-login-modal></dg-without-login-modal>
                                    </ng-template> -->
                                </p-card>
            
                                <p-card *ngIf="companyDetails?.pscDetails?.length > 0" class="d-md-none">
                                    <span class="x-big-data-font c-darkBlue">Person With Significant Control</span>
                                    <div class="mt-2 commentry-timeline">
                                        <div *ngFor="let item of companyDetails?.pscDetails; let i = index"
                                            class="col card-row" [ngClass]="{ 'bg-grey': i%2 == 0}">
                                            <div class="big-data-font"><i class="ui-icon-person mr-1"></i>{{item?.pscName?.name | titlecase}}
                                            </div>
                                            <span *ngIf="item.nationality && item.nationality !== '-' && item.nationality !== null"
                                                class="small-data-font ml-3">{{item.nationality | titlecase}} </span>
                                            <svg class="seperator" *ngIf="item.dataOfBirth && item.dataOfBirth !== '-'">
                                                <circle cx="3" cy="3" r="2" /></svg>
                                            <span [ngClass]="{ 'ml-3': !item.nationality || item.nationality == '-'}"
                                                *ngIf="item.dataOfBirth && item.dataOfBirth !== 0"
                                                class="small-data-font">{{ directorsAge(item.dataOfBirth) }} Years Old</span><br>
                                            <ng-container *ngFor="let data of item.natures_of_control; let i = index">
                                                <div class="ml-3">{{data | titlecase}}</div>
                                            </ng-container>
                                        </div>
                                    </div>
                                </p-card>
            
                                <p-card *ngIf="companyDetails?.directorsData?.length > 0 || debtorsInfoData">
                                    <span class="x-big-data-font c-darkBlue">Directors</span>
                                    <div class="grid directorCountsCards mt-2 mb-1 d-flex d-lg-small">
                                        <div class="col md-3 text-right md-p md-fs">
                                            <p-card styleClass="mt-0">
                                                <span class="mt-0 d-md-min">Total</span>
                                                <span class="mt-0 d-md-none boxTextSize"><strong>Total</strong></span>
            
                                                <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.total }}</span>
                                                <h1 class="m-0  d-md-none">{{ companydirectorStatusCounts.total }}</h1>
                                            </p-card>
                                        </div>
                                        <div class="col md-3 text-right c-green w-md md-p md-fs">
                                            <p-card styleClass="mt-0">
                                                <span class="mt-0 d-md-min">Active</span>
                                                <span class="mt-0 d-md-none boxTextSize"><strong>Active</strong></span>
            
                                                <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.active }}</span>   
                                                <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.active }}</h1>
                                            </p-card>
                                        </div>
                                        <div class="col md-3 text-right c-blue w-md md-p md-fs">
                                            <p-card styleClass="mt-0">
                                                <span class="mt-0 d-md-min">Secretary</span>
                                                <span class="mt-0 d-md-none boxTextSize"><strong>Secretary</strong></span>
            
                                                <span class="m-0 d-md-min"> - {{ companyData["activeSecretary"] }}</span>   
                                                <h1 class="m-0 d-md-none">{{ companyData["activeSecretary"] }}</h1>
                                            </p-card>
                                        </div>
                                        <div class="col md-3 text-right c-light w-md md-p md-fs">
                                            <p-card styleClass="mt-0">
                                                <span class="mt-0 d-md-min">Inactive</span>
                                                <span class="mt-0 d-md-none boxTextSize"><strong>Inactive</strong></span>
            
                                                <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.inactive }}</span>
                                                <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.inactive }}</h1>
                                            </p-card>
                                        </div>
                                        <div class="col md-3 text-right c-red w-md md-p md-fs">
                                            <p-card styleClass="mt-0">
                                                <span class="mt-0 d-md-min">Resigned</span>
                                                <span class="mt-0 d-md-none boxTextSize"><strong>Resigned</strong></span>
            
                                                <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.resigned }}</span>
                                                <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.resigned }}</h1>
                                            </p-card>
                                        </div>
                                    </div>
                                    <div class="commentry-timeline border-md">
                                        <div *ngFor="let item of directorOverviewArray; let i = index" class="card-row" [ngClass]="{ 'bg-grey': i%2 == 0 }">
                                            <div class="grid align-items-center m-0 big-data-font md-font">
                                                <svg class="col-fixed pad-0 directorStatus"
                                                    [ngClass]="{ 'greenFill': item.status != undefined && item.status == 'active', 'redFill': item.status == undefined || item.status == 'resigned', 'greyFill': item.status == undefined || item.status == 'inactive' }">
                                                    <circle cx="6" cy="6" r="5" />
                                                </svg>
                                                <span class="col-fixed pad-0 featuredLinks">
                                                    <ng-container *ngIf="item?.linkedin_url && item?.linkedin_url !== ' ' && item?.linkedin_url !== '0' && userAuthService.hasRolePermission( ['Super Admin'] ); else otherUser">
                                                        <a class="pointer" href="javascript:void(0)" (click)="checkSubscriptionAuth( isAuthCheckOnClick, item?.linkedin_url.split(',')[0] )">
                                                            <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                <path
                                                                    d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                            </svg>
                                                        </a>
                                                    </ng-container>
                                                    <ng-template #otherUser>
                                                        <a class="pointer" target="_blank"
                                                            (click)="linkedInUrlForDirector(item?.dName?.name?.trim(),item?.dName?.link)">
                                                            <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                <path
                                                                    d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                            </svg>
                                                        </a>
                                                    </ng-template>
                                                </span>
                                                <i class="col-fixed pad-0 ui-icon-person-outline mr-1"></i>
                                                
                                                <ng-container *ngIf="isLoggedIn; else withoutuserLogin">
                                                    <span class="ml-2"> 
                                                        <a class="pad-0 cName" [href]="'/director/' + formatDirectorNameForUrl(item?.dName?.name?.trim() | titlecase) + '/' + item?.dName?.link" target="_blank">{{ item?.dName?.name | titlecase }}</a>
                                                    </span>
                                                </ng-container>
            
                                                <ng-template #withoutuserLogin>
                                                    <a class="pad-0 cName" href="javascript: void(0);" (click)="checkSubscriptionAuth( false )">{{ item?.dName?.name | titlecase }}</a>
                                                </ng-template>
                                            </div>
                                            <div class="grid justify-content-between align-items-center">
                                                <div class="col-fixed">
                                                    <span *ngIf="item.status && item.status !== '-'"
                                                        class="small-data-font ml-md-3"
                                                        [ngClass]="{ 'green': item.status != undefined && item.status == 'active', 'red': item.status == undefined || item.status == 'resigned', 'c-light': item.status == undefined || item.status == 'inactive' }"
                                                        >{{ item.status | titlecase }}</span>
                                                    <svg class="seperator" *ngIf="item.directorRole && item.directorRole !== '-'">
                                                        <circle cx="3" cy="3" r="2" />
                                                    </svg>
                                                    <span *ngIf="item.directorRole && item.directorRole !== '-'"
                                                        class="small-data-font">{{ item.directorRole | titlecase }}</span>
                                                    <svg class="seperator" *ngIf="item.occupation && item.occupation !== '-'">
                                                        <circle cx="3" cy="3" r="2" />
                                                    </svg>
                                                    <span *ngIf="item.directorOccupation && item.directorOccupation !== '-'"
                                                        [ngClass]="{ 'ml-3': !item.directorRole || item.directorRole == '-'}"
                                                        class="small-data-font">
                                                        {{ item.directorOccupation | titlecase }}
                                                    </span>
                                                    <svg class="seperator" *ngIf="item.nationality && item.nationality !== '-'">
                                                        <circle cx="3" cy="3" r="2" />
                                                    </svg>
                                                    <span *ngIf="item.nationality && item.nationality !== '-'"
                                                        [ngClass]="{ 'ml-3': !item.directorOccupation && item.directorOccupation == '-' }"
                                                        class="small-data-font">
                                                        {{ item.nationality | titlecase }}
                                                    </span>
                                                    <svg class="seperator" *ngIf="item.age && item.age !== 0">
                                                        <circle cx="3" cy="3" r="2" />
                                                    </svg>
                                                    <span *ngIf="item.age && item.age !== 0"
                                                        [ngClass]="{ 'ml-3': !item.nationality || item.nationality == '-' }"
                                                        class="small-data-font">
                                                        {{ item.age }} Years Old
                                                    </span>
                                                </div>
                                                <div class="col-fixed text-right ml-auto">
                                                    <a href="javascript:void(0)" class="c-green small-data-font" (click)="checkSubscriptionAuth( ( userAuthService.hasFeaturePermission( 'See Relations' ) || userAuthService.hasRolePermission( ['Super Admin'] ) ), [ '/', formatCompanyNameForUrl( item?.otherRelations?.name?.trim()),item?.otherRelations?.link,item?.otherRelations?.role.replace(' ','-') ] )"><i class="material-icons">device_hub</i> See Relations</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p-card>
            
                                <!-- <ng-container *ngIf="userAuthService.hasAddOnPermission('valuationFilter') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                                <div addOnAccess="valuationFilter">
                                    <p-card *ngIf="companyDetails?.roePercent || companyDetails?.voScore" class="d-md-none">
                                        <div class="x-big-data-font c-darkBlue">Business Valuation</div>
                                        <div class="grid mt-2">
                                            <div class="col ml-3 heading-font">
                                                Return on Equity
                                            </div>
                                            <div class="col-fixed text-right mr-3 highlightedMarkedValue">
                                                {{ companyDetails?.roePercent | number: '1.0-0' }}%
                                            </div>
                                        </div>
                                        <div class="grid mt-1">
                                            <div class="col ml-3 heading-font">
                                                Business Valuation
                                            </div>
                                            <div class="col-fixed text-right mr-3 highlightedMarkedValue">
                                                {{ companyDetails?.voScore_updated | currency: selectedGlobalCurrency:'symbol':'1.0-0' }}
                                            </div>
                                        </div>
                                    </p-card>
                                <!-- </ng-container> -->
                                </div>
            
                            </div>
            
                            <!-- OnUpdateInfo() button ------------------------------------------------------------------------------------------------------------------------------>
                            <p-dialog header="Update Info" [(visible)]="showOrHideContactInfoModal" [modal]="true" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false" [draggable]="false" styleClass="updateUserDialog">
                                <form>
                                    <div class="container updateInfoDialogModal">
                                        <div class="col">
                                            <div class="col-12 lg-4">
                                                <div class="p-inputgroup my-2">
                                                    <span class="p-inputgroup-addon"><i class="material-icons">language</i></span>
                                                    <input type="text" pInputText placeholder="Domain (Website)" [(ngModel)]="domain" [ngModelOptions]="{standalone: true}">
                                                </div>
                                            </div>
                                        <!-- <ng-container *ngIf="userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                                <div class="col-12 lg-4" addOnAccess="contactInformation">
                                                    <div class="p-inputgroup my-2">
                                                        <span class="p-inputgroup-addon"><i class="material-icons">mail</i></span>
                                                        <input type="text" pInputText placeholder="Email Address" [(ngModel)]="email_address" [ngModelOptions]="{standalone: true}">
                                                    </div>
                                                </div>
                                        <!-- </ng-container> -->
                                        </div>
                                    </div>
            
                                    <!-- <ng-container *ngIf="userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                        <div class="container" addOnAccess="contactInformation">
                                            <div class="col">
                                                <div class="col-4 lg-4">
                                                    <div class="p-inputgroup my-2">
                                                        <span class="p-inputgroup-addon"><i class="material-icons">local_phone</i></span>
                                                        <input type="text" pInputText placeholder="Contact Number" [(ngModel)]="contact_number" [ngModelOptions]="{standalone: true}">
                                                    </div>
                                                </div>
                                                <div class="col-4 lg-4">
                                                    <div class="p-inputgroup my-2">
                                                        <span class="p-inputgroup-addon"><i class="material-icons">link</i></span>
                                                        <input type="text" pInputText placeholder="linkedin Profile" [(ngModel)]="linkedin_profile" [ngModelOptions]="{standalone: true}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    <!-- </ng-container> -->
            
                                    <div class="text-center mt-3 mt-md-4">
                                        <button pButton type="button" label="Submit" class="ui-button-inline" (click)="onUpdateInformation()"></button>
                                    </div>
                                </form>
                            </p-dialog>
                            <!------------------- OnUpdateInfo() button ---------------------------------------------------------------->
                        
                            <div class="col-6 md-6">
                                <p-card class="financialCard" *ngIf="finstatutoryChartData">
                                    
                                    <div class="grid align-items-center">
                                        <div class="col-fixed x-big-data-font c-darkBlue">
                                            <div>Financial Performance</div>
                                        </div>
                                    
                                        <div class="col-fixed small-data-font text-right ml-auto">
                                            <div class="in-block">
                                                <span class="chartLegendTriggerBox"></span>
                                                Click to show/hide individual elements
                                            </div>
                                        </div>
                                    </div>
            
                                    <p-chart type="line" [data]="finstatutoryChartData" [options]="chartOptions" height="350px" [responsive]="true"></p-chart>
            
                                    <div class="financeOverviewGrid bg-grey mt-2">
                                        <div class="grid">
                                            <div class="col-6">
                                                <p-card>
                                                    <div class="mb-2">{{ estimatedTurnoverBoolean ? 'Turnover (Estimate +)' : 'Turnover' }}                                                        </div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed  py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] < 0; else turnoverPositiveValue1">(&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #turnoverPositiveValue1><span class="c-green">&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] > overviewTurnoverData[ overviewTurnoverData?.length - 2 ] && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] < overviewTurnoverData[ overviewTurnoverData?.length - 2 ] && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] == overviewTurnoverData[ overviewTurnoverData?.length - 2 ] || overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] == overviewTurnoverData[ overviewTurnoverData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0 && overviewTurnoverData[ overviewTurnoverData?.length - 1 ] > overviewTurnoverData[ overviewTurnoverData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-green"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) ?  '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] < 0 && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">(&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] > 0 && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </p-card>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="mb-2">Total Assets</div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] < 0; else totalAssetsPositiveValue1">(&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #totalAssetsPositiveValue1><span class="c-green">&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] > overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] < overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] == overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] || overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] == overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] > overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-green"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) ? '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] < 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">(&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] > 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="mb-2">Total Liabilities</div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] < 0; else totalLiabilitiesPositiveValue1">(&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #totalLiabilitiesPositiveValue1><span class="c-green">&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] > overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] < overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] == overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] || overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] == overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] > overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-red"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) ? '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] < 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">(&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] > 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="mb-2">Net Worth</div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] < 0; else netWorthPositiveValue1">(&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #netWorthPositiveValue1><span class="c-green">&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] > overviewNetWorthData[ overviewNetWorthData?.length - 2 ] && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] < overviewNetWorthData[ overviewNetWorthData?.length - 2 ] && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] == overviewNetWorthData[ overviewNetWorthData?.length - 2 ] || overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] == overviewNetWorthData[ overviewNetWorthData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0 && overviewNetWorthData[ overviewNetWorthData?.length - 1 ] > overviewNetWorthData[ overviewNetWorthData?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-green"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) ? '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] < 0 && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">(&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] > 0 && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="mb-2">Profit Before Tax</div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] < 0; else overviewProfitBeforeTax1">(&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #overviewProfitBeforeTax1><span class="c-green">&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] > overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] < overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] == overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] || overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] == overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] > overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-green"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) ? '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] < 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">(&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] > 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="mb-2">EBITDA</div>
                                                    <div class="grid justify-content-between align-items-end"
                                                        *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] !== null; else noDataBlock">
                                                        <div class="col-fixed py-0 x-big-data-font">
                                                            <span class="c-red" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] < 0; else overviewEBITDA1">(&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                            <ng-template #overviewEBITDA1><span class="c-green">&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                        </div>
                                                        <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                            <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] > overviewEBITDA[ overviewEBITDA?.length - 2 ] && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-up c-green"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] < overviewEBITDA[ overviewEBITDA?.length - 2 ] && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">
                                                                <i class="ui-icon-trending-down c-red"></i>
                                                            </ng-container>
                                                            <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] == overviewEBITDA[ overviewEBITDA?.length - 2 ] || overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0">
                                                                <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] == overviewEBITDA[ overviewEBITDA?.length - 2 ]">
                                                                    <i class="ui-icon-trending-flat c-green"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0 && overviewEBITDA[ overviewEBITDA?.length - 1 ] > overviewEBITDA[ overviewEBITDA?.length - 2 ]">
                                                                    <i class="ui-icon-trending-up c-green"></i>
                                                                </ng-container>
                                                            </ng-container>
                                                            <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) >= 0 }">
                                                                {{ calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) ? '%' : '' }}
                                                            </span>
                                                            <div>
                                                                <span class="c-red" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] < 0 && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">(&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                <span class="c-green" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] > 0 && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 2 ] | number:'1.0-0' }}</span>
                                                                <span class="c-green" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0">&pound; 0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <ng-template #noDataBlock>
                                            <span class="x-big-data-font">No Data</span>
                                        </ng-template>
                                    </div>
                                </p-card>
            
                                <p-card *ngIf = "companyDetails.pin && companyDetails.pin.companyLocation">
                                    <p-gmap [options]="options" [overlays]="overlays" [style]="{'width':'100%','height':'320px'}" (onOverlayClick)="handleOverlayClick($event)" ></p-gmap>
                                </p-card> 
            
                                <p-card class="d-md-none">
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Account Category</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{companyDetails?.accountsType | titlecase}}</span><br>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Account</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">Last accounts filed on
                                                {{formatDate(companyDetails?.accountsFilingDate)}}</span><br>
                                            <span class="data-font">Last accounts made up to
                                                {{formatDate(companyDetails?.accountsMadeUpDate)}}</span><br>
                                            <span class="data-font">Next Due Date is
                                                {{formatDate(companyDetails?.accountsDueDate)}}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Confirmation Statement</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">Last made update on
                                                {{formatDate(companyDetails?.latestAnnualReturnDate)}}</span><br>
                                            <span class="data-font">Next Due Date is
                                                {{ companyDetails?.nextAnnualReturnDate!= null ? formatDate(companyDetails?.nextAnnualReturnDate) : '(N/A)'}}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2" *ngFor="let data of companyDetails.bankDetails">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Bank Name</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ (data?.bankName!= null ? data?.bankName : '(N/A)') | titlecase }}</span>
                                        </div>
                                        <div class="col-4 md-4" *ngIf="data.sortCode">
                                            <span class="heading-font">Bank Sort Code</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ (data?.sortCode!= null ? data?.sortCode : '(N/A)') }}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="grid mb-2" *ngIf="companyDetails.auditorsQualificationCodes && ( companyDetails.auditorsQualificationCodes[0].auditors || companyDetails.auditorsQualificationCodes[0].accountantsName || companyDetails.auditorsQualificationCodes[0].accountsDate )">
                                        <div class="col-12 pb-0 mt-3">
                                            <span class="heading-font">Auditor and Accountant's Detail</span>
                                        </div>
                                        <div class="col-12 commentry-timeline">
                                                <div *ngIf="companyDetails.auditorsQualificationCodes[0].auditors ; else accountantsNameBlock">
                                                    <span class="data-font">Auditor: {{ (companyDetails.auditorsQualificationCodes[0]?.auditors ? companyDetails.auditorsQualificationCodes[0]?.auditors : '(N/A)') | titlecase }}</span>
                                                </div>
                                                <div *ngIf="companyDetails.auditorsQualificationCodes[0].accountsDate">
                                                    <span class="data-font">Accounts Date: {{ formatDate(companyDetails.auditorsQualificationCodes[0]?.accountsDate) }}</span>
                                                </div>
            
                                                <ng-template #accountantsNameBlock>
                                                    <div *ngIf="companyDetails.auditorsQualificationCodes[0].accountantsName">
                                                        <span class="data-font">Accountants Name: {{ (companyDetails.auditorsQualificationCodes[0]?.accountantsName ? companyDetails.auditorsQualificationCodes[0]?.accountantsName : '(N/A)') | titlecase }}</span>
                                                    </div>
                                                </ng-template>
                                                
                                        </div>
                                    </div>
                                </p-card>
            
                                <p-card *ngIf="companyDetails?.hasCCJInfo" class="d-md-none">
                                    <!-- <ng-container *ngIf="isLoggedIn; else showWithoutLoginCCJModal"> -->
                                        <!-- <ng-container *ngIf="userAuthService.hasFeaturePermission( 'CCJs' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCCJInfo"> -->
                                            <span class="x-big-data-font c-darkBlue">
                                                <div ngClass="{'text-center': !isLoggedIn}">
                                                    CCJ's
                                                </div>
                                            </span>      
                                                                                  <!-- Static CCJ value -->
                                            <div class="mt-2"  featureAccess="CCJs" [optionalTemplate]="true">
                                                <div *ngFor="let item of exactCCJData | slice:0:5; let i = index"
                                                    class="col card-row" [ngClass]="{ 'bg-grey': i%2 == 0}">
                                                    <div>
                                                        <span class="data-font" *ngIf="exactCCJData[i].businessName !== null && exactCCJData[i].businessName !== ''">
                                                            {{ exactCCJData[i].court | titlecase }}
                                                        </span>
                                                    </div>
                                                    <span class="small-data-font mr-1" *ngIf="exactCCJData[i].ccjStatus !== null && exactCCJData[i].ccjStatus !== ''">{{exactCCJData[i].ccjStatus | titlecase}}</span>
                                                        <svg class="seperator" *ngIf="exactCCJData[i].ccjDate !== null && exactCCJData[i].ccjDate !== ''">
                                                            <circle cx="3" cy="3" r="2" />
                                                        </svg>
                                                    <span class="small-data-font mr-1" *ngIf="exactCCJData[i].ccjDate !== null && exactCCJData[i].ccjDate !== ''">Created On: {{formatDate(exactCCJData[i].ccjDate)}}</span>
                                                        <svg class="seperator" *ngIf="exactCCJData[i].ccjPaidDate !== null && exactCCJData[i].ccjPaidDate !== ''">
                                                            <circle cx="3" cy="3" r="2" />
                                                        </svg>
                                                    <span class="small-data-font mr-1" *ngIf="exactCCJData[i].ccjPaidDate !== null && exactCCJData[i].ccjPaidDate !== ''">Paid On: {{formatDate(exactCCJData[i].ccjPaidDate) }}</span>
                                                </div>
                                            </div>
                                            <!-- /Static CCJ value -->
                                        <!-- </ng-container> -->
                                        <!-- <ng-template #showCCJInfo>
                                            <span class="x-big-data-font c-darkBlue">
                                                <div class="text-center">
                                                    CCJ's
                                                </div>
                                            </span>
                                            <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                                        </ng-template> -->
                                    <!-- </ng-container> -->
                                    <!-- <ng-template #showWithoutLoginCCJModal>
                                        <span class="x-big-data-font c-darkBlue">
                                            <div class="text-center">
                                                CCJ's
                                            </div>
                                        </span>
                                        <dg-without-login-modal></dg-without-login-modal>
                                    </ng-template> -->
                                </p-card>
            
                            </div>
                        </div>

                        <div class="grid">
                            <div class="col-12">
                                <div>
                                    <strong><sup>*</sup> The Corporate Telephone Preference Service (CTPS) is the central opt-out register
                                        for organisations wishing to opt out from receiving sales and marketing calls.</strong>
                                </div>
                                <div>
                                    <strong><sup>*</sup> In general, you must not make marketing calls to any number listed on the Telephone
                                        Preference Service (TPS) or Corporate TPS (CTPS), unless that person has specifically consented to
                                        your calls. You can call a number if it is not listed on the TPS or CTPS and you are not marketing
                                        claims management services.</strong>
                                </div>
                            </div>
                        </div>
                        
                    </p-tabPanel>

                    <p-tabPanel header="Trading Address" leftIcon="ui-icon-home" [disabled]="isfeatureTradingAddress">
            
                        <!-- <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Trading Address' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showTradingInfoTab"> -->
                        <span featureAccess="Trading Address" [optionalTemplate]="true">
                            <dg-user-list *ngIf="tradingAddressDetails != undefined" [listColumns]="tradingAddressDetailsColumn" [listDataValues]="tradingAddressDetails" [listPage]="true" [thisPage]="'tradingAddress'"></dg-user-list>
                        </span>
                        <!-- </ng-container> -->
                        <!-- <ng-template #showTradingInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template> -->
            
                    </p-tabPanel>

                    <p-tabPanel header="Group Structure" leftIcon="ui-icon-group-work" *ngIf="companyDetails.hasGroupStructure" [disabled]="isfeatureGroupStructure">

                        <span featureAccess="Group Structure" [optionalTemplate]="true">
            
                        <!-- <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Group Structure' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showGroupStructureInfoTab"> -->
            
                            <div class="card groupStructureTreeWrapper" *ngIf="companyDetails.groupStructureData != undefined">
                                
                                <div class="grid mb-3">
                                    <div class="col-4">
                                        <button pButton type="button"  label="{{ forTableView ? 'Change Table View' : 'Change Tree View' }}" [disabled]="companyDetails?.groupStructureData == undefined" (click)="changeTreeOrientation()"></button>
                                    </div>
                                    <div class="col-8 text-right">
                                        <small><i class="pi pi-info-circle mr-1 valign-m"></i> Note: Companies start with "#" are foreign companies.</small>
                                    </div>
                                </div>
            
                                <p-tree [value]="companyDetails?.groupStructureData" class="horizontal-style" [ngClass]="{ 'no_data': companyDetails?.groupStructureData === undefined }" (onNodeSelect)="expandTreeOnSelectingNode($event)" layout="horizontal" selectionMode="single" *ngIf="treeOrientation == 'horizontal'">
                                
                                    <ng-template let-node pTemplate="default">
                                        <div [ngClass]="{ 'highlightCurrentCompanyNode': companyDetails?.companyRegistrationNumber == node.data }">
                                            <h4 class="m-0"><strong>{{ node.label | titlecase }}</strong></h4>
                                            <div class="c-light"><small>{{ node.data }}</small></div>
                                            <div class="grid" *ngIf="(node.data !== undefined && !(node.data.match('#')))">
                                                <div class="col-12">
                                                    <small>
                                                        <a [href]="'/company/' + node['data'] + '/' + formatCompanyNameForUrl(node['label'] | titlecase)" target="_blank">View Details <i class="material-icons valign-b">navigate_next</i></a>
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                    
                                </p-tree>
            
                                <p-tree [value]="companyDetails?.groupStructureData" class="ui-vertical-layout" [ngClass]="{ 'no_data': companyDetails?.groupStructureData === undefined }" (onNodeSelect)="expandTreeOnSelectingNode($event)" layout="vertical" selectionMode="single" *ngIf="treeOrientation == 'horizontal'">
                                
                                    <ng-template let-node pTemplate="default">
                                        <div [ngClass]="{ 'highlightCurrentCompanyNode': companyDetails?.companyRegistrationNumber == node.data }">
                                            <h4 class="m-0"><strong>{{ node.label | titlecase }}</strong></h4>
                                            <div class="c-light"><small>{{ node.data }}</small></div>
                                            <div class="grid" *ngIf="(node.data !== undefined && !(node.data.match('#')))">
                                                <div class="col-12">
                                                    <small>
                                                        <a [href]="'/company/' + node['data'] + '/' + formatCompanyNameForUrl(node['label'] | titlecase)" target="_blank">View Details <i class="material-icons valign-b">navigate_next</i></a>
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                    
                                </p-tree>
            
                                <!-- Tree Table View -->
                                <p-treeTable [columns]="groupStructureTableCols" [value]="companyDetails?.groupStructureData" *ngIf="treeOrientation == 'vertical'" responsiveLayout="scroll" scrollHeight="65vh">
                                    <ng-template pTemplate="colgroup" let-columns>
                                        <colgroup>
                                            <col *ngFor="let col of columns" [ngStyle]="{ 'width': col.width }" />
                                        </colgroup>
                                    </ng-template>
                                    <ng-template pTemplate="header" let-columns>
                                        <tr [ttRow]="rowNode">
                                            <th *ngFor="let col of columns" [ngStyle]="{ 'min-width': col.width, 'text-align': col.textAlign }">{{ col.header }}</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-rowNode let-columns="columns">
                                        <tr [ngClass]="{ 'heighlightTableRow': companyDetails?.companyRegistrationNumber == rowNode['node']['data'] }">
                                            <td *ngFor="let col of columns; let i = index" [ngStyle]="{ 'min-width': col.width, 'text-align': col.textAlign }">
                                                <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
            
                                                <ng-container *ngIf="col.field == 'label'">
                                                    <ng-container *ngIf="(rowNode['node']['data']!== undefined && (!(rowNode['node']['data'].includes('#')))); else foreignCompanyBlock">
                                                        <a [href]="'/company/' + rowNode['node']['data'] + '/' + formatCompanyNameForUrl( rowNode['node']['label'] | titlecase )"
                                                            target="_blank" class="cName">
                                                            {{ rowNode['node'][ col.field ] | titlecase }}
                                                        </a>
                                                    </ng-container>
                                                    <ng-template #foreignCompanyBlock>
                                                        {{ rowNode['node'][col.field] | titlecase }}
                                                    </ng-template>
                                                </ng-container>
                                                
                                                <ng-container *ngIf="col.field == 'data'">
                                                    <ng-container *ngIf="(rowNode['node']['data']!== undefined && (!(rowNode['node']['data'].includes('#')))); else foreignCompanyBlock">
                                                        <a [href]="'/company/' + rowNode['node']['data'] + '/' + formatCompanyNameForUrl( rowNode['node']['label'] | titlecase )"
                                                            target="_blank" class="cName">
                                                            {{ rowNode['node'][ col.field ] | uppercase }}
                                                        </a>
                                                    </ng-container>
                                                    <ng-template #foreignCompanyBlock>
                                                        {{ rowNode['node'][col.field] | uppercase }}
                                                    </ng-template>
                                                </ng-container>
            
                                                <ng-container *ngIf="col.field == 'safeAlerts' && rowNode['node'][ col.field ] === true">
                                                    <i class="pi pi-exclamation-triangle warningRedIcon"></i>
                                                </ng-container>
            
                                                <ng-container *ngIf="col.field == 'safeAlerts' && (rowNode['node'][ col.field ] === false || rowNode['node'][ col.field ] == '-')">
                                                    -
                                                </ng-container>
                                            
                                                <ng-container *ngIf="col.field === 'percentageShare'">
                                                    <div *ngIf="rowNode['node']['shareDetails'] && rowNode['node']['shareDetails'].length > 0; else noShareDetailsDataBlock">
                                                        <div *ngFor="let val of rowNode['node']['shareDetails']">
                                                                {{ rowNode['node']['parent']['data'] | uppercase }}

                                                            - 
                                                            {{ val['shareType'] | titlecase }} ( {{ val['percentage_share'] }} % )
                                                        </div>
                                                    </div>
            
                                                    <ng-template #noShareDetailsDataBlock>
                                                        -
                                                    </ng-template>
                                                </ng-container>
            
                                                <ng-container *ngIf="col.field == 'turnover' || col.field == 'totalAssets' || col.field == 'netWorth' || col.field == 'totalLiabilities'">
                                                    <div *ngIf="rowNode['node'][ col.field ] !== undefined; else noAmountDataBlock">
                                                        <span *ngIf="typeOfData(rowNode['node'][ col.field ]) == 'number'; else noAmountDataBlock">&pound;
                                                            {{ rowNode['node'][ col.field ] | number: '1.0-0' }}</span>
                                                    </div>
                                                    <ng-template #noAmountDataBlock>
                                                        -
                                                    </ng-template>
            
                                                </ng-container>
            
                                                <ng-container *ngIf="col.field == 'companyStatus'">
                                                    <div *ngIf="rowNode['node']['companyStatus'] != undefined && rowNode['node']['companyStatus'] != '-'; else noStatusBlock">
                                                        <span
                                                        [ngClass]="{ 'green': rowNode['node']['companyStatus'] != undefined &&  rowNode['node']['companyStatus'] == 'live', 'c-red': (rowNode['node']['companyStatus'] != 'live' && rowNode['node']['companyStatus'] != 'in liquidation' ), 'c-orange': rowNode['node']['companyStatus'] != undefined &&  rowNode['node']['companyStatus'] === 'in liquidation' }"
                                                        class="status">{{ rowNode['node']['companyStatus'] | uppercase }}
                                                        </span>
                                                    </div>
                                                    <ng-template #noStatusBlock> - </ng-template>
                                                
                                                </ng-container>
            
                                                <ng-container *ngIf="col.field !== 'data' && col.field !== 'label' && col.field !== 'safeAlerts' && col.field !== 'turnover' && col.field !== 'totalAssets' && col.field !== 'netWorth' && col.field !== 'totalLiabilities' && col.field !== 'companyStatus' && col.field !== 'percentageShare'">
                                                    {{ rowNode['node'][ col.field ] !== undefined ? rowNode['node'][ col.field ] : "-"}}
                                                </ng-container>
            
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-treeTable>
                                <!-- /.Tree Table View Ends -->
            
                            </div>
                        </span>
                        <!-- </ng-container> -->
                        <!-- <ng-template #showGroupStructureInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template> -->
            
                    </p-tabPanel>

                    <p-tabPanel header="Notes" leftIcon="ui-icon-insert-drive-file" [disabled]="!isLoggedIn">
                        <div class="col-fixed  py-0 mr-md-3 text-right">           
                            <button pButton type="button" label="Add a Note" icon="ui-icon-note-add" class="p-button-rounded" (click)="showAddNoteModal(undefined)"></button>
                        </div>
                        <div class="card addedNotesWrapper">
                            <dg-user-list *ngIf="notesData !== undefined" [listColumns]="notesTableCols" [notesListDataValues]="notesData" [detailPage]="true"
                                [companyDetailsParams]="companyDetailsParams"></dg-user-list>
                        </div>
                    </p-tabPanel>
            
                    <p-tabPanel header="Lifeline" leftIcon="ui-icon-timeline" [disabled]="isfeatureLifeline">
            
                        <!-- <ng-container
                            *ngIf="userAuthService.hasFeaturePermission( 'Lifeline' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showLifelineInfoTab"> -->
                        <div featureAccess="Lifeline" [optionalTemplate]="true">
                            <p-card  class="lifelineWrapper" *ngIf="companyDocuments?.items?.length > 0; else noData">
            
                                <div class="grid">
                                    <div class="col x-big-data-font c-darkBlue">Lifeline</div>
                                </div>
            
                                <div class="col">
                                    <div class="col-12 dashboard">
                                        <div class="card timeline ui-fluid">
                                            <div *ngFor="let data of companyDocuments.items" class="col">
                                                <div class="col-3">
                                                    <span class="event-time d-block">
                                                        <a href="javascript:void(0)" class="d-md-none" (click)="onClickDownload(data.description , data.links.document_metadata)">
                                                            {{ data.date | date: 'dd-MM-yyyy' }}
                                                        </a>
                                                    </span>
                                                    <i class="material-icons" [ngStyle]="{'background-color': data.color}">{{ data.icon }}</i>
                                                </div>
                                                <div class="col-9">
                                                    <a href="javascript:void(0)" class="c-light pad-l-2 d-md-min" (click)="onClickDownload(data.description , data.links.document_metadata)">
                                                        <small>{{ data.date | date: 'dd-MM-yyyy' }}</small>
                                                    </a>
                                                    <span class="event-owner pad-l-2 d-block" [ngStyle]="{'color': data.color}">
                                                        <a href="javascript:void(0)" class="d-block" (click)="onClickDownload(data.description , data.links.document_metadata)" [ngStyle]="{'color': data.color}">
                                                            {{ data.description | titlecase }}
                                                        </a>
                                                    </span>
                                                    <span class="event-text pad-l-2 d-block">
                                                        <a href="javascript:void(0)" class="d-block" (click)="onClickDownload(data.description , data.links.document_metadata)">
                                                            {{ data.category | titlecase }}
                                                        <div class="download-link cName">Download</div>
                                                        </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </p-card>
                            <ng-template #noData>
                                <div class="card">
                                    <h3>No Documents/records Available.</h3> 
                                </div>
                            </ng-template>
                        </div>
                        <!-- </ng-container> -->
                        <!-- <ng-template #showLifelineInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template> -->
            
                    </p-tabPanel>

                    <!-- <ng-container *ngIf="isLoggedIn && ( userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('specialFilter') )"> -->
                    <div addOnAccess="specialFilter">
                        <p-tabPanel header="Import and Export" leftIcon="ui-icon-import-export" *ngIf="(companyDetails.hasExportData || companyDetails.hasImportData)">

                            <div class="grid directorCountsCards mt-2 mb-1 d-flex d-lg-small">
                                <div class="col md-2 text-right c-green md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Date of Last Export</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Date of Last Export</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastExportMonthYear }}</span>
                                        <h2 class="m-0 d-md-none">{{ lastExportMonthYear }}</h2>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-green w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Last 12 Months Exports</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Last 12 Months Exports</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastOneYearExports }} ({{ lastOneYearExports/12 | percent:'1.2-2' }})</span>   
                                        <h2 class="m-0 d-md-none">{{ lastOneYearExports }} ({{ lastOneYearExports/12 | percent:'1.2-2' }})</h2>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-green w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Last 60 Months Exports</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Last 60 Months Exports</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastFiveYearExports }} ({{ lastFiveYearExports/60 | percent:'1.2-2' }})</span>   
                                        <h2 class="m-0 d-md-none">{{ lastFiveYearExports }} ({{ lastFiveYearExports/60 | percent:'1.2-2' }})</h2>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-blue w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Date of Last Import</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Date of Last Import</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastImportMonthYear }}</span>
                                        <h2 class="m-0 d-md-none">{{ lastImportMonthYear }}</h2>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-blue w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Last 12 Months Imports</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Last 12 Months Imports</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastOneYearImports }} ({{ lastOneYearImports/12 | percent:'1.2-2' }})</span>
                                        <h2 class="m-0 d-md-none">{{ lastOneYearImports }} ({{ lastOneYearImports/12 | percent:'1.2-2' }})</h2>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-blue w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Last 60 Months Imports</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Last 60 Months Imports</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ lastFiveYearImports }} ({{ lastFiveYearImports/60 | percent:'1.2-2' }})</span>
                                        <h2 class="m-0 d-md-none">{{ lastFiveYearImports }} ({{ lastFiveYearImports/60 | percent:'1.2-2' }})</h2>
                                    </p-card>
                                </div>
                            </div>
                            
                            <div *ngIf="companyExportData && companyDetails.hasExportData" #target class="x-big-data-font c-darkBlue">Export Data</div>
                            <dg-user-list *ngIf="companyExportData && companyDetails.hasExportData" [listColumns]="companyImportExportColumns" [listDataValues]="companyExportData" [listPage]="true" [thisPage]="'exportPageOnly'"></dg-user-list>

                            <div *ngIf="companyImportData && companyDetails.hasImportData" #target class="x-big-data-font c-darkBlue">Import Data</div>
                            <dg-user-list *ngIf="companyImportData && companyDetails.hasImportData" [listColumns]="companyImportExportColumns" [listDataValues]="companyImportData" [listPage]="true" [thisPage]="'importExport'"></dg-user-list>
                    
                        
                        </p-tabPanel>
                    </div>   
                    <!-- </ng-container> -->

                    <p-tabPanel header="Similar Companies" leftIcon="ui-icon-business-center" *ngIf="companyData.primarySicCode07 && companyData.primarySicCode07.code" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Similar Companies' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
                        
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Similar Companies' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showSimilarCompaniesInfoTab">
            
                            <dg-user-list  *ngIf="similarCompaniesWithSameSiccodeDetails" [listColumns]="similarCompaniesWithSameSiccodeDetailsColumn" [listDataValues]="similarCompaniesWithSameSiccodeDetails" [listPage]="true" [thisPage]="'similarCompaniesWithSameSiccode'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showSimilarCompaniesInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>

                    <p-tabPanel header="Person Contact Info" leftIcon="ui-icon-people-outline">
                        <dg-user-list *ngIf="personalContactInfoData?.length" [listColumns]="personalContactInfoColumns" [listDataValues]="personalContactInfoData" [listPage]="true" [thisPage]="'personContactInfo'">
                        </dg-user-list>
                        <div class="card" *ngIf="!personalContactInfoData || personalContactInfoData.length == 0">
                            <h3 class="c-light">No records found.</h3>
                        </div>
                    </p-tabPanel>
                    
                </p-tabView>
                
            </p-tabPanel>

            <p-tabPanel header="Risk Profile">

                <p-tabView #riskProfileTabView orientation="top" (onChange)="setTabView($event)">

                    <ng-container *ngIf="isLoggedIn && ( userAuthService.hasFeaturePermission('Risk Summary') || userAuthService.hasRolePermission( ['Super Admin'] ) )">

                        <p-tabPanel header="Risk Summary" leftIcon="ui-icon-security" class="companyRiskAssessmentAnalysisTab" [selected]="true">
                
                            <ng-container *ngIf="companyRiskAssessmentAnalysisData">
                                
                                <div class="grid masonryGridContainer1">
                                    
                                    <div class="col-12 md-4 lg-3" *ngIf="companyDetails?.internationalScoreDescription">
                                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <h3 class="darkBlue m-0">Risk Assessment</h3>
                                                </div>
                                                <div class="col-12">
                                                    <div class="riskValueMeterBar">
                                                        <span class="notScoredPointer" *ngIf="companyDetails?.internationalScoreDescription == 'not scored'">Not Scored</span>
                                                        <span class="meterBar"></span>
                                                        <span class="barPointer">
                                                            <span class="veryLowRiskPointer" [ngClass]="{ 'active': companyDetails?.internationalScoreDescription == 'very low risk' }">Very Low</span>
                                                            <span class="lowRiskPointer" [ngClass]="{ 'active': companyDetails?.internationalScoreDescription == 'low risk' }">Low</span>
                                                            <span class="moderateRiskPointer" [ngClass]="{ 'active': companyDetails?.internationalScoreDescription == 'moderate risk' }">Moderate</span>
                                                            <span class="highRiskPointer" [ngClass]="{ 'active': companyDetails?.internationalScoreDescription == 'high risk ' }">High</span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                        
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">CCJ's</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('CCJ\'s', 1, riskProfileTabView)" [class.disabled]="totalCCJValue == 0">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <strong class="x-big-data-font m-0" [ngClass]="{ 'c-red': totalCCJValue > 0 }">{{ totalCCJValue | currency: selectedGlobalCurrency:'symbol':'1.0-0' }}</strong>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Bad Debts</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Bad Debts', 1, riskProfileTabView)" [class.disabled]="companyRiskAssessmentAnalysisData?.debtorDetails && !companyRiskAssessmentAnalysisData?.debtorDetails.length">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <div>No. of Bad Debts</div>
                                                            <div>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.debtorDetails && companyRiskAssessmentAnalysisData?.debtorDetails.length">{{ companyRiskAssessmentAnalysisData?.debtorDetails[0]['totalCount'] | number: '1.0-0' }}</strong>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.debtorDetails && !companyRiskAssessmentAnalysisData?.debtorDetails.length">0</strong>
                                                            </div>
                                                        </div>
                                                        <div class="col-fixed text-right ml-auto">
                                                            <div>Total Amount</div>
                                                            <div>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.debtorDetails && companyRiskAssessmentAnalysisData?.debtorDetails.length">{{ companyRiskAssessmentAnalysisData?.debtorDetails[0]['totalAmount'] | currency: selectedGlobalCurrency:'symbol':'1.0-0' }}</strong>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.debtorDetails && !companyRiskAssessmentAnalysisData?.debtorDetails.length">0</strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Creditors</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Creditors', 1, riskProfileTabView)" [class.disabled]="companyRiskAssessmentAnalysisData?.creditorDetails && !companyRiskAssessmentAnalysisData?.creditorDetails.length">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <div>No. of Creditors</div>
                                                            <div>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.creditorDetails && companyRiskAssessmentAnalysisData?.creditorDetails.length">{{ companyRiskAssessmentAnalysisData?.creditorDetails[0]['totalCount'] | number: '1.0-0' }}</strong>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.creditorDetails && !companyRiskAssessmentAnalysisData?.creditorDetails.length">0</strong>
                                                            </div>
                                                        </div>
                                                        <div class="col-fixed text-right ml-auto">
                                                            <div>Total Amount</div>
                                                            <div>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.creditorDetails && companyRiskAssessmentAnalysisData?.creditorDetails.length">{{ companyRiskAssessmentAnalysisData?.creditorDetails[0]['totalAmount'] | currency: selectedGlobalCurrency:'symbol':'1.0-0' }}</strong>
                                                                <strong class="big-data-font m-0" *ngIf="companyRiskAssessmentAnalysisData?.creditorDetails && !companyRiskAssessmentAnalysisData?.creditorDetails.length">0</strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <h3 class="darkBlue m-0">Overdue Accounts</h3>
                                                </div>
                                                <div class="col-12">
                                                    <span class="{{ calculateAccountOverduePeriod( companyRiskAssessmentAnalysisData?.accountsDueDate ) ? 'c-red' : 'c-green' }}" *ngIf="companyRiskAssessmentAnalysisData?.accountsDueDate">{{ calculateAccountOverduePeriod( companyRiskAssessmentAnalysisData?.accountsDueDate ) ? 'Accounts Overdue: ' : 'No Overdues' }} {{ calculateAccountOverduePeriod( companyRiskAssessmentAnalysisData?.accountsDueDate ) ? ( commonService.changeToDate( companyRiskAssessmentAnalysisData?.accountsDueDate ) | date: 'dd-MM-yyyy' ) : '' }}</span>
                                                    <ng-container *ngIf="calculateAccountOverduePeriod( companyRiskAssessmentAnalysisData?.accountsDueDate )">
                                                        ( {{ calculateDays( companyRiskAssessmentAnalysisData?.accountsDueDate ) | number: '1.0-0' }} days )
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3" *ngIf="companyRiskAssessmentAnalysisData?.lastAccountFiled">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <h3 class="darkBlue m-0">Last Account Filed</h3>
                                                </div>
                                                <div class="col-12">
                                                    {{ commonService.changeToDate( companyRiskAssessmentAnalysisData?.lastAccountFiled ) | date: 'dd-MM-yyyy' }}
                                                    ( {{ calculateDays( companyRiskAssessmentAnalysisData?.lastAccountFiled ) | number: '1.0-0' }} days before )
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Changed Directors in 3 Months</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Directors', 3, directorShareholdersTabView)">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.Changed_Directors_in_3_months">{{ companyRiskAssessmentAnalysisData?.Changed_Directors_in_3_months }}</div>
                                                <div class="col-12" *ngIf="!companyRiskAssessmentAnalysisData?.Changed_Directors_in_3_months">No change</div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Disqualified Directors</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Directors', 3, directorShareholdersTabView)" [class.disabled]="disqualifiedDirectorsCount == 0">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="disqualifiedDirectorsCount >= 0">
                                                    <span class="highlightedMarkedValue m-0" [ngClass]="{ 'c-red': disqualifiedDirectorsCount > 0 }">{{ disqualifiedDirectorsCount }}</span>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3" *ngIf="companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails && companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails?.length">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <h3 class="darkBlue m-0">Ultimate Parent Company</h3>
                                                </div>
                                                <div class="col-12">
                                                    <div class="big-data-font">
                                                        <a (click)="checkForeignCompany(companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails[0]?.companyNo, companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails[0]?.companyName)" class="c-blue underlineOnHover"> {{ companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails[0]?.companyName | titlecase }} | {{ companyRiskAssessmentAnalysisData?.ultimateParentCompanyDetails[0]?.companyNo | uppercase}}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue m-0">Furlough</h3>
                                                </div>
                                            </div>
                                            <div class="grid" *ngIf="companyRiskAssessmentAnalysisData?.forloughData">
                                                <div class="col-fixed">
                                                    <span class="heading-font ml-2 d-lg-none">Amount (&pound;) </span>
                                                </div>
                                                <div class="col">
                                                    <span class="heading-font mr-2 min-lg-none">Amount</span>
                                                    <span class="data-font">{{ companyRiskAssessmentAnalysisData?.forloughData | titlecase }}</span>
                                                </div>
                                            </div>
                                            <div class="grid" *ngIf="!companyRiskAssessmentAnalysisData?.forloughData">
                                                <div class="col-12">
                                                    Not available
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-12 md-4 lg-3">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Corporate Lands</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Corporate Land', 2, financialTabView)" [class.disabled]="!companyRiskAssessmentAnalysisData?.corporateLand">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.corporateLand">{{ companyRiskAssessmentAnalysisData?.corporateLand?.length }}</div>
                                                <div class="col-12" *ngIf="!companyRiskAssessmentAnalysisData?.corporateLand">0</div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                    
                                    <!-- Key Financials Value Cards -->
                                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">                                                    
                                                    <h3 class="darkBlue mt-0">{{ estimatedTurnoverBoolean ? 'Turnover (Estimate +)' : 'Turnover' }}</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] < 0; else turnoverPositiveValue1">(&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #turnoverPositiveValue1><span class="c-green">&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] > overviewTurnoverData[ overviewTurnoverData?.length - 2 ] && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] < overviewTurnoverData[ overviewTurnoverData?.length - 2 ] && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] == overviewTurnoverData[ overviewTurnoverData?.length - 2 ] || overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 1 ] == overviewTurnoverData[ overviewTurnoverData?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0 && overviewTurnoverData[ overviewTurnoverData?.length - 1 ] > overviewTurnoverData[ overviewTurnoverData?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-green"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTurnoverData[ overviewTurnoverData?.length - 2 ], overviewTurnoverData[ overviewTurnoverData?.length - 1 ] ) ?  '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] < 0 && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">(&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] > 0 && overviewTurnoverData[ overviewTurnoverData?.length - 2 ] !== 0">&pound; {{ overviewTurnoverData[ overviewTurnoverData?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewTurnoverData[ overviewTurnoverData?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Total Assets</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] < 0; else totalAssetsPositiveValue1">(&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #totalAssetsPositiveValue1><span class="c-green">&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] > overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] < overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] == overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] || overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] == overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] > overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-green"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ], overviewTotalAssetsData[ overviewTotalAssetsData?.length - 1 ] ) ? '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] < 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">(&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] > 0 && overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] !== 0">&pound; {{ overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewTotalAssetsData[ overviewTotalAssetsData?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Total Liabilities</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] < 0; else totalLiabilitiesPositiveValue1">(&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #totalLiabilitiesPositiveValue1><span class="c-green">&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] > overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] < overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] == overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] || overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] == overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] > overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-red"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ], overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 1 ] ) ? '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] < 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">(&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] > 0 && overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] !== 0">&pound; {{ overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewTotalLiabilitiesData[ overviewTotalLiabilitiesData?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Net Worth</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] < 0; else netWorthPositiveValue1">(&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #netWorthPositiveValue1><span class="c-green">&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] > overviewNetWorthData[ overviewNetWorthData?.length - 2 ] && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] < overviewNetWorthData[ overviewNetWorthData?.length - 2 ] && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] == overviewNetWorthData[ overviewNetWorthData?.length - 2 ] || overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 1 ] == overviewNetWorthData[ overviewNetWorthData?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0 && overviewNetWorthData[ overviewNetWorthData?.length - 1 ] > overviewNetWorthData[ overviewNetWorthData?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-green"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewNetWorthData[ overviewNetWorthData?.length - 2 ], overviewNetWorthData[ overviewNetWorthData?.length - 1 ] ) ? '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] < 0 && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">(&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] > 0 && overviewNetWorthData[ overviewNetWorthData?.length - 2 ] !== 0">&pound; {{ overviewNetWorthData[ overviewNetWorthData?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewNetWorthData[ overviewNetWorthData?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Profit Before Tax</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] < 0; else overviewProfitBeforeTax1">(&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #overviewProfitBeforeTax1><span class="c-green">&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] > overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] < overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] == overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] || overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] == overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] > overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-green"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ], overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 1 ] ) ? '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] < 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">(&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] > 0 && overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] !== 0">&pound; {{ overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewProfitBeforeTax[ overviewProfitBeforeTax?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <div class="col-12 md-4 lg-3" *ngIf="finstatutoryChartData">
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">EBITDA</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="overviewEBITDA[ overviewEBITDA?.length - 1 ] == null">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="grid justify-content-between align-items-end"
                                                *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] !== null; else noDataBlock">
                                                <div class="col-fixed  py-0 x-big-data-font">
                                                    <span class="c-red" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] < 0; else overviewEBITDA1">(&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                    <ng-template #overviewEBITDA1><span class="c-green">&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                </div>
                                                <div class="col-fixed  py-0 text-right sm-data-font ml-auto">
                                                    <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] > overviewEBITDA[ overviewEBITDA?.length - 2 ] && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-up c-green"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] < overviewEBITDA[ overviewEBITDA?.length - 2 ] && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">
                                                        <i class="ui-icon-trending-down c-red"></i>
                                                    </ng-container>
                                                    <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] == overviewEBITDA[ overviewEBITDA?.length - 2 ] || overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0">
                                                        <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 1 ] == overviewEBITDA[ overviewEBITDA?.length - 2 ]">
                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                        </ng-container>
                                                        <ng-container *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0 && overviewEBITDA[ overviewEBITDA?.length - 1 ] > overviewEBITDA[ overviewEBITDA?.length - 2 ]">
                                                            <i class="ui-icon-trending-up c-green"></i>
                                                        </ng-container>
                                                    </ng-container>
                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) >= 0 }">
                                                        {{ calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( overviewEBITDA[ overviewEBITDA?.length - 2 ], overviewEBITDA[ overviewEBITDA?.length - 1 ] ) ? '%' : '' }}
                                                    </span>
                                                    <div>
                                                        <span class="c-red" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] < 0 && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">(&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                        <span class="c-green" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] > 0 && overviewEBITDA[ overviewEBITDA?.length - 2 ] !== 0">&pound; {{ overviewEBITDA[ overviewEBITDA?.length - 2 ] | number:'1.0-0' }}</span>
                                                        <span class="c-green" *ngIf="overviewEBITDA[ overviewEBITDA?.length - 2 ] == 0">&pound; 0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </p-card>
                                    </div>
                    
                                    <!-- ./Key Financials Value Cards -->
                    
                                </div>
                    
                                <div class="grid masonryGridContainer2 mt-2">
                    
                                    <div class="col-6 md-6">
                    
                                        <p-card class="financialCard">
                                            
                                            <div class="grid align-items-center">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Financial Performance</h3>
                                                </div>
                                            
                                                <div class="col-fixed small-data-font text-right ml-auto" *ngIf="finstatutoryChartData">
                                                    <div class="in-block">
                                                        <span class="chartLegendTriggerBox"></span>
                                                        Click to show/hide individual elements
                                                    </div>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Key Financials', 2, financialTabView)" [class.disabled]="!finstatutoryChartData">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                    
                                            <ng-container *ngIf="finstatutoryChartData; else noDataBlock">
                    
                                                <p-chart type="line" [data]="finstatutoryChartData" [options]="chartOptions" height="350px" [responsive]="true"></p-chart>
                    
                                            </ng-container>
                    
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-6 md-6">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Charges Outstanding</h3>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Charges', 1, riskProfileTabView)" [class.disabled]="!companyRiskAssessmentAnalysisData?.OutstandingChargesDetails?.outstandingChargesData">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.OutstandingChargesDetails?.outstandingChargesData && companyRiskAssessmentAnalysisData?.OutstandingChargesDetails?.outstandingChargesData?.length">
                                                    <div class="commentry-timeline">
                                                        <div class="card-row" *ngFor="let outstandingCharges of companyRiskAssessmentAnalysisData?.OutstandingChargesDetails?.outstandingChargesData">
                                                            <div class="data-font">
                                                                <ng-container *ngFor="let outstandingChargesPE of outstandingCharges?.mortgageDetails">
                                                                    <ng-container *ngIf="outstandingChargesPE?.recordType == 'persons entitled'">
                                                                        {{ outstandingChargesPE?.description | titlecase }}
                                                                    </ng-container>
                                                                </ng-container>
                                                            </div>
                                                            <div class="small-data-font c-red">Last updated: {{ outstandingCharges?.lastChangeDate }}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="!companyRiskAssessmentAnalysisData?.OutstandingChargesDetails?.outstandingChargesData">
                                                    No
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-6 md-6">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-fixed">
                                                    <h3 class="darkBlue mt-0">Commentary</h3>
                                                </div>
                                                <div class="col-fixed ml-auto text-right">
                                                    <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Commentary', 1, riskProfileTabView)" [class.disabled]="companyRiskAssessmentAnalysisData?.companyCommentary && !companyRiskAssessmentAnalysisData?.companyCommentary.length">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                </div>
                                            </div>
                                            <div class="commentry-timeline mt-2 pad-x-2" *ngIf="companyRiskAssessmentAnalysisData?.companyCommentary && companyRiskAssessmentAnalysisData?.companyCommentary.length; else noDataBlock">
                                                <ng-container *ngFor="let item of companyCommentryData; let i = index">
                                                    <div class="card-row" *ngIf="item.commentaryImpact == '-' || item.commentaryImpact == null">
                                                        <div class="grid">
                                                            <div class="col-fixed">
                                                                <ng-container *ngIf="item.commentaryImpact == '-'">
                                                                    <i class="ui-icon-arrow-downward c-red"></i>
                                                                </ng-container>
                                                                <ng-container *ngIf="item.commentaryImpact == null">
                                                                    <i class="ui-icon-arrow-forward c-orange"></i>
                                                                </ng-container>
                                                            </div>
                                                            <div class="col">
                                                                <div>
                                                                    <span class="data-font" *ngIf="item.commentaryText !== null && item.commentaryText !== ''" [ngClass]="{ 'c-green': item.commentaryImpact == '+', 'c-red': item.commentaryImpact == '-', 'c-orange': item.commentaryImpact == null }">
                                                                        {{ item.commentaryText | titlecase}}
                                                                    </span>
                                                                </div>
                                                                <span class="small-data-font mr-1 d-md-none" *ngIf="item.dateLogged !== null && item.dateLogged !== ''">Logged On: {{ formatDate(item.dateLogged) }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-6 md-6">
                    
                                        <p-card>
                                            <div class="grid">
                                                <div class="col-12">
                                                    <h3 class="darkBlue m-0">Previous Insolvency</h3>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.previousBankruptyDetails && companyRiskAssessmentAnalysisData?.previousBankruptyDetails?.length">
                                                    <div class="commentry-timeline">
                                                        <div class="card-row" *ngFor="let previousBankrupty of companyRiskAssessmentAnalysisData?.previousBankruptyDetails">
                                                            <div class="data-font">{{ previousBankrupty?.description }}</div>
                                                            <div class="small-data-font c-red">Registered on: {{ previousBankrupty?.registeredDate }} | Filed On: {{ previousBankrupty?.dateOfStatusFiled }}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.previousBankruptyDetails && !companyRiskAssessmentAnalysisData?.previousBankruptyDetails?.length">
                                                    No
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-6 md-6 customLoader">
                    
                                        <p-card>
                                            <div class="grid"> 
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Related Companies Insolvency</h3>
                                                        </div>
                                                        <div class="col-fixed p-text-left">
                                                            <button pButton type="button" class="small-data-font" label="View Details" [disabled]="(companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] || companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] == '')" (click)="showDetails('Related Companies Insolvency')"></button>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right" *ngIf="(companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] || companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] == '')">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Related Companies', 3, directorShareholdersTabView)" [class.disabled]="!companyRiskAssessmentAnalysisData?.relatedBankruptcyDetails">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.relatedBankruptcyDetails">
                                                    <div class="commentry-timeline">
                                                        <div class="card-row" *ngFor="let relatedCompsBankrupty of companyRiskAssessmentAnalysisData?.relatedBankruptcyDetails">
                                                            <div class="data-font">
                                                                <a [href]="'/company/' + relatedCompsBankrupty?.companyRegistrationNumber + '/' + formatCompanyNameForUrl( relatedCompsBankrupty?.companyName | titlecase )" target="_blank" class="c-blue">
                                                                    {{ relatedCompsBankrupty?.companyName | titlecase }} | {{ relatedCompsBankrupty?.companyRegistrationNumber }}
                                                                </a>
                                                            </div>
                                                            <div class="small-data-font">{{ relatedCompsBankrupty?.description }}</div>
                                                            <div class="small-data-font c-red">Registered on: {{ relatedCompsBankrupty?.registeredDate }} | Filed On: {{ relatedCompsBankrupty?.dateOfStatusFiled }}</div>
                                                        </div> 
                                                    </div>
                                                    <!-- To adjust the grid for the first time when this block of content loaded. -->
                                                    <ng-container *ngIf="relatedCompanyInsolvencyLoader">
                                                        {{ modifyGridLayoutMasonry() }}
                                                    </ng-container>
                                                </div>
                                                <div class="col-12" *ngIf="(companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] && companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'].length == 0) || companyRiskAssessmentAnalysisData['relatedBankruptcyDetails'] == ''">
                                                    No
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                        
                                    <div class="col-6 md-6 customLoader">
                    
                                        <p-card>
                                            <div class="grid ">
                                                <div class="col-12">
                                                    <div class="grid">
                                                        <div class="col-fixed">
                                                            <h3 class="darkBlue m-0">Group Companies Insolvency</h3>
                                                        </div>
                                                        <div class="col-fixed p-text-left">
                                                            <button pButton type="button" class="small-data-font" label="View Details" [disabled]="(companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] || companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] == '')" (click)="showDetails('Group Companies Insolvency')"></button>
                                                        </div>
                                                        <div class="col-fixed ml-auto text-right" *ngIf="(companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] || companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] == '')">
                                                            <a href="javascript:void(0);" class="small-data-font c-green" (click)="goToTab('Group Structure', 0, overviewTabView)" [class.disabled]="!companyRiskAssessmentAnalysisData?.groupcompaniesBankruptcyDetails">See More <i class="material-icons valign-m">navigate_next</i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12" *ngIf="companyRiskAssessmentAnalysisData?.groupcompaniesBankruptcyDetails">
                                                    <div class="commentry-timeline">
                                                        <div class="card-row" *ngFor="let groupCompsBankrupty of companyRiskAssessmentAnalysisData?.groupcompaniesBankruptcyDetails">
                                                            <div class="data-font">
                                                                <a [href]="'/company/' + groupCompsBankrupty?.companyNo + '/' + formatCompanyNameForUrl( groupCompsBankrupty?.companyName | titlecase )" target="_blank" class="c-blue">
                                                                    {{ groupCompsBankrupty?.companyName | titlecase }} | {{ groupCompsBankrupty?.companyNo }}
                                                                </a>
                                                            </div>
                                                            <div *ngFor="let groupBankcruptcyData of groupCompsBankrupty?.bankcruptcyData" [ngClass]="{ 'mb-2': groupCompsBankrupty?.bankcruptcyData?.length > 1 }">
                                                                <div class="small-data-font">{{ groupBankcruptcyData?.description }}</div>
                                                                <div class="small-data-font c-red">Registered on: {{ groupBankcruptcyData?.registeredDate }} | Filed On: {{ groupBankcruptcyData?.dateOfStatusFiled }}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- To adjust the grid for the first time when this block of content loaded. -->
                                                    
                                                </div>
                                                <div class="col-12" *ngIf="(companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] && companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'].length == 0) || companyRiskAssessmentAnalysisData['groupcompaniesBankruptcyDetails'] == '' ">
                                                    No
                                                </div>
                                            </div>
                                        </p-card>
                    
                                    </div>
                                    
                                </div>
                                        
                                <ng-template #noDataBlock>
                                    <span class="data-font">No Data</span>
                                </ng-template>

                                <!-- To adjust the grid for the first time when this block of content loaded. -->
                                <ng-container *ngIf="spinnerBoolean">
                                    {{ modifyGridLayoutMasonry() }}
                                </ng-container>
                
                            </ng-container>
                
                        </p-tabPanel>

                    </ng-container>
            
                    <p-tabPanel header="CCJ's" leftIcon="ui-icon-gavel" *ngIf="companyDetails?.hasCCJInfo || companyDetails?.hasPossibleCCJInfo" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'CCJs' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'CCJs' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCCJInfoTab">
                            
                            <div class="col-12">
                                <strong><i class="ui-icon-info-outline mr-1"></i>Note: If you do not owe the money, you can ask the court to cancel the county court judgement ( CCJ ) or high court judgement. This is known as getting the judgement 'set aside'. You can do this if you did not receive, or did not respond to, the original claim from the court saying you owed the money.</strong>
                            </div>
                            <dg-user-list *ngIf="exactCCJData?.length > 0" [listColumns]="exactCCJDataColumn" [listDataValues]="exactCCJData" [listPage]="true" [thisPage]="'CCJ'"></dg-user-list>
                    
                            <div *ngIf="possibleCCJData?.length > 0" #target class="x-big-data-font c-darkBlue">Possible CCJ's</div>
                            <dg-user-list *ngIf="possibleCCJData?.length > 0" [listColumns]="possibleCCJDataColumn" [listDataValues]="possibleCCJData" [listPage]="true" [thisPage]="'CCJ'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showCCJInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
                    
                    </p-tabPanel>

                    <p-tabPanel header="Commentary" leftIcon="ui-icon-comment" *ngIf="companyDetails?.hasCompanyCommentary" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Commentary' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Commentary' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCommentaryInfoTab">

                            <dg-user-list [listColumns]="companyCommentaryColumn" [listDataValues]="companyCommentryData" [listPage]="true" [thisPage]="'companyCommentary'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showCommentaryInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>

                    <p-tabPanel header="Company Events" leftIcon="ui-icon-calendar" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Company Events' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
                        <ng-container *ngIf="companyEventsData">
                            <dg-user-list *ngIf="companyEventsData !== undefined" [listColumns]="companyEventsColumns" [listDataValues]="companyEventsData" [listPage]="true" [thisPage]="'companyEventsData'"></dg-user-list>
                        </ng-container>
                    </p-tabPanel>

                    <p-tabPanel header="Creditors" leftIcon="ui-icon-people-outline">
                        <p-card *ngIf="creditorsInfoData">
                            <!-- <span class="x-big-data-font c-darkBlue">Directors</span> -->
                            <div class="grid directorCountsCards mt-2 mb-1 d-flex d-lg-small">
                                <div class="col md-3 text-right md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Creditors Total Amount</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Creditors Total Amount</strong></span>
    
                                        <span class="m-0 d-md-min"> - {{ creditorsTotalAmount }}</span>
                                        <h1 class="m-0  d-md-none">£{{ creditorsTotalAmount | number: '1.0-0' }}</h1>
                                    </p-card>
                                </div> 
                                <div class="col md-3 text-right c-green w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Creditors Count</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Creditors Count</strong></span>
    
                                        <span class="m-0 d-md-min"> - {{ creditorsCount }}</span>   
                                        <h1 class="m-0 d-md-none">{{ creditorsCount }}</h1>
                                    </p-card>
                                </div>
                            </div>
                        </p-card>
                        <dg-user-list *ngIf="creditorsInfoData" [listColumns]="creditorsInfoDataColumn" [listDataValues]="creditorsInfoData" [listPage]="true" [thisPage]="'creditorsInfoPage'"></dg-user-list>
                    
                    </p-tabPanel>
            
                    <p-tabPanel header="Bad Debts" leftIcon="ui-icon-people-outline">
                        <p-card *ngIf="debtorsInfoData">
                            <!-- <span class="x-big-data-font c-darkBlue">Directors</span> -->
                            <div class="grid directorCountsCards mt-2 mb-1 d-flex d-lg-small">
                                <div class="col md-3 text-right md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Bad Debts Total Amount</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Bad Debts Total Amount</strong></span>
                                        <span class="m-0 d-md-min"> - {{ BadDebtsTotalAmount }}</span>
                                        <h1 class="m-0  d-md-none">£{{ BadDebtsTotalAmount | number: '1.0-0' }}</h1>
                                    </p-card>
                                </div>
                                <div class="col md-3 text-right c-green w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Bad Debts Count</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Bad Debts Count</strong></span>
    
                                        <span class="m-0 d-md-min"> - {{ BadDebtsCount }}</span>   
                                        <h1 class="m-0 d-md-none">{{ BadDebtsCount }}</h1>
                                    </p-card>
                                </div>
                            </div>
                        </p-card>
                        <dg-user-list *ngIf="debtorsInfoData" [listColumns]="debtorsInfoDataColumn" [listDataValues]="debtorsInfoData" [listPage]="true" [thisPage]="'debtorsInfoPage'"></dg-user-list>
                    
                    </p-tabPanel>

                    <p-tabPanel header="Charges" leftIcon="ui-icon-account-balance" *ngIf="companyDetails?.hasCharges" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Charges' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Charges' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showChargesInfoTab">
                            <dg-user-list *ngIf="companyChargesData" [listColumns]="chargesDataColumn" [listDataValues]="companyChargesData" [listPage]="true" [thisPage]="'charges'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showChargesInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>

                </p-tabView>

            </p-tabPanel>

            <p-tabPanel header="Financial">

                <p-tabView #financialTabView orientation="top" (onChange)="setTabView($event)">

                    <p-tabPanel header="Key Financials" leftIcon="ui-icon-assessment" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )" [selected]="true">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showFinancialInfoTab">
                            
                            <ng-container *ngIf="financialsTabView == 'Financial' || financialsTabView == 'Key Financials'">
            
                                <div *ngIf="finstatutoryChartData" class="grid p-align-stretch vertical-container d-xl-none">
                                    <div class="responsiveCharts" [ngClass]="{'col-6': hasFinancailRatios,'fluidFixedLoader col-12' : (!hasFinancailRatios) }">
                                        <p-card header="Statutory Accounts">
                                            <p-chart type="line" [data]="finstatutoryChartData" [options]="chartOptions" height="350px" [responsive]="true"></p-chart>
                                        </p-card>
                                    </div>
                
                                    <div class="col-6 responsiveCharts" *ngIf="hasFinancailRatios">
                                        <p-card header="Ratios">
                                            <p-chart type="line" [data]="finRatioChartData" [options]="chartOptions2" height="350px" [responsive]="true"></p-chart>
                                        </p-card>
                                    </div>
                                </div>
                
                                <div *ngIf="companyDetails.hasFinances && companyData.statutoryAccounts">
                                    <dg-financial-table-data [showFinancialTableInput]="true" [requiredCompanyName]="companyDetails?.businessName" [financeStatutoryAccounts]="financeData" *ngIf="financeData"></dg-financial-table-data>
                                </div>
                
                                <div class="card" *ngIf="!( companyDetails.hasFinances && companyData.statutoryAccounts )">
                                    <div class="x-big-data-font c-light">No data available</div>
                                </div>
                
                                <div class="col-12">
                                    <span [ngClass]="'c-red'">
                                        <i class="ui-icon-info-outline mr-1"></i>This information is processed by third party, we do not take any responsibility for your financial decision based on information provided. 
                                    </span>
                                </div>
            
                            </ng-container>
            
                        </ng-container>
                        <ng-template #showFinancialInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>
            
                    <p-tabPanel header="Ratios" leftIcon="ui-icon-assessment" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showRatiosInfoTab">
            
                            <ng-container *ngIf="financialsTabView == 'Ratios'">
            
                                <div *ngIf="finstatutoryChartData" class="grid p-align-stretch vertical-container d-xl-none">
            
                                    <ng-container *ngIf="hasFinancailRatios;else noDataBlock">
            
                                        <div class="col-6 responsiveCharts" *ngIf="hasFinancailRatios">
                                            <div class="card">
                                                <p-chart type="line" [data]="finRatioTabChartData?.chartData1" [options]="chartOptions2" height="350px" [responsive]="true"></p-chart>
                                            </div>
                                        </div>
                    
                                        <div class="col-6 responsiveCharts" *ngIf="hasFinancailRatios">
                                            <div class="card">
                                                <p-chart type="line" [data]="finRatioTabChartData?.chartData2" [options]="chartOptions2" height="350px" [responsive]="true"></p-chart>
                                            </div>
                                        </div>
                                    </ng-container>
            
                                    <ng-template #noDataBlock>
                                        <div class="col-12">
                                            <p-card>
                                                <span class="ml-2">No records found.</span>
                                            </p-card>
                                        </div>
                                    </ng-template>
                                    
                                </div>
            
                                <div *ngIf="companyDetails.hasFinances && companyData.statutoryAccounts">
                                    <dg-financial-table-data [showRatiosTableInput]="true" [requiredCompanyName]="companyDetails?.businessName" [financialSimpleAccntsData]="financialDataObject" *ngIf="financeData"></dg-financial-table-data>
                                </div>
                
                                <div class="card" *ngIf="!( companyDetails.hasFinances && companyData.statutoryAccounts )">
                                    <div class="x-big-data-font c-light">No data available</div>
                                </div>
            
                                <div *ngIf="hasFinancailRatios && financeData" class="col-12"> 
                                    <span [ngClass]="'c-red'">
                                        <i class="ui-icon-info-outline mr-1"></i>This information is processed by third party, we do not take any responsibility for your financial decision based on information provided. 
                                        
                                    </span>
                                </div>
            
                            </ng-container>
            
                        </ng-container>
                        <ng-template #showRatiosInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>

                    <p-tabPanel header="Shareholdings" leftIcon="ui-icon-insert-drive-file" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Shareholdings' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Shareholdings' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showShareholdersInfoTab">
                            
                            <div class="card">

                                <h2 class="mt-2 companiesShareHolderHeading">Companies Shareholdings ({{ shareHolderDetailsSummaryColumnsData.length }})</h2>
                            
                                <dg-user-list *ngIf="shareHolderDetailsSummaryColumnsData" [listColumns]="shareHolderDetailsSummaryColumns" [listDataValues]="shareHolderDetailsSummaryColumnsData" [listPage]="true" [thisPage]="'shareHolderDetails'"></dg-user-list>

                            </div>

                        </ng-container>

                    </p-tabPanel>

                    <!-- <ng-container *ngIf="isLoggedIn && ( userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('specialFilter') )"> -->
                        <div addOnAccess="specialFilter">
                            <p-tabPanel header="Innovate Grant" leftIcon="ui-icon-class">
                                <ng-container *ngIf="innovateGrantData">
                                    <dg-user-list *ngIf="innovateGrantData !== undefined && innovateGrantData.length > 0" [listColumns]="innovateGrantColumns" [listDataValues]="innovateGrantData" [listPage]="true" [thisPage]="'innovateGrant'"></dg-user-list>
                                        <div class="card" *ngIf="innovateGrantData.length <= 0">
                                            <h3 class="c-light">No records found.</h3>
                                        </div>
                                </ng-container>
                            </p-tabPanel>
                        </div>
                    <!-- </ng-container> -->

                    <p-tabPanel header="Corporate Land" leftIcon="ui-icon-location-city" *ngIf="companyDetails?.hasLandCorporate" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Corporate Land' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Corporate Land' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCorporateLandInfoTab">
                        
                            <dg-user-list *ngIf="landCorporateInfo" [listColumns]="corporateLandDataColumn" [listDataValues]="landCorporateInfo" [listPage]="true" [sampleLrmPdf]="sampleLrmPdf" [thisPage]="'corporateLand'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showCorporateLandInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>

                    <!-- <ng-container *ngIf="userAuthService.hasAddOnPermission('valuationFilter') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                        <div addOnAccess="valuationFilter">
                            <p-tabPanel header="Business Valuation" leftIcon="ui-icon-av-timer">
    
                                 <!-- Business Valuation Card -->
                                 <div class="card businessValuationCard">
                        
                                    <div class="grid align-items-center mb-2">
                                        <div class="col-fixed">
                                            <h3 class="x-big-data-font blue m-0">Business Valuation</h3>
                                        </div>
                                        <div class="col-fixed" *ngIf="companyValuationsRoeData?.voScore; else notenoughdata">
                                            <span class="highlightedMarkedValue x-big-data-font blue m-0 blueBg">{{ companyValuationsRoeData?.voScore | currency: selectedGlobalCurrency:'symbol':'1.0-0' }}</span>
                                        </div>
                                        <ng-template #notenoughdata>
                                            <div class="col-fixed text-right mr-3 highlightedMarkedValue">Not enough data to calculate</div>
                                        </ng-template>
                                    </div>
                    
                                    <div class="grid">
                                        <div class="col-12 lg-6">
                    
                                            <div class="card onlyLinesAround">
                                                <h4 class="cardTitle blue mt-0">All UK Companies</h4>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Valuation ranking comments</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right" *ngIf="companyValuationsRoeData">{{ returnCommentAccordingToValue( companyValuationsRoeData?.voScore, companyValuationsRoeData?.quartileData[0]?.voScoreQuartile, 'valuation' ) }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Highest company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q4 ? ( companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q4 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Lowest company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q1 ? ( companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q1 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Average company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q3 ? ( companyValuationsRoeData?.quartileData[0]?.voScoreQuartile?.Q3 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                            </div>
                    
                                        </div>
                                        <div class="col-12 lg-6">
                    
                                            <div class="card onlyLinesAround">
                                                <h4 class="cardTitle blue mt-0">Industry Data</h4>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Number of businesses within the industry</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.bussinessInIndustry ? ( companyValuationsRoeData?.bussinessInIndustry | number: '1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Highest company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryVoQuartile?.Q4 ? ( companyValuationsRoeData?.industryVoQuartile?.Q4 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Lowest company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryVoQuartile?.Q1 ? ( companyValuationsRoeData?.industryVoQuartile?.Q1 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                                <div class="grid">
                                                    <div class="col-12 md-6">
                                                        <p class="m-0"><strong>Average company valuation</strong></p>
                                                    </div>
                                                    <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryVoQuartile?.Q3 ? ( companyValuationsRoeData?.industryVoQuartile?.Q3 | currency: selectedGlobalCurrency:'symbol':'1.0-0' ) : '-' }}</div>
                                                </div>
                    
                                            </div>
                    
                                        </div>
                                    </div>
                    
                                </div>
    
                                <!-- Return On Equity Card -->
                         <div class="card businessValuationCard">
                        
                            <div class="grid align-items-center mb-2">
                                <div class="col-fixed">
                                    <h3 class="x-big-data-font blue m-0">Return On Equity</h3>
                                </div>
                                <div class="col-fixed" *ngIf="companyValuationsRoeData?.roePercent; else notenoughdata">
                                    <span class="highlightedMarkedValue x-big-data-font blue m-0 blueBg">{{ companyValuationsRoeData?.roePercent | number: '1.0-0' }}%</span>
                                </div>
                                <ng-template #notenoughdata>
                                    <div class="col-fixed text-right mr-3 highlightedMarkedValue">Not enough data to calculate</div>
                                </ng-template>
                            </div>
            
                            <div class="grid">
                                <div class="col-12 lg-6">
            
                                    <div class="card onlyLinesAround">
                                        <h4 class="cardTitle blue mt-0">All UK Companies</h4>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Return On Equity ranking comments</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right" *ngIf="companyValuationsRoeData">{{ returnCommentAccordingToValue( companyValuationsRoeData?.roePercent, companyValuationsRoeData?.quartileData[0]?.roePercentQuartile, 'ROE' ) }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Highest company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q4 ? ( companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q4 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Lowest company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q1 ? ( companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q1 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Average company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q3 ? ( companyValuationsRoeData?.quartileData[0]?.roePercentQuartile?.Q3 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
                                        
                                    </div>
            
                                </div>
                                <div class="col-12 lg-6">
            
                                    <div class="card onlyLinesAround">
                                        <h4 class="cardTitle blue mt-0">Industry Data</h4>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Number of businesses within the industry</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.bussinessInIndustry ? ( companyValuationsRoeData?.bussinessInIndustry | number: '1.0-0' ) : '-' }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Highest company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryRoeQuartile?.Q4 ? ( companyValuationsRoeData?.industryRoeQuartile?.Q4 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Lowest company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryRoeQuartile?.Q1 ? ( companyValuationsRoeData?.industryRoeQuartile?.Q1 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
            
                                        <div class="grid">
                                            <div class="col-12 md-6">
                                                <p class="m-0"><strong>Average company ROE</strong></p>
                                            </div>
                                            <div class="col-12 md-6 text-right">{{ companyValuationsRoeData?.industryRoeQuartile?.Q3 ? ( companyValuationsRoeData?.industryRoeQuartile?.Q3 | number: '1.0-0' ) + '%' : '-' }}</div>
                                        </div>
            
                                    </div>
            
                                </div>
                            </div>
            
                        </div>
                
                                <ng-container *ngIf="companyValuationsRoeData?.voScore >= 0 || companyValuationsRoeData?.roePercent >= 0; else noVoScoreDataTemplate">
                
                                    <!-- Business Valuation Card For Graphs -->
                                    <div class="card businessValuationCard" *ngIf="companiesValuationsTurnoverChartData && companiesValuationsNetAssetsChartData">
                                        
                                        <ng-container *ngIf="allCompaniesValuationsChartData && allCompaniesRoeChartData; else noHistoryDataTemplate">
                                            <div class="grid">
                                                <div class="col-12 lg-6">
                                                    
                                                    <div class="card onlyLinesAround">
                            
                                                        <h4 class="cardTitle blue mt-0">Business Valuations</h4>
                            
                                                        <p-chart type="bar" [data]="allCompaniesValuationsChartData" [options]="companyValuationsChartOptions" height="350px"></p-chart>
                            
                                                    </div>
                                                    
                                                </div>
                                                <div class="col-12 lg-6">
                            
                                                    <div class="card onlyLinesAround">
                            
                                                        <h4 class="cardTitle blue mt-0">ROE</h4>
                            
                                                        <p-chart type="bar" [data]="allCompaniesRoeChartData" [options]="companyRoeChartOptions" height="350px"></p-chart>
                            
                                                    </div>
                            
                                                </div>
                                            </div>
                                        </ng-container>
                
                                        <ng-template #noHistoryDataTemplate>
                                            <h4 class="cardTitle c-light m-0">No history available to show the Business Valuation and ROE graph.</h4>
                                        </ng-template>
                
                                    </div>
                
                                    <!-- Key Financials History Graphs -->
                                    <div class="card businessValuationCard">
                
                                        <ng-container *ngIf="companiesValuationsTurnoverChartData && companiesValuationsNetAssetsChartData; else noFinancialHistoryDataTemplate">
                                            
                                            <div class="grid">
                                                <div class="col-6 lg-6">
                            
                                                    <div class="card onlyLinesAround">
                            
                                                        <h4 class="cardTitle blue mt-0">Turnover</h4>
                        
                                                        <p-chart type="bar" [data]="companiesValuationsTurnoverChartData" [options]="companyValuationsChartOptions" height="350px" [responsive]="true"></p-chart>
                            
                                                    </div>
                            
                                                </div>
                                                <div class="col-6 lg-6">
                            
                                                    <div class="card onlyLinesAround">
                            
                                                        <h4 class="cardTitle blue mt-0">Net Assets</h4>
                        
                                                        <p-chart type="bar" [data]="companiesValuationsNetAssetsChartData" [options]="companyValuationsChartOptions" height="350px" [responsive]="true"></p-chart>
                            
                                                    </div>
                            
                                                </div>
                                            </div>
                
                                        </ng-container>
                                        
                
                                        <ng-template #noFinancialHistoryDataTemplate>
                                            <h4 class="cardTitle c-light m-0">No financial history available to show the graph.</h4>
                                        </ng-template>
                
                                    </div>
                        
                
                                    <div class="col-12">
                                        <span [ngClass]="'c-red'">
                                            <i class="ui-icon-info-outline mr-1"></i>This information is processed by third party, we do not take any responsibility for your financial decision based on information provided.
                                        </span>
                                    </div>
                
                                </ng-container>
                
                                <ng-template #noVoScoreDataTemplate>
                
                                    <!-- Business Valuation Card For Graphs -->
                                    <div class="card businessValuationCard">
                        
                                        <h4 class="cardTitle c-light m-0">Not enough data to calculate</h4>
                                    
                                    </div>
                
                                </ng-template>
                
                            </p-tabPanel>
                        </div>
                    <!-- </ng-container> -->
            
                    <!-- <p-tabPanel header="Industry Wise Analysis" leftIcon="ui-icon-trending-up" *ngIf="userAuthService.hasAddOnPermission('industryAnalysis') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                    <p-tabPanel header="Industry Wise Analysis" leftIcon="ui-icon-trending-up" addOnAccess="industryAnalysis">
                
                        <dg-industry-analysis-of-company [companyNumber]="companyDetails?.companyRegistrationNumber" [companyIndustry]="companyDetails?.Industries?.SicIndustry_1" [financialOverviewChartData]="{ chartData: finstatutoryChartData, chartOptions: chartOptions }" *ngIf="companyDetails.companyRegistrationNumber"></dg-industry-analysis-of-company>
                    
                    </p-tabPanel>
            
                    <p-tabPanel header="Acquisition & Mergers" leftIcon="ui-icon-view-carousel" *ngIf="companyDetails?.hasAcquiringCompany || companyDetails?.hasAcquiredCompany">
                        
                        <dg-user-list *ngIf="aquisitionMergerData" [listColumns]="aquisitionMergerDataColumn" [listDataValues]="aquisitionMergerData" [listPage]="true" [thisPage]="'aquisitionMergerPage'"></dg-user-list>
            
                    </p-tabPanel>
            
                    <!-- <ng-container *ngIf="userAuthService.hasAddOnPermission('specialFilter') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                        <div addOnAccess="specialFilter">
                            <ng-container *ngIf="companyDetails.patentData && companyDetails.patentData.length > 0">
                                <p-tabPanel header="Patent And Trade" leftIcon="ui-icon-turned-in-not"> 
                                    <dg-user-list *ngIf="patentTradeData !== undefined" [listColumns]="patentTradeColumns"
                                        [listDataValues]="patentTradeData" [listPage]="true" [thisPage]="'patentTradeData'">
                                    </dg-user-list>
                                </p-tabPanel>
                            </ng-container>
                        </div>
                    <!-- </ng-container> -->

                    <!-- <p-tabPanel header="Z Score" leftIcon="ui-icon-info" *ngIf="userAuthService.hasAddOnPermission('industryAnalysis') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                    <p-tabPanel header="Z Score" leftIcon="ui-icon-info" addOnAccess="industryAnalysis">
                            <dg-financial-table-data [zScoreData]="zScoreData" [showRatiosTableInput]="true" [requiredCompanyName]="companyDetails?.businessName" *ngIf="zScoreData"></dg-financial-table-data>
                    </p-tabPanel>

                    <!-- <p-tabPanel header="CAGR" *ngIf="userAuthService.hasAddOnPermission('industryAnalysis') || userAuthService.hasRolePermission( ['Super Admin'] )"> -->
                    <p-tabPanel header="CAGR" addOnAccess="industryAnalysis">
                        <dg-financial-table-data [CAGRdata]="CAGRdata" [showRatiosTableInput]="true" [requiredCompanyName]="companyDetails?.businessName" *ngIf="CAGRdata"></dg-financial-table-data>
                    </p-tabPanel>
                  
                </p-tabView>

            </p-tabPanel>

            <p-tabPanel header="Directors/Shareholders">

                <p-tabView #directorShareholdersTabView orientation="top" (onChange)="setTabView($event)">

                    <p-tabPanel header="Directors" leftIcon="ui-icon-people-outline" [selected]="true">

                        <ng-container *ngIf="companyDetails?.directorsData?.length > 0">
                            
                            <div class="grid directorCountsCards mt-2 mb-1 d-flex d-lg-small">
                                <div class="col md-2 text-right md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Total</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Total</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.total }}</span>
                                        <h1 class="m-0  d-md-none">{{ companydirectorStatusCounts.total }}</h1>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-green w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Active</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Active</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.active }}</span>   
                                        <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.active }}</h1>
                                    </p-card>
                                </div>
                                <div class="col md-3 text-right c-blue w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Secretary</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Secretary</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ companyData["activeSecretary"] }}</span>   
                                        <h1 class="m-0 d-md-none">{{ companyData["activeSecretary"] }}</h1>
                                    </p-card>
                                </div>
                                <div class="col md-2 text-right c-light w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Inactive</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Inactive</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.inactive }}</span>
                                        <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.inactive }}</h1>
                                    </p-card>
                                </div>
                                <div class="col md-3 text-right c-red w-md md-p md-fs">
                                    <p-card styleClass="mt-0">
                                        <span class="mt-0 d-md-min">Resigned</span>
                                        <span class="mt-0 d-md-none boxTextSize"><strong>Resigned</strong></span>
                
                                        <span class="m-0 d-md-min"> - {{ companydirectorStatusCounts.resigned }}</span>
                                        <h1 class="m-0 d-md-none">{{ companydirectorStatusCounts.resigned }}</h1>
                                    </p-card>
                                </div>
                            </div>
                            <dg-user-list *ngIf="showDirector" [listColumns]="directorDataColumn" [listDataValues]="companyDetails?.directorsData" [listPage]="true" [showCheckBox]="true" [thisPage]="'directors'" (messageCommunicator)="messageCommunicator( $event )" (updateTableDataList)="updateTableDataList( $event )" (directorDataInfo)="directorDataInfo( $event )"></dg-user-list>

                        </ng-container>

                        <div class="card" *ngIf="companyDetails?.directorsData?.length == 0">
                            <div class="x-big-data-font c-light">No data available</div>
                        </div>
            
                    </p-tabPanel>
            
                    <p-tabPanel header="PSC" leftIcon="ui-icon-people" *ngIf="companyDetails?.pscDetails?.length > 0 || companyDetails?.pscStatementControlPersonDetails?.length > 0 || companyDetails?.pscSuperSecurePersonDetails?.length > 0">
                        
                        <div *ngIf="companyDetails?.pscDetails?.length > 0" #target class="x-big-data-font c-darkBlue">Person With Significant Control</div>
                        <dg-user-list *ngIf="companyDetails?.pscDetails?.length > 0"  [listColumns]="pscDataColumn" [listDataValues]="companyDetails?.pscDetails" [listPage]="true" [thisPage]="'pscData'"></dg-user-list>
                        
                        <div *ngIf="companyDetails?.pscStatementControlPersonDetails?.length > 0" #target class="x-big-data-font c-darkBlue">Statement</div>
                        <dg-user-list *ngIf="companyDetails?.pscStatementControlPersonDetails?.length > 0"  [listColumns]="pscStatementControlPersonDataColumn" [listDataValues]="companyDetails?.pscStatementControlPersonDetails" [listPage]="true" [thisPage]="'pscStatementControlPersonDetails'" [showExportButton]="false"></dg-user-list>
                        
                        <div *ngIf="companyDetails?.pscSuperSecurePersonDetails?.length > 0" #target class="x-big-data-font c-darkBlue">Protected Person With Significant Control</div>
                        <dg-user-list *ngIf="companyDetails?.pscSuperSecurePersonDetails?.length > 0"  [listColumns]="pscSuperSecurePersonDataColumn" [listDataValues]="companyDetails?.pscSuperSecurePersonDetails" [listPage]="true" [thisPage]="'pscSuperSecurePersonDetails'" [showExportButton]="false"></dg-user-list>
                        
                    </p-tabPanel>
            
                    <p-tabPanel header="Shareholders" leftIcon="ui-icon-supervisor-account" *ngIf="companyDetails?.hasShareHolders" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'Shareholders' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
            
                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Shareholders' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showShareholdersInfoTab">
                            <dg-user-list *ngIf="shareHolderData !== undefined" [listColumns]="shareHolderDataColumn" [listDataValues]="shareHolderData" [listPage]="true" [thisPage]="'shareHolders'"></dg-user-list>
            
                        </ng-container>
                        <ng-template #showShareholdersInfoTab>
                            <p-card>
                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                            </p-card>
                        </ng-template>
            
                    </p-tabPanel>
            
                    <p-tabPanel header="Related Directors" leftIcon="ui-icon-person-add" *ngIf="!(['dissolved','converted/closed','deleted','removed'].includes(companyDetails.companyStatus))">
                    
                        <dg-record-list [listColumns]="relatedDirectorsDataColumn" [listDataValues]="relatedDirectors" [relatedDirectorsAndCompaniesCmpNo]="companyData.companyRegistrationNumber" [searchTotalCount]="relatedDirectorsAndCompaniesCount" [relCompDirDataValueStatus]= "relCompDirDataValueStatus" [thisPage]="'related_Directors'"></dg-record-list>
                    </p-tabPanel>

                    <p-tabPanel header="Related Companies" leftIcon="ui-icon-domain"  *ngIf="!(['dissolved','converted/closed','deleted','removed'].includes(companyDetails.companyStatus))">
                        
                        <dg-record-list [listColumns]="relatedCompaniesDataColumn" [listDataValues]="relatedCompanies" [relatedDirectorsAndCompaniesCmpNo]="companyData.companyRegistrationNumber" [searchTotalCount]="relatedDirectorsAndCompaniesCount" [relCompDirDataValueStatus]= "relCompDirDataValueStatus" [thisPage]="'related_Companies'"></dg-record-list>
                    </p-tabPanel>

                </p-tabView>

            </p-tabPanel>

            <p-tabPanel header="Documents" leftIcon="ui-icon-description">
                <dg-user-list  [listColumns]="documentDataColumn" [listDataValues]="companyDocuments?.items" [listPage]="true"
                    [thisPage]="'companyDocumentsPage'" *ngIf="companyDocuments && companyDocuments.items !== undefined; else noData"></dg-user-list>

                    <ng-template #noData>
                        <div class="card">
                        <h3>No Documents/records Available.</h3> 
                        </div>
                    </ng-template>

            </p-tabPanel>

            <p-tabPanel header="News Feeds" leftIcon="ui-icon-dvr" [disabled]="!isLoggedIn || !( userAuthService.hasFeaturePermission( 'News Feeds' ) || userAuthService.hasRolePermission( ['Super Admin'] ) )">
                <ng-container *ngIf="( userAuthService.hasFeaturePermission( 'News Feeds' ) || userAuthService.hasRolePermission( ['Super Admin'] ) ) && callNewsFeeds; else showNewsFeedInfoTab">
                    <dg-news-feeds *ngIf="companyDetails?.businessName" [companyNumber]="companyDetails?.companyRegistrationNumber" [companyName]="companyDetails?.businessName"></dg-news-feeds>
                </ng-container>
                <ng-template #showNewsFeedInfoTab>
                    <p-card>
                        <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                    </p-card>
                </ng-template>
            </p-tabPanel>

        </p-tabView>

    </ng-container>

</div>
<!-- Tab View End -->

<!-- Director Detail Start -->
<ng-container *ngIf="thisPage == 'directorISchangedToDirectorDetailPage'">
    <!-- <div class="grid mb-3 pt-0 pt-md-3">
        <div class="col">
            <div class="grid">
                <div class="col-fixed pt-0 pr-0">
                    <img src="https://img.icons8.com/ultraviolet/40/000000/person-male.png" alt="Company Logo" />
                </div>
                <div class="col-fixed">
                    <h1 class="cardHeaderTitle mt-0"><strong>{{ directorName | titlecase }}</strong>
                    </h1>   
                </div>
            </div>
        </div>
        <div class="col-fixed">
            <ng-container *ngIf="directorDetailData.length != 0">

                <button pButton type="button" *ngIf="!directorInMonitor" label="Monitor" icon="pi pi-eye" class="p-button-sm p-button-rounded" (click)="addDirectorToWatchList( directorDetailData[0].directorData )"></button>
                <button pButton type="button" *ngIf="directorInMonitor" label="Monitor" icon="pi pi-eye-slash" class="p-button-sm p-button-rounded" (click)="removeDirectorFromWatchList( directorDetailData[0].directorData )"></button>

            </ng-container>
            <dg-director-pdf-report *ngIf="directorDetailsCompanySummaryData.length" [directorReportDataParams]="{ directorName: directorName, directorDetailData: directorDetailData, directorStatusCounts: directorshipsCounts, directorsAllOccupations: directorsAllOccupations, directorDetailsCompanySummaryData: directorDetailsCompanySummaryData, directorContactsData: directorContactsData }" (messageCommunicator)="getMessage($event)"></dg-director-pdf-report>
        </div>
    </div> -->

    <!-- Disqualified Warning Block -->

    <div class="warningBlock" *ngIf="directorDetailData.length != 0 && directorDetailData[0].directorData && directorDetailData[0].directorData.disqualificationDetails">
        <p>
            <i class="pi pi-exclamation-triangle warningRedIcon"></i>
            Disqualified for <strong>{{ directorDetailData[0]?.directorData?.disqualificationDetails['DSYR'] }} year(s)</strong> from <strong>{{ commonService.changeToDate( directorDetailData[0]?.directorData?.disqualificationDetails['SDATE'] ) | date: 'dd-MM-yyyy' }}</strong> to <strong>{{ commonService.changeToDate( directorDetailData[0]?.directorData?.disqualificationDetails['EDATE'] ) | date: 'dd-MM-yyyy' }}</strong> under section of act <strong>{{ directorDetailData[0]?.directorData?.disqualificationDetails['SACT'] }}</strong>
        </p>
    </div>
    <!-- End Disqualified Warning Block -->

    <!-- <div class="grid" *ngIf="directorshipsCounts.length != 0">

        <div class="col-6 md:col-5 lg:col-5">

            <div class="grid">

                <div class="col-6 text-center">
                    <div class="card">
                        <p class="mt-0"><strong>Total</strong></p>
                        <h1 class="my-2 p-font-bold">{{ directorshipsCounts && directorshipsCounts[0]?.total }}</h1>
                    </div>
                </div>

                <div class="col-6 text-center green">
                    <div class="card">
                        <p class="mt-0"><strong>Active</strong></p>
                        <h1 class="my-2 p-font-bold">{{ directorshipsCounts && directorshipsCounts[0]?.active_count }}</h1>
                    </div>
                </div>

                <div class="col-6 text-center red">
                    <div class="card">
                        <p class="mt-0"><strong>Resigned</strong></p>
                        <h1 class="my-2 p-font-bold">{{ directorshipsCounts && directorshipsCounts[0]?.resigned_count }}</h1>
                    </div>
                </div>

                <div class="col-6 text-center c-light">
                    <div class="card">
                        <p class="mt-0"><strong>Inactive</strong></p>
                        <h1 class="my-2 p-font-bold">{{ directorshipsCounts && directorshipsCounts[0]?.non_active_count }}</h1>
                    </div>
                </div>

            </div>

        </div>

        <div class="col-6 md:col-5 lg:col-7">

            <div class="card">
                
                <div class="grid">

                    <div class="col-6 md:col-4 lg:col-2">
                        <p class="m-0"><strong>Nationality: </strong></p>
                    </div>

                    <div class="col-6 md:col-8 lg:col-10">
                        <p class="m-0">
                            <span *ngIf="directorDetailData[0]?.directorData?.detailedInformation?.countryCode; else noDataBlock">
                                <img src="assets/utilities/flags/flag_placeholder.png" alt="Flag" class="flag flag-{{ directorDetailData[0]?.directorData?.detailedInformation?.countryCode }}">
                            </span>
                            <ng-container *ngIf="directorDetailData[0]?.directorData?.detailedInformation && directorDetailData[0]?.directorData?.detailedInformation?.nationality; else noDataBlock">
                                {{ directorDetailData[0]?.directorData?.detailedInformation?.nationality | titlecase }}
                            </ng-container>
                            <ng-template #noDataBlock>-</ng-template>
                        </p>
                    </div>
    
                </div>

                <div class="grid">

                    <div class="col-6 md:col-3 lg:col-2">
                        <p class="m-0"><strong>Date Of Birth: </strong></p>
                    </div>

                    <div class="col-6 md:col-9 lg:col-10">
                        <p class="m-0">
                            <ng-container *ngIf="directorDetailData[0]?.directorData?.date_of_birth; else noDataBlock">
                                {{ monthsEnum[ directorDetailData[0]?.directorData?.date_of_birth?.month * 1 ] + ', ' || '-' }}{{ ' ' + directorDetailData[0]?.directorData?.date_of_birth?.year }}
                                <span class="small-data-font ml-2">({{ directorsAge(directorDetailData[0]?.directorData?.date_of_birth) }} Years Old)</span>
                            </ng-container>
                            <ng-template #noDataBlock>-</ng-template>
                        </p>
                    </div>
    
                </div>

                <div class="grid">

                    <div class="col-6 md:col-3 lg:col-2">
                        <p class="m-0"><strong>Address: </strong></p>
                    </div>

                    <div class="col-6 md:col-9 lg:col-10">
                        <p class="m-0">{{ directorDetailData[0]?.directorData?.address }}</p>
                    </div>
    
                </div>

                    <div class="grid" addOnAccess="contactInformation">

                        <div class="col-6 md:col-3 lg:col-2">
                            <p class="m-0"><strong>Social Media Links: </strong></p>
                        </div>

                        <div class="col-6 md:col-9 lg:col-10">

                            <ng-container *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation') && ![ subscribedPlanModal['Compliance_Plan'] ].includes( userDetails?.planId ); else otherPlan">

                                <p class="m-0">
                                    <span class="featuredLinks">

                                        <ng-container *ngIf="directorContactsData?.linkedin_url && directorContactsData?.linkedin_url !== '0' && directorContactsData?.linkedin_url !== ' ' && directorContactsData?.linkedin_url !== 'null'; else noLinkedInURL">
                                            <a class="pointer" target="_blank" [href]="directorContactsData?.linkedin_url">
                                                <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path
                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                </svg>
                                            </a>
                                        </ng-container>

                                        <ng-template #noLinkedInURL>
                                            <a class="pointer" href="javascript: void(0);" (click)="linkedInUrlForDirector( directorDetailData[0].directorData?.detailedInformation.fullName ,directorDetailData[0]?.directorData?.directorPnr  )">
                                                <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path
                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                </svg>
                                            </a>
                                        </ng-template>

                                    </span>
                                </p>

                            </ng-container>

                            <ng-template #otherPlan>
                                <p>To enable this feature, please mail to: <a class="c-blue" href="mailto:grow@datagardener.com">grow&#64;datagardener.com</a></p>
                            </ng-template>

                        </div>
        
                    </div>
            </div>

            <div class="card" *ngIf="directorsAllOccupations.length">

                <div class="grid">

                    <div class="col-fixed">
                        <p class="m-0"><strong>All Occupations: </strong></p>
                    </div>

                    <div class="col-fixed">
                        <p class="m-0">
                            <ng-container *ngFor="let directorOccupation of directorsAllOccupations; let i = index">
                                {{ directorOccupation | titlecase }}<ng-container *ngIf="directorsAllOccupations.length > 1 && (directorsAllOccupations.length - 1) !== i">, </ng-container>
                            </ng-container>
                        </p>
                    </div>
    
                </div>
            </div>           
        </div>

    </div> -->
    
    <!-- <ng-container *ngIf="isLoggedIn && [ 'director' ].includes(thisPage)">
        <div class="col-12">
            <div class="p-d-flex p-flex-column">
                <div class="p-d-flex p-ai-center p-flex-wrap">
                    <div class="roundedColoredChipLabel bg-white c-green  ">
                        <p-chip tooltipPosition="top">Companies Summary: {{ totalNumOfRecords  }} </p-chip>
                    </div>
                    <div class="roundedColoredChipLabel bg-white c-green" *ngIf= "possibleCompaniesSummaryData.length">
                        <p-chip tooltipPosition="top">Possible Companies Summary: {{ possibleCompaniesSummaryData.length  }}</p-chip> 
                    </div>
                    <div class="roundedColoredChipLabel bg-white c-green" *ngIf= "directorDetailsShareholdingsSummaryData.length">  
                        <p-chip tooltipPosition="top">Shareholdings Summary: {{ directorDetailsShareholdingsSummaryData.length }}</p-chip>
                    </div>
                    <div class="roundedColoredChipLabel bg-white c-green" *ngIf= "possibleDirectorDetailsShareholdingsSummaryData.length" >
                        <p-chip tooltipPosition="top">Possible Shareholdings Summary: {{ possibleDirectorDetailsShareholdingsSummaryData.length  }}</p-chip>
                    </div>
                </div>
            </div>
        </div>
    </ng-container> -->
   
    <p-tabView *ngIf="thisPage == 'directorISchangedToDirectorDetailPage'" (onChange)="possibleCompaniesSummary($event)">
        <ng-container *ngIf="directorDetailData.length != 0">

            <p-tabPanel header="Companies Summary" *ngIf="directorDetailsCompanySummaryData"  [selected]="true">

                <div class="directorDetailsCompanySummaryBlock">
                    
                    <dg-user-list [listColumns]="directorDetailsCompanySummaryColumns" [listDataValues]="directorDetailsCompanySummaryData" [companyLogo]="companyLogo" [listPage]="true" [thisPage]="'directorDetails'" [tableName]="'companiesSummaryTable'" [totalNumOfRecords]="totalNumOfRecords" (updateTableDataList)="updateTableDataList( $event )" [serverSidePaginator]="true" [directorFailureData]="directorFailureData"></dg-user-list>
            
                </div>

                <ng-container *ngFor="let dirDetailData of directorDetailData">
                    <div class="directorSection">
                        <div class="grid mt-2">
            
                            <div class="col-6 md-6"> 
                                <div class="card">
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company Name</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="x-big-data-font">
                                                <a class="cName" target="_blank"
                                                    [href]="'/company/' + dirDetailData?.CompanyNumber + '/' + formatCompanyNameForUrl(dirDetailData?.CompanyOriginalName | titlecase)">{{ dirDetailData?.CompanyOriginalName | uppercase }}</a>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company No.</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="x-big-data-font">{{ dirDetailData?.CompanyNumber | uppercase }}</span>
                                        </div>
                                    </div>
                                    
                                    <div addOnAccess="contactInformation">
                                        <ng-container *ngIf="dirDetailData?.companyContactDetails">
                                            <div class="grid mb-3">
                                                <div class="col-4 md-4">
                                                    <span class="heading-font">Social Profiles</span>
                                                </div>
                                                <div class="col-8 md-8">

                                                    <ng-container *ngIf="![ subscribedPlanModal['Compliance_Plan'] ].includes( userDetails?.planId ); else otherPlan">
                                                        
                                                        <div class="social-link">
                                                            <a href="javascript: void(0);"
                                                                (click)="checkSubscriptionAuth( ( userAuthService.hasAddOnPermission('contactInformation') || userAuthService.hasRolePermission( ['Super Admin'] ) ), GoogleURLCompanyURL(dirDetailData?.CompanyOriginalName) )">
                                                                <img tooltip="Search on google" src="https://img.icons8.com/color/48/000000/google-logo.png"
                                                                    id="google-image">
                                                            </a>
                                                            <ng-container
                                                                *ngIf="dirDetailData?.companyContactDetails && dirDetailData?.companyContactDetails?.linkedin_url && dirDetailData?.companyContactDetails?.linkedin_url !== '0' && dirDetailData?.companyContactDetails?.linkedin_url !== ' ' && dirDetailData?.companyContactDetails?.linkedin_url !== 'null'; else noLinkedInURL">
                                                                <a href="javascript: void(0);"
                                                                    (click)="checkSubscriptionAuth( isAuthCheckOnClick, dirDetailData?.companyContactDetails?.linkedin_url )">
                                                                    <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                        <path
                                                                            d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 6.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                    </svg>
                                                                </a>
                                                            </ng-container>
                                                            <ng-template #noLinkedInURL>
                                                                <a href="javascript: void(0);"
                                                                    (click)="checkSubscriptionAuth( isAuthCheckOnClick, linkedinURLForCompany(dirDetailData?.CompanyOriginalName) )">
                                                                    <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                        <path
                                                                            d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                    </svg>
                                                                </a>
                                                            </ng-template>
                                                        </div>

                                                    </ng-container>

                                                    <ng-template #otherPlan>
                                                        <p>To enable this feature, please mail to: <a class="c-blue" href="mailto:grow@datagardener.com">grow&#64;datagardener.com</a></p>
                                                    </ng-template>

                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
            
                                    <!-- Director data start -->
                                    <span class="x-big-data-font c-darkBlue">Director's Data
                                        <button pButton type="button" icon="pi pi-pencil" class="ml-2 mb-0 p-button-rounded p-button p-button-lg" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="[ subscribedPlanModal['Valentine_Special'], subscribedPlanModal['Compliance_Plan'] ].includes( userDetails?.planId ) ? showUpgradePlanDialog = true : onDirectorUpdateInfo(dirDetailData)" *ngIf="userAuthService.hasAddOnPermission('contactInformation') && dirDetailData?.CompanyNumber != '05109207'">
                                            <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService?.featureLockIconPath }}"></span>
                                        </button>
                                    </span>
                                    <div class="grid mb-2 mt-1">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Status</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span [ngClass]="{ 'green': dirDetailData?.directorData?.status != undefined &&  dirDetailData?.directorData?.status == 'active', 'c-light': dirDetailData?.directorData?.status != undefined &&  dirDetailData?.directorData?.status == 'inactive', 'red': dirDetailData?.directorData?.status != undefined &&  dirDetailData?.directorData?.status == 'resigned'}" class="status mr-3">{{ dirDetailData?.directorData?.status | titlecase }}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Appointed on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData?.fromDate | date: 'dd-MM-yyyy' }}</span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.directorData?.toDate" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Resigned on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData?.toDate | date: 'dd-MM-yyyy' }}</span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.directorData?.date_of_birth" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Birth</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ monthsEnum[ dirDetailData?.directorData?.date_of_birth?.month * 1 ] + ', ' || '-' }}{{ ' ' + dirDetailData?.directorData?.date_of_birth?.year }}
                                            </span>
                                            <span
                                            class="small-data-font ml-2">({{ directorsAge(dirDetailData?.directorData?.date_of_birth) }} Years Old)</span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.directorData?.address" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Address</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">
                                                {{ dirDetailData?.directorData?.address }}
                                            </span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.directorData?.directorJobRole" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Occupation</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData?.directorJobRole | titlecase }}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Role</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData && dirDetailData?.directorData?.directorRole ? ( dirDetailData?.directorData?.directorRole | titlecase ) : "-" }}</span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.directorData?.directorQualifications" class="grid mb-3">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Qualifications</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData?.directorQualifications | titlecase }}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-3" *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Email</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <ng-container *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId ); else otherPlansForEmail">
                                                <span class="lockIconForFilters"><img src="{{ userAuthService?.featureLockIconPath }}"></span> 
                                            </ng-container>
                                            <ng-template #otherPlansForEmail>
                                                <span class="data-font">{{ dirDetailData?.directorData && dirDetailData?.directorData?.email ? (dirDetailData?.directorData?.email | lowercase) : "-" }}</span>
                                            </ng-template>
                                        
                                        </div>
                                    </div>
                                    <!-- <div class="grid mb-3">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Job Title</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.directorData && dirDetailData?.directorData?.jobTitle ? (dirDetailData?.directorData?.jobTitle | titlecase) : "-"}}</span>
                                        </div>
                                    </div> -->
                                    <!-- <div class="grid mb-3"  *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation') "> -->
                                    <!-- <div class="grid mb-3" addOnAccess="contactInformation">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Contact Number</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <ng-container *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId ); else otherPlansForContact">
                                                <span class="lockIconForFilters"><img src="{{ userAuthService?.featureLockIconPath }}"></span> 
                                            </ng-container>
                                            <ng-template #otherPlansForContact>
                                                <span class="data-font">{{ dirDetailData?.directorData && dirDetailData?.directorData?.tel_1 ? (dirDetailData?.directorData?.tel_1 | titlecase) : "-"}}</span>
                                            </ng-template>
                                        </div>
                                    </div> -->
                               
                                    <!-- director data ends -->
            
                                    <!-- company data starts -->
                                    <!-- <span class="x-big-data-font c-darkBlue">Company's Data</span>
                                    <div class="grid mb-2 mt-1">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Status</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span
                                            [ngClass]="{ 'green':  dirDetailData?.CompanyStatus == 'live' || dirDetailData?.CompanyStatus == 'administration order', 'c-orange':  dirDetailData?.CompanyStatus == 'in liquidation' || dirDetailData?.CompanyStatus == 'removed', 'c-red': dirDetailData?.CompanyStatus == 'converted/closed' || dirDetailData?.CompanyStatus == 'dissolved' || dirDetailData?.CompanyStatus == 'in administration' || dirDetailData?.CompanyStatus == 'in receivership / administration' ||  dirDetailData?.CompanyStatus == 'voluntary arrangement' || dirDetailData?.CompanyStatus == 'in receivership' || dirDetailData?.CompanyStatus == 'deleted'}"
                                            class="status mr-3">{{ dirDetailData?.CompanyStatus | titlecase }}
                                            </span>
                                        </div>
                                    </div> -->
                                   
                                    <!-- <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company Category</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.CompanyCategory | titlecase }}</span><br>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Incorporated on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ formatDate(dirDetailData?.IncorporationDate) }}</span><span
                                                class="small-data-font ml-2">({{ calculateAge(dirDetailData?.IncorporationDate) }} Years
                                                Old)</span>
                                        </div>
                                    </div>
                                    <div *ngIf="dirDetailData?.DissolutionDate" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Dissolved on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ formatDate(dirDetailData?.DissolutionDate) }}</span><span
                                                class="small-data-font ml-2">({{ calculateAge(dirDetailData?.DissolutionDate) }} Years
                                                Ago)</span>
                                        </div>
                                    </div>
                                    <div *ngIf="getSICCodeInArrayFormat(dirDetailData?.Sic_Code_07).length" class="grid mb-4">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Sic Code</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span *ngFor="let item of getSICCodeInArrayFormat(dirDetailData?.Sic_Code_07)"
                                                class="data-font d-block">{{ item | titlecase }}</span>
                                        </div>
                                    </div> -->
                                    <!-- <div *ngIf="dirDetailData?.previousNames?.length > 0">
                                        <div class="grid">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Previously known as</span><br>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="heading-font">Changed on</span><br>
                                            </div>
                                        </div>
                                    
                                        <div class="grid" *ngFor="let item of dirDetailData?.previousNames">
                                            <div class="col-4 md-4">
                                                <span class="data-font d-block">{{ item.name | titlecase }}</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font d-block">{{ parseDate(item.dateChanged) }}</span>
                                            </div>
                                        </div>
                                    </div> -->
                                                
                                    <!-- <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Account Category</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ dirDetailData?.accountsType | titlecase }}</span><br>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Account</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">Last accounts filed on
                                                {{formatDate(dirDetailData?.accountsFilingDate)}}</span><br>
                                            <span class="data-font">Last accounts made up to
                                                {{ formatDate(dirDetailData?.accountsMadeUpDate) }}</span><br>
                                            <span class="data-font">Next Due Date is
                                                {{ formatDate(dirDetailData?.accountsDueDate) }}</span>
                                        </div>
                                    </div>
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Confirmation Statement</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">Last made update on
                                                {{ formatDate(dirDetailData?.latestAnnualReturnDate) }}</span><br>
                                            <span class="data-font">Next Due Date is
                                                {{ dirDetailData?.nextAnnualReturnDate!= null ? formatDate(dirDetailData?.nextAnnualReturnDate) : '(N/A)' }}</span>
                                        </div>
                                    </div> -->
                                    <!-- Company data ends -->
            
                                </div>
                            </div>
            
                            <div class="col-6 md-6">
                                <div class="card financialCard" *ngIf="dirDetailData?.hasFinances">
            
                                    <ng-container *ngIf="isLoggedIn; else showWithoutLoginDirectorFinancialModal">
                                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCommentaryInfo">
                                            <div class="grid align-items-center">
                                                <div class="col-fixed x-big-data-font c-darkBlue">
                                                    <div>Financial Performance</div>
                                                </div>
                                            
                                                <div class="col-fixed small-data-font text-right ml-auto">
                                                    <div class="in-block">
                                                        <span class="chartLegendTriggerBox"></span>
                                                        Click to show/hide individual elements
                                                    </div>
                                                </div>
                                            </div>
                
                                            <p-chart type="line" [data]="dirDetailData?.financeChartData" height="350px" [options]="chartOptions" [plugins]="ChartDataLabelsPlugin"></p-chart>
                
                                            <div class="financeOverviewGrid bg-grey mt-2">

                                                <div class="grid m-0">

                                                    <div class="col-6 xl-6">

                                                        <div class="card" *ngIf="dirDetailData?.financeTurnoverData">

                                                            <div class="mb-2">Turnover</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] !== null; else noDataBlock">
                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] < 0; else turnoverPositiveValue1">(&pound; {{ dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #turnoverPositiveValue1><span class="c-green">&pound; {{ dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>
                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                                    <ng-container *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] > dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] && dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] < dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] && dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] == dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] || dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] == dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] == 0 && dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] > dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ], dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ], dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ], dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ], dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 1 ] ) ?  '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] < 0 && dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] !== 0">(&pound; {{ dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] > 0 && dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] !== 0">&pound; {{ dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTurnoverData[ dirDetailData?.financeTurnoverData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 xl-6">
                                                        <div class="card" *ngIf="dirDetailData?.financeTotalAssetsData">
                                                            <div class="mb-2">Total Assets</div>
                                                            <div class="grid justify-content-between align-items-end"
                                                                *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] !== null; else noDataBlock">
                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] < 0; else totalAssetsPositiveValue1">(&pound; {{ dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #totalAssetsPositiveValue1><span class="c-green">&pound; {{ dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>
                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                                    <ng-container *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] > dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] && dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] < dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] && dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] == dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] || dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] == dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] == 0 && dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] > dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ], dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ], dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ], dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ], dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] < 0 && dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] !== 0">(&pound; {{ dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] > 0 && dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] !== 0">&pound; {{ dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTotalAssetsData[ dirDetailData?.financeTotalAssetsData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 xl-6">

                                                        <div class="card" *ngIf="dirDetailData?.financeTotalLiabilitiesData">

                                                            <div class="mb-2">Total Liabilities</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] !== null; else noDataBlock">

                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] < 0; else totalLiabilitiesPositiveValue1">(&pound; {{ dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #totalLiabilitiesPositiveValue1><span class="c-green">&pound; {{ dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>

                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">

                                                                    <ng-container *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] > dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] && dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] < dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] && dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-green"></i>
                                                                    </ng-container>

                                                                    <ng-container *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] == dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] || dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] == dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] == 0 && dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] > dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-red"></i>
                                                                        </ng-container>
                                                                    </ng-container>

                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ], dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ], dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ], dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ], dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>

                                                                    <div>
                                                                        <span class="c-red" *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] < 0 && dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] !== 0">(&pound; {{ dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] > 0 && dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] !== 0">&pound; {{ dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeTotalLiabilitiesData[ dirDetailData?.financeTotalLiabilitiesData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 xl-6">
                                                        <div class="card" *ngIf="dirDetailData?.financeNetWorthData">
                                                            <div class="mb-2">Net Worth</div>
                                                            <div class="grid justify-content-between align-items-end"
                                                                *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] !== null; else noDataBlock">
                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] < 0; else netWorthPositiveValue1">(&pound; {{ dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #netWorthPositiveValue1><span class="c-green">&pound; {{ dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>
                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                                    <ng-container *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] > dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] && dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] < dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] && dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] == dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] || dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] == dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] == 0 && dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] > dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ], dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ], dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ], dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ], dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] < 0 && dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] !== 0">(&pound; {{ dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] > 0 && dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] !== 0">&pound; {{ dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="dirDetailData?.financeNetWorthData[ dirDetailData?.financeNetWorthData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <ng-template #noDataBlock>
                                                    <span class="x-big-data-font">No Data</span>
                                                </ng-template>
                                            </div>
                                        </ng-container>
                                        <ng-template #showCommentaryInfo>
                                            <span class="x-big-data-font c-darkBlue">
                                                <div class="text-center">
                                                    Financial Performance
                                                </div>
                                            </span>
                                            <ng-container *ngIf="userAuthService.hasRolePermission( ['Client User'] ); else otherThanClientUserLoggedIn">
                                                <div class="text-center mt-3">
                                                    To enable this feature, please contact your Administrator.
                                                </div>
                                            </ng-container>
                                            <ng-template #otherThanClientUserLoggedIn>
                                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                                            </ng-template>
                                        </ng-template>
                                    </ng-container>
                                    <ng-template #showWithoutLoginDirectorFinancialModal>
                                        <span class="x-big-data-font c-darkBlue">
                                            <div class="text-center">
                                                Financial Performance
                                            </div>
                                        </span>
                                        <dg-without-login-modal></dg-without-login-modal>
                                    </ng-template>
            
                                </div>
            
                            </div>
            
                        </div>                
                    </div>
                </ng-container>

            </p-tabPanel>

            <p-tabPanel header="Possible Companies Summary" *ngIf="possibleCompaniesSummaryData && possibleCompaniesSummaryData.length" >

                <div class="directorDetailsCompanySummaryBlock">
                
                    <ng-container *ngIf="isLoggedIn; else showWithoutLoginDirectorFinancialModal">
                
                        <dg-user-list [listColumns]="directorDetailsCompanySummaryColumns" [listDataValues]="possibleCompaniesSummaryData" [listPage]="true" [thisPage]="'directorDetails'" [tableName]="'possibleCompanyTable'"></dg-user-list>
        
                    </ng-container>
                    <ng-template #showWithoutLoginDirectorFinancialModal>
                        <div class="card">
                            <dg-without-login-modal></dg-without-login-modal>
                        </div>
                    </ng-template>
                
                </div>

                <ng-container *ngFor="let possibleCompaniesForDirector of possibleCompanies">
                    <div class="directorSection">
                        <div class="grid mt-2">

                            <div class="col-6 md-6">

                                <div class="card">

                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company Name</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="x-big-data-font">
                                                <a class="cName" target="_blank"
                                                    [href]="'/company/' + possibleCompaniesForDirector?.CompanyNumber + '/' + formatCompanyNameForUrl(possibleCompaniesForDirector?.CompanyOriginalName | titlecase)">{{possibleCompaniesForDirector?.CompanyOriginalName | uppercase}}</a>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company No.</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="x-big-data-font">{{ possibleCompaniesForDirector?.CompanyNumber | uppercase }}</span>
                                        </div>
                                    </div>

                                    <!-- <ng-container *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                        <div class="grid mb-3" addOnAccess="contactInformation">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Social Profiles</span>
                                            </div>
                                            <div class="col-8 md-8">

                                                <ng-container *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation') && ![ subscribedPlanModal['Compliance_Plan'] ].includes( userDetails?.planId ); else otherPlan">

                                                    <div class="social-link">
                                                        <a href="javascript: void(0);" (click)="checkSubscriptionAuth( isAuthCheckOnClick, GoogleURLCompanyURL(possibleCompaniesForDirector?.CompanyOriginalName) )">
                                                            <img tooltip="Search on google"
                                                                src="https://img.icons8.com/color/48/000000/google-logo.png" id="google-image">
                                                        </a>
                                                        <ng-container *ngIf="possibleCompaniesForDirector?.companyContactDetails && possibleCompaniesForDirector?.companyContactDetails?.linkedin_url && possibleCompaniesForDirector?.companyContactDetails?.linkedin_url !== '0' && possibleCompaniesForDirector?.companyContactDetails?.linkedin_url !== ' ' && possibleCompaniesForDirector?.companyContactDetails?.linkedin_url !== 'null'; else noLinkedInURL">
                                                            <a href="javascript: void(0);" (click)="checkSubscriptionAuth( isAuthCheckOnClick, possibleCompaniesForDirector?.companyContactDetails?.linkedin_url )">
                                                                <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                    <path
                                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                </svg>
                                                            </a>
                                                        </ng-container>
                                                        <ng-template #noLinkedInURL>
                                                            <a href="javascript: void(0);" (click)="checkSubscriptionAuth( isAuthCheckOnClick, linkedinURLForCompany(possibleCompaniesForDirector?.CompanyOriginalName) )">
                                                                <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                    <path
                                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                </svg>
                                                            </a>
                                                        </ng-template>
                                                       
                                                    </div>

                                                </ng-container>

                                                <ng-template #otherPlan>
                                                    <p>To enable this feature, please mail to: <a class="c-blue" href="mailto:grow@datagardener.com">grow&#64;datagardener.com</a></p>
                                                </ng-template>


                                            </div>
                                        </div>
                                    <!-- </ng-container> -->

                                    <span class="x-big-data-font c-darkBlue">Director's Data
                                        <button pButton type="button" icon="pi pi-pencil" class="ml-2 mb-0 p-button-rounded p-button p-button-lg" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="[ subscribedPlanModal['Valentine_Special'], subscribedPlanModal['Compliance_Plan'] ].includes( userDetails?.planId ) ? showUpgradePlanDialog = true : onDirectorUpdateInfo(dirDetailData)" *ngIf="dirDetailData?.CompanyNumber != '05109207'">
                                            <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService?.featureLockIconPath }}"></span>
                                        </button>
                                    </span>

                                    <div class="grid mb-2 mt-1">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Status</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span [ngClass]="{ 'green': [ 'active' ].includes( possibleCompaniesForDirector?.directorData?.status ), 'c-red': [ 'resigned' ].includes( possibleCompaniesForDirector?.directorData?.status ), 'c-grey': ['inactive'].includes( possibleCompaniesForDirector?.directorData?.status ) }" class="status mr-3">{{ possibleCompaniesForDirector?.directorData?.status | titlecase }}</span>
                                        </div>
                                    </div>

                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Appointed on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.fromDate | date: 'dd-MM-yyyy' }}</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.directorData?.toDate" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Resigned on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.toDate | date: 'dd-MM-yyyy' }}</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.directorData?.date_of_birth" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Birth</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ monthsEnum[ possibleCompaniesForDirector?.directorData?.date_of_birth?.month * 1 ] + ', ' || '-' }}{{ ' ' + possibleCompaniesForDirector?.directorData?.date_of_birth?.year }}</span>
                                            <span class="small-data-font ml-2">({{ directorsAge(possibleCompaniesForDirector?.directorData?.date_of_birth) }} Years Old)</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.directorData?.address" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Address</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">
                                                {{ possibleCompaniesForDirector?.directorData?.address }}
                                            </span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.directorData?.directorJobRole" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Occupation</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.directorJobRole | titlecase }}</span>
                                        </div>
                                    </div>

                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Role</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.directorRole ? ( possibleCompaniesForDirector?.directorData?.directorRole | titlecase ) : "-" }}</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.directorData?.directorQualifications" class="grid mb-3">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Qualifications</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.directorQualifications | titlecase }}</span>
                                        </div>
                                    </div>


                                        <!-- <div class="grid mb-3" addOnAccess="contactInformation">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Email</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <ng-container *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId ); else otherPlansForEmail">
                                                    <span class="lockIconForFilters"><img src="{{ userAuthService?.featureLockIconPath }}"></span> 
                                                </ng-container>
                                                <ng-template #otherPlansForEmail>
                                                    <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.directorEmail ? (possibleCompaniesForDirector?.directorData?.directorEmail | lowercase) : "-" }}</span>
                                                </ng-template>
                                            </div>
                                        </div> -->

                                    <!-- <div class="grid mb-3">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Job Title</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.jobTitle ? (possibleCompaniesForDirector?.directorData?.jobTitle | titlecase) : "-"}}</span>
                                        </div>
                                    </div> -->

                                    <!-- <ng-container *ngIf="userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                        <div class="grid mb-3" addOnAccess="contactInformation">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Contact Number</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <ng-container *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId ); else otherPlansForContact">
                                                    <span class="lockIconForFilters"><img src="{{ userAuthService?.featureLockIconPath }}"></span> 
                                                </ng-container>
                                                <ng-template #otherPlansForContact>
                                                    <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.tel_1 ? (possibleCompaniesForDirector?.directorData?.tel_1 | titlecase) : "-"}}</span>
                                                </ng-template>
                                            </div>
                                        </div>
                                    <!-- </ng-container> -->
                                    
                                    <span class="x-big-data-font c-darkBlue">Company's Data</span>

                                    <div class="grid mb-2 mt-1">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Status</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span [ngClass]="{ 'green': [ 'live', 'administration order' ].includes( possibleCompaniesForDirector?.CompanyStatus ), 'c-orange': [ 'in liquidation' ].includes( possibleCompaniesForDirector?.CompanyStatus ), 'c-red': [ 'converted/closed', 'dissolved', 'in administration', 'in receivership / administration', 'voluntary arrangement', 'in receivership', 'deleted', 'removed' ].includes( possibleCompaniesForDirector?.CompanyStatus ) }" class="status mr-3">{{ possibleCompaniesForDirector?.CompanyStatus | titlecase }}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Company Category</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ possibleCompaniesForDirector?.CompanyCategory | titlecase }}</span><br>
                                        </div>
                                    </div>

                                    <div class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Incorporated on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ formatDate(possibleCompaniesForDirector?.IncorporationDate) }}</span><span class="small-data-font ml-2">({{ calculateAge(possibleCompaniesForDirector?.IncorporationDate) }} Years Old)</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.DissolutionDate" class="grid mb-2">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Dissolved on</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span class="data-font">{{ formatDate(possibleCompaniesForDirector?.DissolutionDate) }}</span><span class="small-data-font ml-2">({{ calculateAge(possibleCompaniesForDirector?.DissolutionDate) }} Years Ago)</span>
                                        </div>
                                    </div>
                                    <div *ngIf="getSICCodeInArrayFormat(possibleCompaniesForDirector?.Sic_Code_07)" class="grid mb-4">
                                        <div class="col-4 md-4">
                                            <span class="heading-font">Sic Code</span>
                                        </div>
                                        <div class="col-8 md-8">
                                            <span *ngFor="let item of getSICCodeInArrayFormat(possibleCompaniesForDirector?.Sic_Code_07)" class="data-font d-block">{{ item | titlecase }}</span>
                                        </div>
                                    </div>

                                    <div *ngIf="possibleCompaniesForDirector?.previousNames?.length > 0">

                                        <div class="grid">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Status</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span [ngClass]="{ 'green':  possibleCompaniesForDirector?.CompanyStatus == 'live' || possibleCompaniesForDirector?.CompanyStatus == 'administration order', 'c-orange':  possibleCompaniesForDirector?.CompanyStatus == 'in liquidation' || possibleCompaniesForDirector?.CompanyStatus == 'removed', 'c-red': possibleCompaniesForDirector?.CompanyStatus == 'converted/closed' || possibleCompaniesForDirector?.CompanyStatus == 'dissolved' || possibleCompaniesForDirector?.CompanyStatus == 'in administration' || possibleCompaniesForDirector?.CompanyStatus == 'in receivership / administration' ||  possibleCompaniesForDirector?.CompanyStatus == 'voluntary arrangement' || possibleCompaniesForDirector?.CompanyStatus == 'in receivership' || possibleCompaniesForDirector?.CompanyStatus == 'deleted'}" class="status mr-3">{{ possibleCompaniesForDirector?.directorData?.status | titlecase }}</span>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Appointed on</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.fromDate | date: 'dd-MM-yyyy' }}</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.directorData?.toDate" class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Resigned on</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.toDate | date: 'dd-MM-yyyy' }}</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.directorData?.date_of_birth" class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Birth</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ monthsEnum[ possibleCompaniesForDirector?.directorData?.date_of_birth?.month * 1 ] + ', ' || '-' }}{{ ' ' + possibleCompaniesForDirector?.directorData?.date_of_birth?.year }}
                                                </span>
                                                <span
                                                class="small-data-font ml-2">({{ directorsAge(possibleCompaniesForDirector?.directorData?.date_of_birth) }} Years Old)</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.directorData?.address" class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Address</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">
                                                    {{ possibleCompaniesForDirector?.directorData?.address }}
                                                </span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.directorData?.directorJobRole" class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Occupation</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.directorJobRole | titlecase }}</span>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Role</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.directorRole ? ( possibleCompaniesForDirector?.directorData?.directorRole | titlecase ) : "-" }}</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.directorData?.directorQualifications" class="grid mb-3">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Qualifications</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData?.directorQualifications | titlecase }}</span>
                                            </div>
                                        </div>

                                        <!-- <ng-container *ngIf="userAuthService.hasAddOnPermission('contactInformation')"> -->
                                            <div class="grid mb-3" addOnAccess="contactInformation">
                                                <div class="col-4 md-4">
                                                    <span class="heading-font">Email</span>
                                                </div>
                                                <div class="col-8 md-8">
                                                    <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.directorEmail ? (possibleCompaniesForDirector?.directorData?.directorEmail | titlecase) : "-" }}</span>
                                                </div>
                                            </div>
                                        <!-- </ng-container> -->

                                        <div class="grid mb-3">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Job Title</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.jobTitle ? (possibleCompaniesForDirector?.directorData?.jobTitle | titlecase) : "-"}}</span>
                                            </div>
                                        </div>
                                        <!-- <ng-container *ngIf="userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                            <div class="grid mb-3" addOnAccess="contactInformation">
                                                <div class="col-4 md-4">
                                                    <span class="heading-font">Contact Number</span>
                                                </div>
                                                <div class="col-8 md-8">
                                                    <span class="data-font">{{ possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.tel_1 ? (possibleCompaniesForDirector?.directorData?.tel_1 | titlecase) : "-"}}</span>
                                                </div>
                                            </div>
                                        <!-- </ng-container> -->

                                        <!-- <ng-container *ngIf=" userAuthService.hasRolePermission( ['Super Admin'] ) || userAuthService.hasAddOnPermission('contactInformation')"> -->
                                            <div class="grid mb-3" addOnAccess="contactInformation">
                                                <div class="col-4 md-4">
                                                    <span class="heading-font">Social Profiles</span>
                                                </div>
                                                <div class="col-8 md-8">
                                                    <div class="social-link">
                                                        <ng-container *ngIf="userAuthService.hasAddOnPermission('contactInformation') && possibleCompaniesForDirector?.directorData && possibleCompaniesForDirector?.directorData?.linkedin_url; else noLinkedInURL">
                                                            <a href="javascript: void(0);" (click)="checkSubscriptionAuth( isAuthCheckOnClick, possibleCompaniesForDirector?.directorData?.linkedin_url )">
                                                                <svg class="linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                    <path
                                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                </svg>
                                                            </a>
                                                        </ng-container>
                                                        <ng-template #noLinkedInURL>
                                                            <a href="javascript: void(0);" (click)="checkSubscriptionAuth( isAuthCheckOnClick, linkedInUrlForDirector(directorName, possibleCompaniesForDirector?.directorData?.directorPnr) )">
                                                                <svg class="svg-fill-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                                    <path
                                                                        d="M417.2 64H96.8C79.3 64 64 76.6 64 93.9V415c0 17.4 15.3 32.9 32.8 32.9h320.3c17.6 0 30.8-15.6 30.8-32.9V93.9C448 76.6 434.7 64 417.2 64zM183 384h-55V213h55v171zm-25.6-197h-.4c-17.6 0-29-13.1-29-29.5 0-16.7 11.7-29.5 29.7-29.5s29 12.7 29.4 29.5c0 16.4-11.4 29.5-29.7 29.5zM384 384h-55v-93.5c0-22.4-8-37.7-27.9-37.7-15.2 0-24.2 10.3-28.2 20.3-1.5 3.6-1.9 8.5-1.9 13.5V384h-55V213h55v23.8c8-11.4 20.5-27.8 49.6-27.8 36.1 0 63.4 23.8 63.4 75.1V384z" />
                                                                </svg>
                                                            </a>
                                                        </ng-template>
                                                    </div>
                                                </div>
                                            </div>
                                        <!-- </ng-container> -->

                                        <span class="x-big-data-font c-darkBlue">Company's Data</span>
                                        <div class="grid mb-2 mt-1">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Status</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span
                                                [ngClass]="{ 'green': possibleCompaniesForDirector?.CompanyStatus != undefined &&  possibleCompaniesForDirector?.CompanyStatus == 'live',amberYellow: possibleCompaniesForDirector?.CompanyStatus != undefined &&  possibleCompaniesForDirector?.CompanyStatus == 'in liquidation', 'red': possibleCompaniesForDirector?.CompanyStatus == undefined || possibleCompaniesForDirector?.CompanyStatus != 'live' }" class="status mr-3">{{ possibleCompaniesForDirector?.CompanyStatus | titlecase }}
                                                </span>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Company Category</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.CompanyCategory | titlecase }}</span><br>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Incorporated on</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ formatDate(possibleCompaniesForDirector?.IncorporationDate) }}</span><span
                                                    class="small-data-font ml-2">({{ calculateAge(possibleCompaniesForDirector?.IncorporationDate) }} Years
                                                    Old)</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.DissolutionDate" class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Dissolved on</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ formatDate(possibleCompaniesForDirector?.DissolutionDate) }}</span><span
                                                    class="small-data-font ml-2">({{ calculateAge(possibleCompaniesForDirector?.DissolutionDate) }} Years
                                                    Ago)</span>
                                            </div>
                                        </div>

                                        <div *ngIf="getSICCodeInArrayFormat(possibleCompaniesForDirector?.Sic_Code_07).length" class="grid mb-4">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Sic Code</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span *ngFor="let item of getSICCodeInArrayFormat(possibleCompaniesForDirector?.Sic_Code_07)"
                                                    class="data-font d-block">{{ item | titlecase }}</span>
                                            </div>
                                        </div>

                                        <div *ngIf="possibleCompaniesForDirector?.previousNames?.length > 0">
                                            <div class="grid">
                                                <div class="col-4 md-4">
                                                    <span class="heading-font">Previously known as</span><br>
                                                </div>
                                                <div class="col-8 md-8">
                                                    <span class="heading-font">Changed on</span><br>
                                                </div>
                                            </div>
                                        
                                            <div class="grid" *ngFor="let item of possibleCompaniesForDirector?.previousNames">
                                                <div class="col-4 md-4">
                                                    <span class="data-font d-block">{{ item.name | titlecase }}</span>
                                                </div>
                                                <div class="col-8 md-8">
                                                    <span class="data-font d-block">{{ parseDate(item.dateChanged) }}</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Account Category</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">{{ possibleCompaniesForDirector?.accountsType | titlecase }}</span><br>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Account</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">Last accounts filed on
                                                    {{formatDate(possibleCompaniesForDirector?.accountsFilingDate)}}</span><br>
                                                <span class="data-font">Last accounts made up to
                                                    {{ formatDate(possibleCompaniesForDirector?.accountsMadeUpDate) }}</span><br>
                                                <span class="data-font">Next Due Date is
                                                    {{ formatDate(possibleCompaniesForDirector?.accountsDueDate) }}</span>
                                            </div>
                                        </div>

                                        <div class="grid mb-2">
                                            <div class="col-4 md-4">
                                                <span class="heading-font">Confirmation Statement</span>
                                            </div>
                                            <div class="col-8 md-8">
                                                <span class="data-font">Last made update on
                                                    {{ formatDate(possibleCompaniesForDirector?.latestAnnualReturnDate) }}</span><br>
                                                <span class="data-font">Next Due Date is
                                                    {{ possibleCompaniesForDirector?.nextAnnualReturnDate!= null ? formatDate(possibleCompaniesForDirector?.nextAnnualReturnDate) : '(N/A)' }}</span>
                                            </div>
                                        </div>
                                        
                                    </div>
                                
                                </div>

                            </div>
                            
                            <div class="col-6 md-6">
                                <div class="card financialCard" *ngIf="possibleCompaniesForDirector?.hasFinances">
                                    <ng-container *ngIf="isLoggedIn; else showWithoutLoginDirectorFinancialModal">
                                        <ng-container *ngIf="userAuthService.hasFeaturePermission( 'Key Financials' ) || userAuthService.hasRolePermission( ['Super Admin'] ); else showCommentaryInfo">
                                            <div class="grid align-items-center">
                                                <div class="col-fixed x-big-data-font c-darkBlue">
                                                    <div>Financial Performance</div>
                                                </div>
                                            
                                                <div class="col-fixed small-data-font text-right ml-auto">
                                                    <div class="in-block">
                                                        <span class="chartLegendTriggerBox"></span>
                                                        Click to show/hide individual elements
                                                    </div>
                                                </div>
                                            </div>

                                            <p-chart type="line" [data]="possibleCompaniesForDirector?.financeChartData" height="350px" [options]="chartOptions" [plugins]="ChartDataLabelsPlugin"></p-chart>

                                            <div class="financeOverviewGrid bg-grey mt-2">

                                                <div class="grid m-0">

                                                    <div class="col-12 xl-6">

                                                        <div class="card" *ngIf="possibleCompaniesForDirector?.financeTurnoverData">

                                                            <div class="mb-2">Turnover</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] !== null; else noDataBlock">

                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] < 0; else turnoverPositiveValue1">(&pound; {{ possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #turnoverPositiveValue1><span class="c-green">&pound; {{ possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>
                                                                
                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">

                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] > possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] && possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] < possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] && possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] !== 0">
                                                                    <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>

                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] == possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] || possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] == possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] == 0 && possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] > possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>

                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ], possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ], possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ], possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ], possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 1 ] ) ?  '%' : '' }}
                                                                    </span>

                                                                    <div>
                                                                        <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] < 0 && possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] !== 0">(&pound; {{ possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] > 0 && possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] !== 0">&pound; {{ possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTurnoverData[ possibleCompaniesForDirector?.financeTurnoverData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>

                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-12 xl-6">

                                                        <div class="card" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData">

                                                            <div class="mb-2">Total Assets</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] !== null; else noDataBlock">

                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] < 0; else totalAssetsPositiveValue1">(&pound; {{ possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #totalAssetsPositiveValue1><span class="c-green">&pound; {{ possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>

                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">

                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] > possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] && possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] < possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] && possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] == possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] || possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] == possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] == 0 && possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] > possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ], possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ], possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ], possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ], possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] < 0 && possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] !== 0">(&pound; {{ possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] > 0 && possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] !== 0">&pound; {{ possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTotalAssetsData[ possibleCompaniesForDirector?.financeTotalAssetsData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>

                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-12 xl-6">

                                                        <div class="card" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData">

                                                            <div class="mb-2">Total Liabilities</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] !== null; else noDataBlock">

                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] < 0; else totalLiabilitiesPositiveValue1">(&pound; {{ possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #totalLiabilitiesPositiveValue1><span class="c-green">&pound; {{ possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>

                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] > possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] && possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] < possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] && possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] == possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] || possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] == possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] == 0 && possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] > possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-red"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ], possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ], possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ], possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ], possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] < 0 && possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] !== 0">(&pound; {{ possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] > 0 && possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] !== 0">&pound; {{ possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeTotalLiabilitiesData[ possibleCompaniesForDirector?.financeTotalLiabilitiesData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </div>

                                                    </div>

                                                    <div class="col-12 xl-6">

                                                        <div class="card" *ngIf="possibleCompaniesForDirector?.financeNetWorthData">

                                                            <div class="mb-2">Net Worth</div>

                                                            <div class="grid justify-content-between align-items-end" *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] !== null; else noDataBlock">

                                                                <div class="col-fixed py-0 x-big-data-font">
                                                                    <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] < 0; else netWorthPositiveValue1">(&pound; {{ possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] * -1 | number:'1.0-0' }})</span>
                                                                    <ng-template #netWorthPositiveValue1><span class="c-green">&pound; {{ possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] | number:'1.0-0' }}</span></ng-template>
                                                                </div>

                                                                <div class="col-fixed py-0 text-right sm-data-font ml-auto">
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] > possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] && possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-up c-green"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] < possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] && possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] !== 0">
                                                                        <i class="ui-icon-trending-down c-red"></i>
                                                                    </ng-container>
                                                                    <ng-container *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] == possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] || possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] == 0">
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] == possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-flat c-green"></i>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] == 0 && possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] > possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ]">
                                                                            <i class="ui-icon-trending-up c-green"></i>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                    <span [ngClass]="{ 'c-red': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ], possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] ) < 0, 'c-green': calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ], possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] ) >= 0 }">
                                                                        {{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ], possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] ) | number:'1.0-0' }}{{ calculatePercentageForOverviewFinancials( possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ], possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 1 ] ) ? '%' : '' }}
                                                                    </span>
                                                                    <div>
                                                                        <span class="c-red" *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] < 0 && possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] !== 0">(&pound; {{ possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] * -1 | number:'1.0-0' }})</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] > 0 && possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] !== 0">&pound; {{ possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] | number:'1.0-0' }}</span>
                                                                        <span class="c-green" *ngIf="possibleCompaniesForDirector?.financeNetWorthData[ possibleCompaniesForDirector?.financeNetWorthData?.length - 2 ] == 0">&pound; 0</span>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </div>

                                                    </div>

                                                </div>

                                                <ng-template #noDataBlock>
                                                    <span class="x-big-data-font">No Data</span>
                                                </ng-template>

                                            </div>

                                        </ng-container>

                                        <ng-template #showCommentaryInfo>

                                            <span class="x-big-data-font c-darkBlue">
                                                <div class="text-center">
                                                    Financial Performance
                                                </div>
                                            </span>
                                            <ng-container *ngIf="userAuthService.hasRolePermission( ['Client User'] ); else otherThanClientUserLoggedIn">
                                                <div class="text-center mt-3">
                                                    To enable this feature, please contact your Administrator.
                                                </div>
                                            </ng-container>
                                            <ng-template #otherThanClientUserLoggedIn>
                                                <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                                            </ng-template>
                                        </ng-template>

                                    </ng-container>

                                    <ng-template #showWithoutLoginDirectorFinancialModal>
                                        <span class="x-big-data-font c-darkBlue">
                                            <div class="text-center">
                                                Financial Performance
                                            </div>
                                        </span>
                                        <ng-container *ngIf="userAuthService.hasRolePermission( ['Client User'] ); else otherThanClientUserLoggedIn">
                                            <div class="text-center mt-3">
                                                To enable this feature, please contact your Administrator.
                                            </div>
                                        </ng-container>
                                        <ng-template #otherThanClientUserLoggedIn>
                                            <dg-upgrade-plan [currentPlan]="userDetails?.planId"></dg-upgrade-plan>
                                        </ng-template>
                                    </ng-template>

                                </div>

                            </div>

                        </div>
                    </div>

                </ng-container>

                <!-- </ng-container> -->
            </p-tabPanel>

            <p-tabPanel header="Shareholdings Summary" *ngIf="directorDetailsShareholdingsSummaryData.length">

                <div class="directorDetailsCompanySummaryBlock">
                        
                    <ng-container *ngIf="isLoggedIn; else showWithoutLoginDirectorFinancialModal">
                    
                        <dg-user-list [listColumns]="directorDetailsShareholdingsSummaryColumns" [listDataValues]="directorDetailsShareholdingsSummaryData" [listPage]="true" [thisPage]="'directorDetails'" [tableName]="'shareholdingSummaryTable'"></dg-user-list>
            
                    </ng-container>

                    <ng-template #showWithoutLoginDirectorFinancialModal>
                        <div class="card">
                            <dg-without-login-modal></dg-without-login-modal>
                        </div>
                    </ng-template>
                    
                </div>

            </p-tabPanel>

            <p-tabPanel header="Possible Shareholdings Summary" *ngIf="possibleDirectorDetailsShareholdingsSummaryData.length">
                
                <ng-container *ngIf="isLoggedIn; else showWithoutLoginDirectorFinancialModal">
                
                    <dg-user-list [listColumns]="possibleDirectorDetailsShareholdingsSummaryColumns" [listDataValues]="possibleDirectorDetailsShareholdingsSummaryData" [listPage]="true" [thisPage]="'directorDetails'" [tableName]="'possibleShareholdingSummaryTable'"></dg-user-list>
        
                </ng-container>

                <ng-template #showWithoutLoginDirectorFinancialModal>
                    <div class="card">
                        <dg-without-login-modal></dg-without-login-modal>
                    </div>
                </ng-template>
                    
            </p-tabPanel>

        </ng-container>
    </p-tabView>
    <!-- <div *ngIf="directorDetailData.length === 0"> -->
    <div *ngIf="directorISchangedToDirectorDetailPage">
        <div class="card">
            <h3 class="c-light">No records found.</h3>
        </div>
    </div>
</ng-container>
<!-- Director Detail Ends -->

<!-- ShareHolder Detail Start -->
<ng-container *ngIf="thisPage == 'shareholdersPage'">
    <div class="grid mb-3">
        <div class="col">
            <div class="grid">
                <div class="col-fixed pt-0 pr-0">
                    <i class="material-icons defaultCompanyLogo">business</i>
                </div>
                <div class="col">
                    <h2 class="mt-2">{{ shareholderName | titlecase }}</h2>
                </div>
            </div>
        </div>
    </div>
</ng-container>


<ng-container *ngIf="thisPage == 'shareholdersPage'">

    <div class="grid">
        
        <div class="col-12 lg-3" *ngIf="shareHolderDetailsSummaryColumnsData !== undefined">

            <p-card styleClass="mt-0">

                <div class="grid py-2">

                    <div class="col-12 text-right">
                        <p class="mt-0"><strong>Total Shareholdings</strong></p>
                        <h1 class="my-2">{{ shareHolderDetailsSummaryColumnsData.length }}</h1>

                    </div>

                </div>

            </p-card>

        </div>

        <div class="col-12 lg-9">

            <p-card styleClass="mt-0">
            
                <div class="grid">

                    <div class="col-12 md-3 lg-2">
                        <p class="m-0"><strong>Company Number</strong></p>
                    </div>

                    <div class="col-12 md-9 lg-10">
                        <span>{{ shareHoldingData["companyNumber"] | uppercase }}</span> 
                    </div>
    
                </div>

                <div class="grid">

                    <div class="col-12 md-3 lg-2">
                        <p class="m-0"><strong>Category</strong></p>
                    </div>

                    <div class="col-12 md-9 lg-10">
                        <span>{{ shareHoldingData["companyType"] | titlecase }}</span> 
                    </div>
    
                </div>

                <div class="grid">

                    <div class="col-12 md-3 lg-2">
                        <p class="m-0"><strong>Incorporation Date</strong></p>
                    </div>

                    <div class="col-12 md-9 lg-10">
                        <span>{{ formatDate(shareHoldingData["companyRegDate"]) }}</span> 
                    </div>
    
                </div>

                <div class="grid">

                    <div class="col-12 md-3 lg-2">
                        <p class="m-0"><strong>Sic Code:</strong></p>
                    </div>

                    <div class="col-12 md-9 lg-10">
                        <ng-container
                            *ngIf="getSICCodeInArrayFormat( shareHoldingData['companySicCode'] !==undefined && shareHoldingData['companySicCode']).length; else noSicCodeValue">
                            <div class="col  py-0 pad-x-0">
                                <span *ngFor="let item of getSICCodeInArrayFormat(shareHoldingData['companySicCode'])"
                                    class="data-font d-block">{{ item | titlecase }}</span>
                            </div>
                        </ng-container>
                        <ng-template #noSicCodeValue>Not Provided</ng-template>
                    </div>

                </div>

                <div class="grid">

                    <div class="col-12 md-3 lg-2">
                        <p class="m-0"><strong>Company Status</strong></p>
                    </div>

                    <div class="col-12 md-9 lg-10">
                        <span [ngClass]="{ 'green': shareHoldingData['companyStatus'] != undefined &&  shareHoldingData['companyStatus'] == 'live', 'c-red': shareHoldingData['companyStatus'] == undefined || shareHoldingData['companyStatus'] != 'live' }" class="status mr-2 mb-2">{{ shareHoldingData["companyStatus"] | titlecase }}</span> 
                    </div>
    
                </div>

            </p-card>

        </div>

    </div>


    <h2 class = "mt-5">Companies Shareholdings</h2>

    <ng-container>
    
        <dg-user-list [listColumns]="shareHolderDetailsSummaryColumns" [listDataValues]="shareHolderDetailsSummaryColumnsData" [listPage]="true" [thisPage]="'shareHolderDetails'"></dg-user-list>

    </ng-container>

</ng-container> 
<!-- ShareHolder Details Ends -->
