<!-- Confirmation Dialog Modal Export Starts -->

<p-dialog header="Let's Go!" [(visible)]="confirmationDialog" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '25vw'}" [draggable]="false" [focusOnShow]="false">
    <!-- <div class="text-center" *ngIf="['buyersDashboard', 'suppliersDashboard', 'contractFinderPage'].includes(thisPage)">
        <span class="ml-2">Please note that only companies registered in UK are exportable.</span>
    </div> -->
    <div class="text-center mt-1">
        <span class="ml-2">{{exportLimitmessage}}</span>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline" (click)="exportCSV()" label="Yes"></button>
            <button pButton type="button" class="ui-button-inline darkGrey" (click)="confirmationDialog=false" label="No"></button>
        </div>
    </p-footer>
</p-dialog>

<!-- Confirmation Dialog Modal Export Ends -->

<!-- Confirmation Dialog Modal Export All Starts -->

<p-dialog header="Export All Confirmation" [(visible)]="confirmationDialogExportAll" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '25vw'}" [draggable]="false" [focusOnShow]="false" styleClass="logoutConfirmationDialogStyling">
    <div class="text-center">
        <i class="pi pi-info-circle"></i> <span class="ml-2">Are you sure that you want to perform this action?</span>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline" (click)="exportAllCSV()" label="Yes"></button>
            <button pButton type="button" class="ui-button-inline darkGrey" (click)="confirmationDialogExportAll=false" label="No"></button>
        </div>
    </p-footer>
</p-dialog>

<!-- Confirmation Dialog Modal Export All Ends -->

<!-- Confirmation Dialog Modal CRM Export All Confirmation Starts -->

<p-dialog header="CRM Export All Confirmation" [(visible)]="confirmationDialogCrmExportAll" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '25vw'}" [draggable]="false" [focusOnShow]="false" styleClass="logoutConfirmationDialogStyling">
    <div class="text-center">
        <i class="pi pi-info-circle"></i> <span class="ml-2">Are you sure that you want to perform this action?</span>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline" (click)="exportCrmAll()" label="Yes"></button>
            <button pButton type="button" class="ui-button-inline darkGrey" (click)="confirmationDialogCrmExportAll=false" label="No"></button>
        </div>
    </p-footer>
</p-dialog>

<!-- Confirmation Dialog Modal CRM Export All Confirmation Ends -->


<!-- Export All Limit Zero on Show Charges Table  -->
<p-dialog header="Let's Go!" [(visible)]="exportDialogNoLimit" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '35vw'}" [draggable]="false" [focusOnShow]="false">
    <div class="text-center">
        <p>{{ exportCSVDialogMessage }} </p>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline darkGrey" (click)="exportDialogNoLimit=false" label="Close"></button>
        </div>
    </p-footer>
</p-dialog>
<!-- Export All Limit Zero on Show Charges Table End -->

<!-- Upgrade Plan Dialog -->
<p-dialog styleClass="subscriptionPlanDialogModal" [modal]="true" [(visible)]="showUpgradePlanDialog" [baseZIndex]="999999998" appendTo="body" [focusOnShow]="false" [style]="{ width: 'auto' }" (onHide)="closeDialogBox()">
    <dg-upgrade-plan [currentPlan]="userDetails?.planId" [componentView]="'inModal'"></dg-upgrade-plan>
</p-dialog>
<!-- Upgrade Plan Dialog End -->

<!-- Email Export Dialog Starts -->
<p-dialog header="Email Export" [(visible)]="customEmailOrNotdialog" [modal]="true" appendTo="body" [style]="{width: '35vw'}" [draggable]="false" [focusOnShow]="false" (onHide)="customEmailOrNotdialog=false;customEmail=false">
    <div class="text-center" *ngIf="!customEmail">

        <p>{{ constantMessages['confirmation']['sendToOtherEmail'] }}</p>

        <button pButton class="p-button-rounded mr-2 p-button-lg" (click)="customEmail=true" type="button" label="Yes"></button>
        <button pButton class="p-button-rounded p-button-lg darkGrey" (click)="exportToEmail(adminRecordListTable)" type="button" label="No"></button>
    </div>
    <div *ngIf="customEmail" class="col form-group p-input-filled">
        <div class="col-12 md:col-3 lg:col-12">
            <span class="p-inputfield">
                <input type="email" pInputText name="email" (keyup)="validateEmail(customEmailId)" placeholder="Email" [(ngModel)]="customEmailId" autocomplete="off"  [pattern]="emailPattern" #offEmail="ngModel" style="width: 100%;">
            </span>
            <div *ngIf="offEmail.errors">
                <div style="color: red;" *ngIf="offEmail.errors.pattern">Email not valid.</div>	
             </div>
        </div>
    </div>
    <p-footer>
        <div class="text-center">
            <button *ngIf="customEmail" pButton class="p-button-rounded darkGrey" (click)="customEmail=false" type="button" label="Back"></button>
            <button pButton *ngIf="customEmail" class="p-button-rounded ml-2" (click)="exportToEmail(adminRecordListTable)" [disabled]="customEmailId === undefined || emailValidateBool == false || customEmailId.length == 0 || this.listDataValues.length === 0" type="button" label="Send"></button>
            <button pButton type="button" class="p-button-rounded darkGrey ml-2" (click)="customEmailOrNotdialog=false; this.customEmailId='';customEmail=false" label="Close"></button>
        </div>
    </p-footer>
</p-dialog>

<p-dialog header="Let's Go!" [(visible)]="confirmationDialogEmail" [modal]="true" [baseZIndex]="999999998" appendTo="body" [style]="{width: '25vw'}" [draggable]="false" [focusOnShow]="false">
    <div class="text-center mt-1">
        <span class="ml-2">{{exportLimitmessage}}</span>
    </div>
    <p-footer>
        <div class="text-center">
            <button pButton type="button" class="ui-button-inline" (click)="exportLimitCheck($event, adminRecordListTable)" label="Yes"></button>
            <button pButton type="button" class="p-button-rounded darkGrey ml-2" (click)="customEmailOrNotdialog=false; this.customEmailId='';customEmail=false;confirmationDialogEmail=false" label="Close"></button>
        </div>
    </p-footer>
</p-dialog>
<!-- Email Export Dialog Ends -->

  
<button *ngIf="[ 'customerWatchPage', 'companyListOfIServiceCategoryPage', 'showChargesTablePage', 'showDirectorScreenPage', 'investorFinderPage', 'investeeFinderPage', 'user-management', 'hnwiPage', 'buyersDashboard', 'esgWatchPage', 'suppliersDashboard', 'supplierDashboard', 'showTradeTablePage' ].includes( thisPage )" pButton type="button" label="Export" icon="ui-icon-insert-drive-file" [disabled]="!userAuthService.hasAddOnPermission('defaultExportFeature') || this.listDataValues.length === 0" class="p-button-rounded mr-3 p-button-sm mb-xxl-2 hideBlockForMobileView" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="exportLimitCheck( $event, adminRecordListTable )">
    <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService.featureLockIconPath }}"></span>
</button>

<button pButton type="button" label="Export To Email" *ngIf="[ 'customerWatchPage', 'companyListOfIServiceCategoryPage', 'showChargesTablePage', 'showDirectorScreenPage', 'user-management', 'hnwiPage', 'buyersDashboard', 'esgWatchPage', 'suppliersDashboard', 'supplierDashboard', 'showTradeTablePage' ].includes( thisPage ) && selectedGlobalCountry == 'uk'" icon="ui-icon-insert-drive-file" [disabled]="!userAuthService.hasAddOnPermission('defaultExportFeature') || this.listDataValues.length === 0" class="p-button-rounded mr-3 p-button-sm mb-xxl-2 hideBlockForMobileView" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="exportCSVToMailDialog()">
    <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService.featureLockIconPath }}"></span>
</button>


<button pButton type="button" label="Export All" *ngIf="[ 'customerWatchPage', 'showChargesTablePage', 'showDirectorScreenPage', 'showTradeTablePage', 'showMortgagesChargesTablePage', 'personLinkedIn', 'diversityCalculation', 'companyLinkedIn', 'supplierResilience' ].includes( thisPage ) && !showExportFilterBtn && !hideExportToAllButn  && selectedGlobalCountry == 'uk'" icon="ui-icon-insert-drive-file" [disabled]="!userAuthService.hasAddOnPermission('defaultExportFeature') || ( this.listDataValues && !this.listDataValues.length )" class="p-button-rounded mr-3 p-button-sm mb-xxl-2 hideBlockForMobileView" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) ? showUpgradePlanDialog = true : exportAllCSVDialog()">
    <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService.featureLockIconPath }}"></span>
</button>

<button pButton *ngIf="showExportFilterBtn" type="button" label="Export All" icon="ui-icon-insert-drive-file" [disabled]="!userAuthService.hasAddOnPermission('defaultExportFeature')" class="p-button-rounded mr-2 p-button-sm ml-2" (click)="exportAllCSVDialog()"></button>

<button pButton type="button" label="CRM Export All" *ngIf="[ 'showChargesTablePage' ].includes( thisPage ) && ( appliedFilters || activeRoute.snapshot.queryParams['cListId'] ) != undefined && userAuthService.hasAddOnPermission('crmExport') && selectedGlobalCountry == 'uk'" icon="ui-icon-insert-drive-file" [disabled]="!userAuthService.hasAddOnPermission('defaultExportFeature') || this.listDataValues.length === 0" class="p-button-rounded mr-3 p-button-sm hideBlockForMobileView" [ngClass]="{ 'hasFeatureLockIcon': subscribedPlanModal['Valentine_Special'] .includes( userDetails?.planId ) }" (click)="exportAllCrmDialog()">
    <span *ngIf="subscribedPlanModal['Valentine_Special'].includes( userDetails?.planId )" class="featureLockIconForDetailsPage"><img src="{{ userAuthService.featureLockIconPath }}"></span>
</button>